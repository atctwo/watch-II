<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>watch 2: components/arduino-esp32/libraries/AzureIoT/src/az_iot/c-utility/src/http_proxy_io.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">watch 2
   </div>
   <div id="projectbrief">Firmwareforwatch2</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_409f97388efe006bc3438b95e9edef48.html">components</a></li><li class="navelem"><a class="el" href="dir_5eb99044ce905dee52e93bf33cea5db4.html">arduino-esp32</a></li><li class="navelem"><a class="el" href="dir_0b98385dcf64e929fcaa5e8c894594ea.html">libraries</a></li><li class="navelem"><a class="el" href="dir_eb555940be421b578cfc4731c861a40a.html">AzureIoT</a></li><li class="navelem"><a class="el" href="dir_540bbe64a9e668446da0d15e64e423e9.html">src</a></li><li class="navelem"><a class="el" href="dir_c4ba8e35b6f312a68ea59c6826b7e111.html">az_iot</a></li><li class="navelem"><a class="el" href="dir_31551b8d33ee157fa445c47622c5655a.html">c-utility</a></li><li class="navelem"><a class="el" href="dir_b7b3d73515064cc1b6d602999d01daa9.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">http_proxy_io.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="http__proxy__io_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright (c) Microsoft. All rights reserved.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Licensed under the MIT license. See LICENSE file in the project root for full license information.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160; </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;stdbool.h&gt;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="stdint_8h.html">stdint.h</a>&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="limits_8h.html">limits.h</a>&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;stddef.h&gt;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="gballoc_8h.html">az_iot/c-utility/inc/azure_c_shared_utility/gballoc.h</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="xio_8h.html">az_iot/c-utility/inc/azure_c_shared_utility/xio.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="socketio_8h.html">az_iot/c-utility/inc/azure_c_shared_utility/socketio.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="crt__abstractions_8h.html">az_iot/c-utility/inc/azure_c_shared_utility/crt_abstractions.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="http__proxy__io_8h.html">az_iot/c-utility/inc/azure_c_shared_utility/http_proxy_io.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libraries_2AzureIoT_2src_2az__iot_2c-utility_2inc_2azure__c__shared__utility_2base64_8h.html">az_iot/c-utility/inc/azure_c_shared_utility/base64.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160; </div>
<div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43">   17</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43">HTTP_PROXY_IO_STATE_TAG</a></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;{</div>
<div class="line"><a name="l00019"></a><span class="lineno"><a class="line" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43aca240fac37d13797fa4837825933c358">   19</a></span>&#160;    <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43aca240fac37d13797fa4837825933c358">HTTP_PROXY_IO_STATE_CLOSED</a>,</div>
<div class="line"><a name="l00020"></a><span class="lineno"><a class="line" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43acbb9fd365c568f3326f7bac234b0c502">   20</a></span>&#160;    <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43acbb9fd365c568f3326f7bac234b0c502">HTTP_PROXY_IO_STATE_OPENING_UNDERLYING_IO</a>,</div>
<div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43a947ca085f2053e7a78265126593e886e">   21</a></span>&#160;    <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43a947ca085f2053e7a78265126593e886e">HTTP_PROXY_IO_STATE_WAITING_FOR_CONNECT_RESPONSE</a>,</div>
<div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43a2bbab483a5d912bad03fe2eff4628462">   22</a></span>&#160;    <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43a2bbab483a5d912bad03fe2eff4628462">HTTP_PROXY_IO_STATE_OPEN</a>,</div>
<div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43abf0c18c5dc594d0b8260d4d70f4bd908">   23</a></span>&#160;    <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43abf0c18c5dc594d0b8260d4d70f4bd908">HTTP_PROXY_IO_STATE_CLOSING</a>,</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43a06f57d90fe6a9427492bc9294b12be07">HTTP_PROXY_IO_STATE_ERROR</a></div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43a06f57d90fe6a9427492bc9294b12be07">   25</a></span>&#160;} <a class="code" href="http__proxy__io_8c.html#a3979563d2a58e132f5998f6045f7c566">HTTP_PROXY_IO_STATE</a>;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="structHTTP__PROXY__IO__INSTANCE__TAG.html">   27</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html">HTTP_PROXY_IO_INSTANCE_TAG</a></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;{</div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7ccb4535cac53d4115424ac65cf34686">   29</a></span>&#160;    <a class="code" href="http__proxy__io_8c.html#a3979563d2a58e132f5998f6045f7c566">HTTP_PROXY_IO_STATE</a> <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7ccb4535cac53d4115424ac65cf34686">http_proxy_io_state</a>;</div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#abf6cf5baa051d4b312384df8a543d3b1">   30</a></span>&#160;    <a class="code" href="xio_8h.html#a13198b46d201d067f60a82c1bf0e5780">ON_BYTES_RECEIVED</a> <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#abf6cf5baa051d4b312384df8a543d3b1">on_bytes_received</a>;</div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ae8aaf994df87006a8a18c840ce9b4092">   31</a></span>&#160;    <span class="keywordtype">void</span>* <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ae8aaf994df87006a8a18c840ce9b4092">on_bytes_received_context</a>;</div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#abc19a3996c057365b7a2368352602756">   32</a></span>&#160;    <a class="code" href="xio_8h.html#a2761e39867e9372423f77921fc5fd26d">ON_IO_ERROR</a> <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#abc19a3996c057365b7a2368352602756">on_io_error</a>;</div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#afc54f6d61c36537d67da5054302894ab">   33</a></span>&#160;    <span class="keywordtype">void</span>* <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#afc54f6d61c36537d67da5054302894ab">on_io_error_context</a>;</div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7373aa941cb4ee43f8fc3ccdfde9a532">   34</a></span>&#160;    <a class="code" href="xio_8h.html#a3acca89b8b5ff3d42b3eaf0b3dbcf7ca">ON_IO_OPEN_COMPLETE</a> <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7373aa941cb4ee43f8fc3ccdfde9a532">on_io_open_complete</a>;</div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a41d1d1b03932da3a07c2148e31050bec">   35</a></span>&#160;    <span class="keywordtype">void</span>* <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a41d1d1b03932da3a07c2148e31050bec">on_io_open_complete_context</a>;</div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a8d1c9de4129a6f3207d91d63cf814553">   36</a></span>&#160;    <a class="code" href="xio_8h.html#afdff4c121fba1278335064c5686cc419">ON_IO_CLOSE_COMPLETE</a> <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a8d1c9de4129a6f3207d91d63cf814553">on_io_close_complete</a>;</div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a658f732ee6d24301bfcf87d60945c701">   37</a></span>&#160;    <span class="keywordtype">void</span>* <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a658f732ee6d24301bfcf87d60945c701">on_io_close_complete_context</a>;</div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ac2d566a77dcd7be68758874f5cc09a3b">   38</a></span>&#160;    <span class="keywordtype">char</span>* <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ac2d566a77dcd7be68758874f5cc09a3b">hostname</a>;</div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a292ad9eb62a49d25a642d4a97355f9ee">   39</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a292ad9eb62a49d25a642d4a97355f9ee">port</a>;</div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ae75eb106d12c965c286bd42cc8aa4b1c">   40</a></span>&#160;    <span class="keywordtype">char</span>* <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ae75eb106d12c965c286bd42cc8aa4b1c">proxy_hostname</a>;</div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#af6a2ebb823ebfc2f4c7f63831d5ceaae">   41</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#af6a2ebb823ebfc2f4c7f63831d5ceaae">proxy_port</a>;</div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a037011df7bb17ae0dc1b5c66aae30c9c">   42</a></span>&#160;    <span class="keywordtype">char</span>* <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a037011df7bb17ae0dc1b5c66aae30c9c">username</a>;</div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a24b198d8abbc43d1752be530065edf4a">   43</a></span>&#160;    <span class="keywordtype">char</span>* <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a24b198d8abbc43d1752be530065edf4a">password</a>;</div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a8821d48e1193ff21f84464fc96d4a036">   44</a></span>&#160;    <a class="code" href="structXIO__INSTANCE__TAG.html">XIO_HANDLE</a> <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a8821d48e1193ff21f84464fc96d4a036">underlying_io</a>;</div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ab6cdda13b787b3fc0cf4038f1e633f75">   45</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ab6cdda13b787b3fc0cf4038f1e633f75">receive_buffer</a>;</div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#af0d45267ae26b56b88254712acad94be">   46</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#af0d45267ae26b56b88254712acad94be">receive_buffer_size</a>;</div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="http__proxy__io_8c.html#a81696b47393da4a563ee57e583bf8eb0">   47</a></span>&#160;} <a class="code" href="http__proxy__io_8c.html#a81696b47393da4a563ee57e583bf8eb0">HTTP_PROXY_IO_INSTANCE</a>;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keyword">static</span> <a class="code" href="xio_8h.html#aa71532538adc618acbebd20396c0f83f">CONCRETE_IO_HANDLE</a> http_proxy_io_create(<span class="keywordtype">void</span>* io_create_parameters)</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;{</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html">HTTP_PROXY_IO_INSTANCE</a>* result;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">if</span> (io_create_parameters == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    {</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_002: [ If `io_create_parameters` is NULL, `http_proxy_io_create` shall fail and return NULL. ]*/</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        result = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;NULL io_create_parameters.&quot;</span>);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_003: [ `io_create_parameters` shall be used as an `HTTP_PROXY_IO_CONFIG*`. ]*/</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <a class="code" href="structHTTP__PROXY__IO__CONFIG__TAG.html">HTTP_PROXY_IO_CONFIG</a>* http_proxy_io_config = (<a class="code" href="structHTTP__PROXY__IO__CONFIG__TAG.html">HTTP_PROXY_IO_CONFIG</a>*)io_create_parameters;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="keywordflow">if</span> ((http_proxy_io_config-&gt;<a class="code" href="structHTTP__PROXY__IO__CONFIG__TAG.html#ac3c7bf9d2248763d16105545372d1d34">hostname</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ||</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            (http_proxy_io_config-&gt;<a class="code" href="structHTTP__PROXY__IO__CONFIG__TAG.html#afae945b5ee4fdded80b1602a692382d1">proxy_hostname</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_004: [ If the `hostname` or `proxy_hostname` member is NULL, then `http_proxy_io_create` shall fail and return NULL. ]*/</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            result = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Bad arguments: hostname = %p, proxy_hostname = %p&quot;</span>,</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                http_proxy_io_config-&gt;<a class="code" href="structHTTP__PROXY__IO__CONFIG__TAG.html#ac3c7bf9d2248763d16105545372d1d34">hostname</a>, http_proxy_io_config-&gt;<a class="code" href="structHTTP__PROXY__IO__CONFIG__TAG.html#afae945b5ee4fdded80b1602a692382d1">proxy_hostname</a>);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        }</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_095: [ If one of the fields `username` and `password` is non-NULL, then the other has to be also non-NULL, otherwise `http_proxy_io_create` shall fail and return NULL. ]*/</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((http_proxy_io_config-&gt;<a class="code" href="structHTTP__PROXY__IO__CONFIG__TAG.html#add1d2ba69cc57ac2a55dc6236cbf304c">username</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) &amp;&amp; (http_proxy_io_config-&gt;<a class="code" href="structHTTP__PROXY__IO__CONFIG__TAG.html#a26c66516aa6b3e6282bf6a1a856e53fd">password</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) ||</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            ((http_proxy_io_config-&gt;<a class="code" href="structHTTP__PROXY__IO__CONFIG__TAG.html#add1d2ba69cc57ac2a55dc6236cbf304c">username</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) &amp;&amp; (http_proxy_io_config-&gt;<a class="code" href="structHTTP__PROXY__IO__CONFIG__TAG.html#a26c66516aa6b3e6282bf6a1a856e53fd">password</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)))</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            result = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Bad arguments: username = %p, password = %p&quot;</span>,</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                http_proxy_io_config-&gt;<a class="code" href="structHTTP__PROXY__IO__CONFIG__TAG.html#add1d2ba69cc57ac2a55dc6236cbf304c">username</a>, http_proxy_io_config-&gt;<a class="code" href="structHTTP__PROXY__IO__CONFIG__TAG.html#a26c66516aa6b3e6282bf6a1a856e53fd">password</a>);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        }</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_001: [ `http_proxy_io_create` shall create a new instance of the HTTP proxy IO. ]*/</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            result = (<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html">HTTP_PROXY_IO_INSTANCE</a>*)<a class="code" href="unity__fixture__malloc__overrides_8h.html#acf143577800376dd931c059ecc61ba06">malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html">HTTP_PROXY_IO_INSTANCE</a>));</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            <span class="keywordflow">if</span> (result == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_051: [ If allocating memory for the new instance fails, `http_proxy_io_create` shall fail and return NULL. ]*/</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Failed allocating HTTP proxy IO instance.&quot;</span>);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_005: [ `http_proxy_io_create` shall copy the `hostname`, `port`, `username` and `password` values for later use when the actual CONNECT is performed. ]*/</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_006: [ `hostname` and `proxy_hostname`, `username` and `password` shall be copied by calling `mallocAndStrcpy_s`. ]*/</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="crt__abstractions_8c.html#a867b1509b0b0a16b1bae1d829679c484">mallocAndStrcpy_s</a>(&amp;result-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ac2d566a77dcd7be68758874f5cc09a3b">hostname</a>, http_proxy_io_config-&gt;<a class="code" href="structHTTP__PROXY__IO__CONFIG__TAG.html#ac3c7bf9d2248763d16105545372d1d34">hostname</a>) != 0)</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                    <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_007: [ If `mallocAndStrcpy_s` fails then `http_proxy_io_create` shall fail and return NULL. ]*/</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                    <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Failed to copy the hostname.&quot;</span>);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                    <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_008: [ When `http_proxy_io_create` fails, all allocated resources up to that point shall be freed. ]*/</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                    <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(result);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                    result = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                }</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                    <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_006: [ `hostname` and `proxy_hostname`, `username` and `password` shall be copied by calling `mallocAndStrcpy_s`. ]*/</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="crt__abstractions_8c.html#a867b1509b0b0a16b1bae1d829679c484">mallocAndStrcpy_s</a>(&amp;result-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ae75eb106d12c965c286bd42cc8aa4b1c">proxy_hostname</a>, http_proxy_io_config-&gt;<a class="code" href="structHTTP__PROXY__IO__CONFIG__TAG.html#afae945b5ee4fdded80b1602a692382d1">proxy_hostname</a>) != 0)</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                    {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_007: [ If `mallocAndStrcpy_s` fails then `http_proxy_io_create` shall fail and return NULL. ]*/</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Failed to copy the proxy_hostname.&quot;</span>);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_008: [ When `http_proxy_io_create` fails, all allocated resources up to that point shall be freed. ]*/</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(result-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ac2d566a77dcd7be68758874f5cc09a3b">hostname</a>);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(result);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                        result = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                    }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                    {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                        result-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a037011df7bb17ae0dc1b5c66aae30c9c">username</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                        result-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a24b198d8abbc43d1752be530065edf4a">password</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_006: [ `hostname` and `proxy_hostname`, `username` and `password` shall be copied by calling `mallocAndStrcpy_s`. ]*/</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_094: [ `username` and `password` shall be optional. ]*/</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                        <span class="keywordflow">if</span> ((http_proxy_io_config-&gt;<a class="code" href="structHTTP__PROXY__IO__CONFIG__TAG.html#add1d2ba69cc57ac2a55dc6236cbf304c">username</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) &amp;&amp; (<a class="code" href="crt__abstractions_8c.html#a867b1509b0b0a16b1bae1d829679c484">mallocAndStrcpy_s</a>(&amp;result-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a037011df7bb17ae0dc1b5c66aae30c9c">username</a>, http_proxy_io_config-&gt;<a class="code" href="structHTTP__PROXY__IO__CONFIG__TAG.html#add1d2ba69cc57ac2a55dc6236cbf304c">username</a>) != 0))</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                        {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_007: [ If `mallocAndStrcpy_s` fails then `http_proxy_io_create` shall fail and return NULL. ]*/</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Failed to copy the username.&quot;</span>);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_008: [ When `http_proxy_io_create` fails, all allocated resources up to that point shall be freed. ]*/</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                            <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(result-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ae75eb106d12c965c286bd42cc8aa4b1c">proxy_hostname</a>);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                            <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(result-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ac2d566a77dcd7be68758874f5cc09a3b">hostname</a>);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                            <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(result);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                            result = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                        }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                        {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_006: [ `hostname` and `proxy_hostname`, `username` and `password` shall be copied by calling `mallocAndStrcpy_s`. ]*/</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_094: [ `username` and `password` shall be optional. ]*/</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                            <span class="keywordflow">if</span> ((http_proxy_io_config-&gt;<a class="code" href="structHTTP__PROXY__IO__CONFIG__TAG.html#a26c66516aa6b3e6282bf6a1a856e53fd">password</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) &amp;&amp; (<a class="code" href="crt__abstractions_8c.html#a867b1509b0b0a16b1bae1d829679c484">mallocAndStrcpy_s</a>(&amp;result-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a24b198d8abbc43d1752be530065edf4a">password</a>, http_proxy_io_config-&gt;<a class="code" href="structHTTP__PROXY__IO__CONFIG__TAG.html#a26c66516aa6b3e6282bf6a1a856e53fd">password</a>) != 0))</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                            {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                                <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_007: [ If `mallocAndStrcpy_s` fails then `http_proxy_io_create` shall fail and return NULL. ]*/</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Failed to copy the passowrd.&quot;</span>);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                                <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_008: [ When `http_proxy_io_create` fails, all allocated resources up to that point shall be freed. ]*/</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                                <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(result-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a037011df7bb17ae0dc1b5c66aae30c9c">username</a>);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                                <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(result-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ae75eb106d12c965c286bd42cc8aa4b1c">proxy_hostname</a>);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                                <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(result-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ac2d566a77dcd7be68758874f5cc09a3b">hostname</a>);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                                <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(result);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                                result = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                            }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                            {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                                <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_010: [ - `io_interface_description` shall be set to the result of `socketio_get_interface_description`. ]*/</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                                <span class="keyword">const</span> <a class="code" href="structIO__INTERFACE__DESCRIPTION__TAG.html">IO_INTERFACE_DESCRIPTION</a>* underlying_io_interface = socketio_get_interface_description();</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                                <span class="keywordflow">if</span> (underlying_io_interface == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                                {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                                    <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_050: [ If `socketio_get_interface_description` fails, `http_proxy_io_create` shall fail and return NULL. ]*/</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                                    <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Unable to get the socket IO interface description.&quot;</span>);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                                    <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_008: [ When `http_proxy_io_create` fails, all allocated resources up to that point shall be freed. ]*/</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                                    <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(result-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a24b198d8abbc43d1752be530065edf4a">password</a>);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                                    <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(result-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a037011df7bb17ae0dc1b5c66aae30c9c">username</a>);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                                    <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(result-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ae75eb106d12c965c286bd42cc8aa4b1c">proxy_hostname</a>);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                                    <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(result-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ac2d566a77dcd7be68758874f5cc09a3b">hostname</a>);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                                    <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(result);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                                    result = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                                }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                                {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                                    <a class="code" href="structSOCKETIO__CONFIG__TAG.html">SOCKETIO_CONFIG</a> socket_io_config;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                                    <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_011: [ - `xio_create_parameters` shall be set to a `SOCKETIO_CONFIG*` where `hostname` is set to the `proxy_hostname` member of `io_create_parameters` and `port` is set to the `proxy_port` member of `io_create_parameters`. ]*/</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                                    socket_io_config.<a class="code" href="structSOCKETIO__CONFIG__TAG.html#ae37dfae4d3a9f1c76d8d5f25059111dc">hostname</a> = http_proxy_io_config-&gt;<a class="code" href="structHTTP__PROXY__IO__CONFIG__TAG.html#afae945b5ee4fdded80b1602a692382d1">proxy_hostname</a>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                                    socket_io_config.<a class="code" href="structSOCKETIO__CONFIG__TAG.html#af72914d65fcb834a92d8fdaa54961840">port</a> = http_proxy_io_config-&gt;<a class="code" href="structHTTP__PROXY__IO__CONFIG__TAG.html#a1488039e98bd63f487e95da388e897df">proxy_port</a>;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                                    socket_io_config.<a class="code" href="structSOCKETIO__CONFIG__TAG.html#a0ed8a2468cb6954c24d397fef0b1422b">accepted_socket</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                                    <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_009: [ `http_proxy_io_create` shall create a new socket IO by calling `xio_create` with the arguments: ]*/</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                                    result-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a8821d48e1193ff21f84464fc96d4a036">underlying_io</a> = <a class="code" href="xio_8c.html#aa6c82a73f8c2e190dfe3b9eb5afb9bdd">xio_create</a>(underlying_io_interface, &amp;socket_io_config);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                                    <span class="keywordflow">if</span> (result-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a8821d48e1193ff21f84464fc96d4a036">underlying_io</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                                    {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                                        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_012: [ If `xio_create` fails, `http_proxy_io_create` shall fail and return NULL. ]*/</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                                        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Unable to create the underlying IO.&quot;</span>);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                                        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_008: [ When `http_proxy_io_create` fails, all allocated resources up to that point shall be freed. ]*/</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                                        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(result-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a24b198d8abbc43d1752be530065edf4a">password</a>);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                                        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(result-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a037011df7bb17ae0dc1b5c66aae30c9c">username</a>);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                                        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(result-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ae75eb106d12c965c286bd42cc8aa4b1c">proxy_hostname</a>);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                                        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(result-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ac2d566a77dcd7be68758874f5cc09a3b">hostname</a>);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                                        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(result);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                                        result = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                                    }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                                    {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                                        result-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a292ad9eb62a49d25a642d4a97355f9ee">port</a> = http_proxy_io_config-&gt;<a class="code" href="structHTTP__PROXY__IO__CONFIG__TAG.html#a69f6084e1141a28dd7e739cc0643646f">port</a>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                                        result-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#af6a2ebb823ebfc2f4c7f63831d5ceaae">proxy_port</a> = http_proxy_io_config-&gt;<a class="code" href="structHTTP__PROXY__IO__CONFIG__TAG.html#a1488039e98bd63f487e95da388e897df">proxy_port</a>;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                                        result-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ab6cdda13b787b3fc0cf4038f1e633f75">receive_buffer</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                                        result-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#af0d45267ae26b56b88254712acad94be">receive_buffer_size</a> = 0;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                                        result-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7ccb4535cac53d4115424ac65cf34686">http_proxy_io_state</a> = <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43aca240fac37d13797fa4837825933c358">HTTP_PROXY_IO_STATE_CLOSED</a>;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                                    }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                                }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                            }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                        }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                    }</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        }</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;}</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> http_proxy_io_destroy(<a class="code" href="xio_8h.html#aa71532538adc618acbebd20396c0f83f">CONCRETE_IO_HANDLE</a> http_proxy_io)</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;{</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">if</span> (http_proxy_io == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_014: [ If `http_proxy_io` is NULL, `http_proxy_io_destroy` shall do nothing. ]*/</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;NULL http_proxy_io.&quot;</span>);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html">HTTP_PROXY_IO_INSTANCE</a>* http_proxy_io_instance = (<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html">HTTP_PROXY_IO_INSTANCE</a>*)http_proxy_io;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_013: [ `http_proxy_io_destroy` shall free the HTTP proxy IO instance indicated by `http_proxy_io`. ]*/</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="keywordflow">if</span> (http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ab6cdda13b787b3fc0cf4038f1e633f75">receive_buffer</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ab6cdda13b787b3fc0cf4038f1e633f75">receive_buffer</a>);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_016: [ `http_proxy_io_destroy` shall destroy the underlying IO created in `http_proxy_io_create` by calling `xio_destroy`. ]*/</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <a class="code" href="xio_8c.html#acf7bf0887a6f4a203740745d27d21bb1">xio_destroy</a>(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a8821d48e1193ff21f84464fc96d4a036">underlying_io</a>);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ac2d566a77dcd7be68758874f5cc09a3b">hostname</a>);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ae75eb106d12c965c286bd42cc8aa4b1c">proxy_hostname</a>);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a037011df7bb17ae0dc1b5c66aae30c9c">username</a>);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a24b198d8abbc43d1752be530065edf4a">password</a>);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(http_proxy_io_instance);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;}</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> indicate_open_complete_error_and_close(<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html">HTTP_PROXY_IO_INSTANCE</a>* http_proxy_io_instance)</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;{</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7ccb4535cac53d4115424ac65cf34686">http_proxy_io_state</a> = <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43aca240fac37d13797fa4837825933c358">HTTP_PROXY_IO_STATE_CLOSED</a>;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="xio_8c.html#a83d9da875cf42f4f1ce130664a9b3860">xio_close</a>(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a8821d48e1193ff21f84464fc96d4a036">underlying_io</a>, <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7373aa941cb4ee43f8fc3ccdfde9a532">on_io_open_complete</a>(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a41d1d1b03932da3a07c2148e31050bec">on_io_open_complete_context</a>, IO_OPEN_ERROR);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;}</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> on_underlying_io_open_complete(<span class="keywordtype">void</span>* context, IO_OPEN_RESULT open_result)</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;{</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">if</span> (context == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_081: [ `on_underlying_io_open_complete` called with NULL context shall do nothing. ]*/</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;NULL context in on_underlying_io_open_complete&quot;</span>);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html">HTTP_PROXY_IO_INSTANCE</a>* http_proxy_io_instance = (<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html">HTTP_PROXY_IO_INSTANCE</a>*)context;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="keywordflow">switch</span> (http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7ccb4535cac53d4115424ac65cf34686">http_proxy_io_state</a>)</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;on_underlying_io_open_complete called in an unexpected state.&quot;</span>);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43abf0c18c5dc594d0b8260d4d70f4bd908">HTTP_PROXY_IO_STATE_CLOSING</a>:</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43a2bbab483a5d912bad03fe2eff4628462">HTTP_PROXY_IO_STATE_OPEN</a>:</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_077: [ When `on_underlying_io_open_complete` is called in after OPEN has completed, the `on_io_error` callback shall be triggered passing the `on_io_error_context` argument as `context`. ]*/</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#abc19a3996c057365b7a2368352602756">on_io_error</a>(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#afc54f6d61c36537d67da5054302894ab">on_io_error_context</a>);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43a947ca085f2053e7a78265126593e886e">HTTP_PROXY_IO_STATE_WAITING_FOR_CONNECT_RESPONSE</a>:</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_076: [ When `on_underlying_io_open_complete` is called while waiting for the CONNECT reply, the `on_open_complete` callback shall be triggered with `IO_OPEN_ERROR`, passing also the `on_open_complete_context` argument as `context`. ]*/</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Open complete called again by underlying IO.&quot;</span>);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            indicate_open_complete_error_and_close(http_proxy_io_instance);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43acbb9fd365c568f3326f7bac234b0c502">HTTP_PROXY_IO_STATE_OPENING_UNDERLYING_IO</a>:</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <span class="keywordflow">switch</span> (open_result)</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <span class="keywordflow">case</span> IO_OPEN_ERROR:</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_078: [ When `on_underlying_io_open_complete` is called with `IO_OPEN_ERROR`, the `on_open_complete` callback shall be triggered with `IO_OPEN_ERROR`, passing also the `on_open_complete_context` argument as `context`. ]*/</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Underlying IO open failed&quot;</span>);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                indicate_open_complete_error_and_close(http_proxy_io_instance);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <span class="keywordflow">case</span> IO_OPEN_CANCELLED:</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_079: [ When `on_underlying_io_open_complete` is called with `IO_OPEN_CANCELLED`, the `on_open_complete` callback shall be triggered with `IO_OPEN_CANCELLED`, passing also the `on_open_complete_context` argument as `context`. ]*/</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Underlying IO open failed&quot;</span>);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7ccb4535cac53d4115424ac65cf34686">http_proxy_io_state</a> = <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43aca240fac37d13797fa4837825933c358">HTTP_PROXY_IO_STATE_CLOSED</a>;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="xio_8c.html#a83d9da875cf42f4f1ce130664a9b3860">xio_close</a>(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a8821d48e1193ff21f84464fc96d4a036">underlying_io</a>, <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7373aa941cb4ee43f8fc3ccdfde9a532">on_io_open_complete</a>(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a41d1d1b03932da3a07c2148e31050bec">on_io_open_complete_context</a>, IO_OPEN_CANCELLED);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            <span class="keywordflow">case</span> IO_OPEN_OK:</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            {</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                <a class="code" href="structSTRING__TAG.html">STRING_HANDLE</a> encoded_auth_string;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_057: [ When `on_underlying_io_open_complete` is called, the `http_proxy_io` shall send the CONNECT request constructed per RFC 2817: ]*/</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7ccb4535cac53d4115424ac65cf34686">http_proxy_io_state</a> = <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43a947ca085f2053e7a78265126593e886e">HTTP_PROXY_IO_STATE_WAITING_FOR_CONNECT_RESPONSE</a>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                <span class="keywordflow">if</span> (http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a037011df7bb17ae0dc1b5c66aae30c9c">username</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                    <span class="keywordtype">char</span>* plain_auth_string_bytes;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                    <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_060: [ - The value of `Proxy-Authorization` shall be the constructed according to RFC 2617. ]*/</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                    <span class="keywordtype">int</span> plain_auth_string_length = (int)(strlen(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a037011df7bb17ae0dc1b5c66aae30c9c">username</a>)+1);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                    <span class="keywordflow">if</span> (http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a24b198d8abbc43d1752be530065edf4a">password</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                    {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                        plain_auth_string_length += (int)strlen(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a24b198d8abbc43d1752be530065edf4a">password</a>);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                    }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                    <span class="keywordflow">if</span> (plain_auth_string_length &lt; 0)</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                    {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_062: [ If any failure is encountered while constructing the request, the `on_open_complete` callback shall be triggered with `IO_OPEN_ERROR`, passing also the `on_open_complete_context` argument as `context`. ]*/</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                        encoded_auth_string = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                        indicate_open_complete_error_and_close(http_proxy_io_instance);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                    }</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                    {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                        plain_auth_string_bytes = (<span class="keywordtype">char</span>*)<a class="code" href="unity__fixture__malloc__overrides_8h.html#acf143577800376dd931c059ecc61ba06">malloc</a>(plain_auth_string_length + 1);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                        <span class="keywordflow">if</span> (plain_auth_string_bytes == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                        {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_062: [ If any failure is encountered while constructing the request, the `on_open_complete` callback shall be triggered with `IO_OPEN_ERROR`, passing also the `on_open_complete_context` argument as `context`. ]*/</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                            encoded_auth_string = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                            indicate_open_complete_error_and_close(http_proxy_io_instance);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                        }</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                        {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_091: [ To receive authorization, the client sends the userid and password, separated by a single colon (&quot;:&quot;) character, within a base64 [7] encoded string in the credentials. ]*/</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_092: [ A client MAY preemptively send the corresponding Authorization header with requests for resources in that space without receipt of another challenge from the server. ]*/</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_093: [ Userids might be case sensitive. ]*/</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                            <span class="keywordflow">if</span> (sprintf(plain_auth_string_bytes, <span class="stringliteral">&quot;%s:%s&quot;</span>, http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a037011df7bb17ae0dc1b5c66aae30c9c">username</a>, (http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a24b198d8abbc43d1752be530065edf4a">password</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ? <span class="stringliteral">&quot;&quot;</span> : http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a24b198d8abbc43d1752be530065edf4a">password</a>) &lt; 0)</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                            {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                                <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_062: [ If any failure is encountered while constructing the request, the `on_open_complete` callback shall be triggered with `IO_OPEN_ERROR`, passing also the `on_open_complete_context` argument as `context`. ]*/</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                                encoded_auth_string = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                                indicate_open_complete_error_and_close(http_proxy_io_instance);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                            }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                            {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                                <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_061: [ Encoding to Base64 shall be done by calling `Base64_Encode_Bytes`. ]*/</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                                encoded_auth_string = <a class="code" href="base64_8c.html#a9e30a20c2abb2bf5e826426c953d12ed">Base64_Encode_Bytes</a>((<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)plain_auth_string_bytes, plain_auth_string_length);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                                <span class="keywordflow">if</span> (encoded_auth_string == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                                {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                                    <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_062: [ If any failure is encountered while constructing the request, the `on_open_complete` callback shall be triggered with `IO_OPEN_ERROR`, passing also the `on_open_complete_context` argument as `context`. ]*/</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                                    <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Cannot Base64 encode auth string&quot;</span>);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                                    indicate_open_complete_error_and_close(http_proxy_io_instance);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                                }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                            }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                            <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(plain_auth_string_bytes);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                        }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                    }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                }</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                    encoded_auth_string = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                }</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                <span class="keywordflow">if</span> ((http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a037011df7bb17ae0dc1b5c66aae30c9c">username</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) &amp;&amp;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                    (encoded_auth_string == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                    <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Cannot create authorization header&quot;</span>);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                    <span class="keywordtype">int</span> connect_request_length;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">char</span>* auth_string_payload;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                    <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_075: [ The Request-URI portion of the Request-Line is always an &#39;authority&#39; as defined by URI Generic Syntax [2], which is to say the host name and port number destination of the requested connection separated by a colon: ]*/</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">char</span> request_format[] = <span class="stringliteral">&quot;CONNECT %s:%d HTTP/1.1\r\nHost:%s:%d%s%s\r\n\r\n&quot;</span>;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">char</span> proxy_basic[] = <span class="stringliteral">&quot;\r\nProxy-authorization: Basic &quot;</span>;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                    <span class="keywordflow">if</span> (http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a037011df7bb17ae0dc1b5c66aae30c9c">username</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                    {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                        auth_string_payload = <a class="code" href="strings_8c.html#a351a84891e778e497c7eafa76bd02cd0">STRING_c_str</a>(encoded_auth_string);</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                    }</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                    {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                        auth_string_payload = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                    }</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                    <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_059: [ - If `username` and `password` have been specified in the arguments passed to `http_proxy_io_create`, then the header `Proxy-Authorization` shall be added to the request. ]*/</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                    connect_request_length = (int)(strlen(request_format)+(strlen(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ac2d566a77dcd7be68758874f5cc09a3b">hostname</a>)*2)+strlen(auth_string_payload)+10);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                    <span class="keywordflow">if</span> (http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a037011df7bb17ae0dc1b5c66aae30c9c">username</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                    {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                        connect_request_length += (int)strlen(proxy_basic);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                    }</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                    </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                    <span class="keywordflow">if</span> (connect_request_length &lt; 0)</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                    {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_062: [ If any failure is encountered while constructing the request, the `on_open_complete` callback shall be triggered with `IO_OPEN_ERROR`, passing also the `on_open_complete_context` argument as `context`. ]*/</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Cannot encode the CONNECT request&quot;</span>);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                        indicate_open_complete_error_and_close(http_proxy_io_instance);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                    }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                    {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                        <span class="keywordtype">char</span>* connect_request = (<span class="keywordtype">char</span>*)<a class="code" href="unity__fixture__malloc__overrides_8h.html#acf143577800376dd931c059ecc61ba06">malloc</a>(connect_request_length + 1);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                        <span class="keywordflow">if</span> (connect_request == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                        {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_062: [ If any failure is encountered while constructing the request, the `on_open_complete` callback shall be triggered with `IO_OPEN_ERROR`, passing also the `on_open_complete_context` argument as `context`. ]*/</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Cannot allocate memory for CONNECT request&quot;</span>);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                            indicate_open_complete_error_and_close(http_proxy_io_instance);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                        }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                        {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_059: [ - If `username` and `password` have been specified in the arguments passed to `http_proxy_io_create`, then the header `Proxy-Authorization` shall be added to the request. ]*/</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                            connect_request_length = sprintf(connect_request, request_format,</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                                http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ac2d566a77dcd7be68758874f5cc09a3b">hostname</a>,</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                                http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a292ad9eb62a49d25a642d4a97355f9ee">port</a>,</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                                http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ac2d566a77dcd7be68758874f5cc09a3b">hostname</a>,</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                                http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a292ad9eb62a49d25a642d4a97355f9ee">port</a>,</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                                (http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a037011df7bb17ae0dc1b5c66aae30c9c">username</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ? proxy_basic : <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                                auth_string_payload);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160; </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                            <span class="keywordflow">if</span> (connect_request_length &lt; 0)</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                            {</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                                <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_062: [ If any failure is encountered while constructing the request, the `on_open_complete` callback shall be triggered with `IO_OPEN_ERROR`, passing also the `on_open_complete_context` argument as `context`. ]*/</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Cannot encode the CONNECT request&quot;</span>);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                                indicate_open_complete_error_and_close(http_proxy_io_instance);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                            }</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                            {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                                <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_063: [ The request shall be sent by calling `xio_send` and passing NULL as `on_send_complete` callback. ]*/</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="xio_8c.html#a8055217d505db388235a00b700aa1562">xio_send</a>(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a8821d48e1193ff21f84464fc96d4a036">underlying_io</a>, connect_request, connect_request_length, <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) != 0)</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                                {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                                    <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_064: [ If `xio_send` fails, the `on_open_complete` callback shall be triggered with `IO_OPEN_ERROR`, passing also the `on_open_complete_context` argument as `context`. ]*/</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                                    <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Could not send CONNECT request&quot;</span>);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                                    indicate_open_complete_error_and_close(http_proxy_io_instance);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                                }</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                            }</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                            <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(connect_request);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                        }</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                    }</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                }</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160; </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                <span class="keywordflow">if</span> (encoded_auth_string != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                    <a class="code" href="strings_8c.html#a14f1a6a01de229149d3810d4d06816a2">STRING_delete</a>(encoded_auth_string);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            }</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            }</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        }</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    }</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;}</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> on_underlying_io_error(<span class="keywordtype">void</span>* context)</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;{</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">if</span> (context == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_088: [ `on_underlying_io_error` called with NULL context shall do nothing. ]*/</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;NULL context in on_underlying_io_error&quot;</span>);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    }</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html">HTTP_PROXY_IO_INSTANCE</a>* http_proxy_io_instance = (<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html">HTTP_PROXY_IO_INSTANCE</a>*)context;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="keywordflow">switch</span> (http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7ccb4535cac53d4115424ac65cf34686">http_proxy_io_state</a>)</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;on_underlying_io_error in invalid state&quot;</span>);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43acbb9fd365c568f3326f7bac234b0c502">HTTP_PROXY_IO_STATE_OPENING_UNDERLYING_IO</a>:</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43a947ca085f2053e7a78265126593e886e">HTTP_PROXY_IO_STATE_WAITING_FOR_CONNECT_RESPONSE</a>:</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_087: [ If the `on_underlying_io_error` callback is called while OPENING, the `on_open_complete` callback shall be triggered with `IO_OPEN_ERROR`, passing also the `on_open_complete_context` argument as `context`. ]*/</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            indicate_open_complete_error_and_close(http_proxy_io_instance);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43a2bbab483a5d912bad03fe2eff4628462">HTTP_PROXY_IO_STATE_OPEN</a>:</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_089: [ If the `on_underlying_io_error` callback is called while the IO is OPEN, the `on_io_error` callback shall be called with the `on_io_error_context` argument as `context`. ]*/</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7ccb4535cac53d4115424ac65cf34686">http_proxy_io_state</a> = <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43a06f57d90fe6a9427492bc9294b12be07">HTTP_PROXY_IO_STATE_ERROR</a>;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#abc19a3996c057365b7a2368352602756">on_io_error</a>(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#afc54f6d61c36537d67da5054302894ab">on_io_error_context</a>);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        }</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;}</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> on_underlying_io_close_complete(<span class="keywordtype">void</span>* context)</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;{</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordflow">if</span> (context == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <span class="comment">/* Cdoes_SRS_HTTP_PROXY_IO_01_084: [ `on_underlying_io_close_complete` called with NULL context shall do nothing. ]*/</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;NULL context in on_underlying_io_open_complete&quot;</span>);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html">HTTP_PROXY_IO_INSTANCE</a>* http_proxy_io_instance = (<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html">HTTP_PROXY_IO_INSTANCE</a>*)context;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160; </div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="keywordflow">switch</span> (http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7ccb4535cac53d4115424ac65cf34686">http_proxy_io_state</a>)</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;on_underlying_io_close_complete called in an invalid state&quot;</span>);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43abf0c18c5dc594d0b8260d4d70f4bd908">HTTP_PROXY_IO_STATE_CLOSING</a>:</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7ccb4535cac53d4115424ac65cf34686">http_proxy_io_state</a> = <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43aca240fac37d13797fa4837825933c358">HTTP_PROXY_IO_STATE_CLOSED</a>;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_086: [ If the `on_io_close_complete` callback passed to `http_proxy_io_close` was NULL, no callback shall be triggered. ]*/</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            <span class="keywordflow">if</span> (http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a8d1c9de4129a6f3207d91d63cf814553">on_io_close_complete</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_083: [ `on_underlying_io_close_complete` while CLOSING shall call the `on_io_close_complete` callback, passing to it the `on_io_close_complete_context` as `context` argument. ]*/</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a8d1c9de4129a6f3207d91d63cf814553">on_io_close_complete</a>(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a658f732ee6d24301bfcf87d60945c701">on_io_close_complete_context</a>);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160; </div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;}</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160; </div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment">/*the following function does the same as sscanf(pos2, &quot;%d&quot;, &amp;sec)*/</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">/*this function only exists because some of platforms do not have sscanf. */</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> ParseStringToDecimal(<span class="keyword">const</span> <span class="keywordtype">char</span> *src, <span class="keywordtype">int</span>* dst)</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;{</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordtype">int</span> result;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordtype">char</span>* next;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160; </div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    (*dst) = strtol(src, &amp;next, 0);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordflow">if</span> ((src == next) || ((((*dst) == <a class="code" href="limits_8h.html#a9ec306f36d50c7375e74f0d1c55a3a67">INT_MAX</a>) || ((*dst) == <a class="code" href="limits_8h.html#a21658776274b3d146c674318b635a334">INT_MIN</a>)) &amp;&amp; (<a class="code" href="newlib_2sys_2errno_8h.html#ab03f640d90fbc5bcb75285d08a0f25ed">errno</a> != 0)))</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    {</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        result = __LINE__;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    }</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        result = 0;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    }</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;}</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160; </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment">/*the following function does the same as sscanf(buf, &quot;HTTP/%*d.%*d %d %*[^\r\n]&quot;, &amp;ret) */</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment">/*this function only exists because some of platforms do not have sscanf. This is not a full implementation; it only works with well-defined HTTP response. */</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> ParseHttpResponse(<span class="keyword">const</span> <span class="keywordtype">char</span>* src, <span class="keywordtype">int</span>* dst)</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;{</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keywordtype">int</span> result;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> HTTPPrefix[] = <span class="stringliteral">&quot;HTTP/&quot;</span>;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keywordtype">bool</span> fail;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* runPrefix;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160; </div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">if</span> ((src == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) || (dst == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    {</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        result = __LINE__;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    }</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    {</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        fail = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        runPrefix = HTTPPrefix;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <span class="keywordflow">while</span> ((*runPrefix) != <span class="charliteral">&#39;\0&#39;</span>)</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        {</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            <span class="keywordflow">if</span> ((*runPrefix) != (*src))</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                fail = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            }</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            src++;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            runPrefix++;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        }</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="keywordflow">if</span> (!fail)</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            <span class="keywordflow">while</span> ((*src) != <span class="charliteral">&#39;.&#39;</span>)</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            {</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                <span class="keywordflow">if</span> ((*src) == <span class="charliteral">&#39;\0&#39;</span>)</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                {</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                    fail = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                }</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                src++;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;            }</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        }</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160; </div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="keywordflow">if</span> (!fail)</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;            <span class="keywordflow">while</span> ((*src) != <span class="charliteral">&#39; &#39;</span>)</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            {</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                <span class="keywordflow">if</span> ((*src) == <span class="charliteral">&#39;\0&#39;</span>)</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                {</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                    fail = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                }</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                src++;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            }</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        }</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160; </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <span class="keywordflow">if</span> (fail)</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            result = __LINE__;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        }</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        {</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            <span class="keywordflow">if</span> (ParseStringToDecimal(src, dst) != 0)</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            {</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                result = __LINE__;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            }</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                result = 0;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            }</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        }</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160; </div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;}</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160; </div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> on_underlying_io_bytes_received(<span class="keywordtype">void</span>* context, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code" href="structbuffer.html">buffer</a>, <span class="keywordtype">size_t</span> <a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a>)</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;{</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">if</span> (context == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    {</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_082: [ `on_underlying_io_bytes_received` called with NULL context shall do nothing. ]*/</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;NULL context in on_underlying_io_bytes_received&quot;</span>);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    }</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    {</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html">HTTP_PROXY_IO_INSTANCE</a>* http_proxy_io_instance = (<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html">HTTP_PROXY_IO_INSTANCE</a>*)context;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160; </div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        <span class="keywordflow">switch</span> (http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7ccb4535cac53d4115424ac65cf34686">http_proxy_io_state</a>)</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43abf0c18c5dc594d0b8260d4d70f4bd908">HTTP_PROXY_IO_STATE_CLOSING</a>:</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Bytes received in invalid state&quot;</span>);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160; </div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43acbb9fd365c568f3326f7bac234b0c502">HTTP_PROXY_IO_STATE_OPENING_UNDERLYING_IO</a>:</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_080: [ If `on_underlying_io_bytes_received` is called while the underlying IO is being opened, the `on_open_complete` callback shall be triggered with `IO_OPEN_ERROR`, passing also the `on_open_complete_context` argument as `context`. ]*/</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Bytes received while opening underlying IO&quot;</span>);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            indicate_open_complete_error_and_close(http_proxy_io_instance);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160; </div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43a947ca085f2053e7a78265126593e886e">HTTP_PROXY_IO_STATE_WAITING_FOR_CONNECT_RESPONSE</a>:</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        {</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_065: [ When bytes are received and the response to the CONNECT request was not yet received, the bytes shall be accumulated until a double new-line is detected. ]*/</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* new_receive_buffer = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)<a class="code" href="unity__fixture__malloc__overrides_8h.html#a1b739878adcdb46fb5d209af7ce79628">realloc</a>(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ab6cdda13b787b3fc0cf4038f1e633f75">receive_buffer</a>, http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#af0d45267ae26b56b88254712acad94be">receive_buffer_size</a> + <a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a> + 1);</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            <span class="keywordflow">if</span> (new_receive_buffer == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            {</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_067: [ If allocating memory for the buffered bytes fails, the `on_open_complete` callback shall be triggered with `IO_OPEN_ERROR`, passing also the `on_open_complete_context` argument as `context`. ]*/</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Cannot allocate memory for received data&quot;</span>);</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                indicate_open_complete_error_and_close(http_proxy_io_instance);</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            }</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            {</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ab6cdda13b787b3fc0cf4038f1e633f75">receive_buffer</a> = new_receive_buffer;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                memcpy(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ab6cdda13b787b3fc0cf4038f1e633f75">receive_buffer</a> + http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#af0d45267ae26b56b88254712acad94be">receive_buffer_size</a>, <a class="code" href="structbuffer.html">buffer</a>, <a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a>);</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#af0d45267ae26b56b88254712acad94be">receive_buffer_size</a> += <a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a>;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            }</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            <span class="keywordflow">if</span> (http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#af0d45267ae26b56b88254712acad94be">receive_buffer_size</a> &gt;= 4)</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">char</span>* request_end_ptr;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ab6cdda13b787b3fc0cf4038f1e633f75">receive_buffer</a>[http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#af0d45267ae26b56b88254712acad94be">receive_buffer_size</a>] = 0;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160; </div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_066: [ When a double new-line is detected the response shall be parsed in order to extract the status code. ]*/</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                <span class="keywordflow">if</span> ((http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#af0d45267ae26b56b88254712acad94be">receive_buffer_size</a> &gt;= 4) &amp;&amp;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                    ((request_end_ptr = strstr((<span class="keyword">const</span> <span class="keywordtype">char</span>*)http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ab6cdda13b787b3fc0cf4038f1e633f75">receive_buffer</a>, <span class="stringliteral">&quot;\r\n\r\n&quot;</span>)) != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                    <span class="keywordtype">int</span> status_code;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160; </div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                    <span class="comment">/* This part should really be done with the HTTPAPI, but that has to be done as a separate step</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment">                    as the HTTPAPI has to expose somehow the underlying IO and currently this would be a too big of a change. */</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160; </div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                    <span class="keywordflow">if</span> (ParseHttpResponse((<span class="keyword">const</span> <span class="keywordtype">char</span>*)http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ab6cdda13b787b3fc0cf4038f1e633f75">receive_buffer</a>, &amp;status_code) != 0)</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                    {</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_068: [ If parsing the CONNECT response fails, the `on_open_complete` callback shall be triggered with `IO_OPEN_ERROR`, passing also the `on_open_complete_context` argument as `context`. ]*/</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Cannot decode HTTP response&quot;</span>);</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                        indicate_open_complete_error_and_close(http_proxy_io_instance);</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                    }</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                    <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_069: [ Any successful (2xx) response to a CONNECT request indicates that the proxy has established a connection to the requested host and port, and has switched to tunneling the current connection to that server connection. ]*/</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                    <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_090: [ Any successful (2xx) response to a CONNECT request indicates that the proxy has established a connection to the requested host and port, and has switched to tunneling the current connection to that server connection. ]*/</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((status_code &lt; 200) || (status_code &gt; 299))</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                    {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_071: [ If the status code is not successful, the `on_open_complete` callback shall be triggered with `IO_OPEN_ERROR`, passing also the `on_open_complete_context` argument as `context`. ]*/</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Bad status (%d) received in CONNECT response&quot;</span>, status_code);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                        indicate_open_complete_error_and_close(http_proxy_io_instance);</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                    }</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                    {</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                        <span class="keywordtype">size_t</span> length_remaining = http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ab6cdda13b787b3fc0cf4038f1e633f75">receive_buffer</a> + http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#af0d45267ae26b56b88254712acad94be">receive_buffer_size</a> - ((<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)request_end_ptr + 4);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160; </div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_073: [ Once a success status code was parsed, the IO shall be OPEN. ]*/</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                        http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7ccb4535cac53d4115424ac65cf34686">http_proxy_io_state</a> = <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43a2bbab483a5d912bad03fe2eff4628462">HTTP_PROXY_IO_STATE_OPEN</a>;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_070: [ When a success status code is parsed, the `on_open_complete` callback shall be triggered with `IO_OPEN_OK`, passing also the `on_open_complete_context` argument as `context`. ]*/</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                        http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7373aa941cb4ee43f8fc3ccdfde9a532">on_io_open_complete</a>(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a41d1d1b03932da3a07c2148e31050bec">on_io_open_complete_context</a>, IO_OPEN_OK);</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160; </div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                        <span class="keywordflow">if</span> (length_remaining &gt; 0)</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                        {</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_072: [ Any bytes that are extra (not consumed by the CONNECT response), shall be indicated as received by calling the `on_bytes_received` callback and passing the `on_bytes_received_context` as context argument. ]*/</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                            http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#abf6cf5baa051d4b312384df8a543d3b1">on_bytes_received</a>(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ae8aaf994df87006a8a18c840ce9b4092">on_bytes_received_context</a>, (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)request_end_ptr + 4, length_remaining);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                        }</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                    }</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                }</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            }</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        }</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43a2bbab483a5d912bad03fe2eff4628462">HTTP_PROXY_IO_STATE_OPEN</a>:</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_074: [ If `on_underlying_io_bytes_received` is called while OPEN, all bytes shall be indicated as received by calling the `on_bytes_received` callback and passing the `on_bytes_received_context` as context argument. ]*/</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;            http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#abf6cf5baa051d4b312384df8a543d3b1">on_bytes_received</a>(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ae8aaf994df87006a8a18c840ce9b4092">on_bytes_received_context</a>, <a class="code" href="structbuffer.html">buffer</a>, <a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a>);</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        }</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    }</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;}</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160; </div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> http_proxy_io_open(<a class="code" href="xio_8h.html#aa71532538adc618acbebd20396c0f83f">CONCRETE_IO_HANDLE</a> http_proxy_io, <a class="code" href="xio_8h.html#a3acca89b8b5ff3d42b3eaf0b3dbcf7ca">ON_IO_OPEN_COMPLETE</a> on_io_open_complete, <span class="keywordtype">void</span>* on_io_open_complete_context, <a class="code" href="xio_8h.html#a13198b46d201d067f60a82c1bf0e5780">ON_BYTES_RECEIVED</a> on_bytes_received, <span class="keywordtype">void</span>* on_bytes_received_context, <a class="code" href="xio_8h.html#a2761e39867e9372423f77921fc5fd26d">ON_IO_ERROR</a> on_io_error, <span class="keywordtype">void</span>* on_io_error_context)</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;{</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordtype">int</span> result;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160; </div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_051: [ The arguments `on_io_open_complete_context`, `on_bytes_received_context` and `on_io_error_context` shall be allowed to be NULL. ]*/</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_018: [ If any of the arguments `http_proxy_io`, `on_io_open_complete`, `on_bytes_received` or `on_io_error` are NULL then `http_proxy_io_open` shall return a non-zero value. ]*/</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="keywordflow">if</span> ((http_proxy_io == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ||</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        (on_io_open_complete == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ||</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        (on_bytes_received == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ||</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        (on_io_error == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Bad arguments: http_proxy_io = %p, on_io_open_complete = %p, on_bytes_received = %p, on_io_error_context = %p.&quot;</span>,</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            http_proxy_io,</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;            on_io_open_complete,</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;            on_bytes_received,</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;            on_io_error);</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        result = __LINE__;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    }</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html">HTTP_PROXY_IO_INSTANCE</a>* http_proxy_io_instance = (<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html">HTTP_PROXY_IO_INSTANCE</a>*)http_proxy_io;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160; </div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <span class="keywordflow">if</span> (http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7ccb4535cac53d4115424ac65cf34686">http_proxy_io_state</a> != <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43aca240fac37d13797fa4837825933c358">HTTP_PROXY_IO_STATE_CLOSED</a>)</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        {</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Invalid tlsio_state. Expected state is HTTP_PROXY_IO_STATE_CLOSED.&quot;</span>);</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;            result = __LINE__;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        }</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        {</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#abf6cf5baa051d4b312384df8a543d3b1">on_bytes_received</a> = on_bytes_received;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;            http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ae8aaf994df87006a8a18c840ce9b4092">on_bytes_received_context</a> = on_bytes_received_context;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160; </div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;            http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#abc19a3996c057365b7a2368352602756">on_io_error</a> = on_io_error;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;            http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#afc54f6d61c36537d67da5054302894ab">on_io_error_context</a> = on_io_error_context;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160; </div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;            http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7373aa941cb4ee43f8fc3ccdfde9a532">on_io_open_complete</a> = on_io_open_complete;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;            http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a41d1d1b03932da3a07c2148e31050bec">on_io_open_complete_context</a> = on_io_open_complete_context;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160; </div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7ccb4535cac53d4115424ac65cf34686">http_proxy_io_state</a> = <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43acbb9fd365c568f3326f7bac234b0c502">HTTP_PROXY_IO_STATE_OPENING_UNDERLYING_IO</a>;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160; </div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_019: [ `http_proxy_io_open` shall open the underlying IO by calling `xio_open` on the underlying IO handle created in `http_proxy_io_create`, while passing to it the callbacks `on_underlying_io_open_complete`, `on_underlying_io_bytes_received` and `on_underlying_io_error`. ]*/</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="xio_8c.html#aff8b447060a2e4671fdc6ad93c5654c2">xio_open</a>(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a8821d48e1193ff21f84464fc96d4a036">underlying_io</a>, on_underlying_io_open_complete, http_proxy_io_instance, on_underlying_io_bytes_received, http_proxy_io_instance, on_underlying_io_error, http_proxy_io_instance) != 0)</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;            {</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_020: [ If `xio_open` fails, then `http_proxy_io_open` shall return a non-zero value. ]*/</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7ccb4535cac53d4115424ac65cf34686">http_proxy_io_state</a> = <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43aca240fac37d13797fa4837825933c358">HTTP_PROXY_IO_STATE_CLOSED</a>;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Cannot open the underlying IO.&quot;</span>);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                result = __LINE__;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;            }</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            {</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_017: [ `http_proxy_io_open` shall open the HTTP proxy IO and on success it shall return 0. ]*/</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                result = 0;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;            }</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        }</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    }</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160; </div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;}</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160; </div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> http_proxy_io_close(<a class="code" href="xio_8h.html#aa71532538adc618acbebd20396c0f83f">CONCRETE_IO_HANDLE</a> http_proxy_io, <a class="code" href="xio_8h.html#afdff4c121fba1278335064c5686cc419">ON_IO_CLOSE_COMPLETE</a> on_io_close_complete, <span class="keywordtype">void</span>* on_io_close_complete_context)</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;{</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="keywordtype">int</span> result = 0;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160; </div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_052: [ `on_io_close_complete_context` shall be allowed to be NULL. ]*/</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_028: [ `on_io_close_complete` shall be allowed to be NULL. ]*/</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="keywordflow">if</span> (http_proxy_io == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    {</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_023: [ If the argument `http_proxy_io` is NULL, `http_proxy_io_close` shall fail and return a non-zero value. ]*/</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        result = __LINE__;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;NULL http_proxy_io.&quot;</span>);</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    }</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    {</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html">HTTP_PROXY_IO_INSTANCE</a>* http_proxy_io_instance = (<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html">HTTP_PROXY_IO_INSTANCE</a>*)http_proxy_io;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160; </div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_027: [ If `http_proxy_io_close` is called when not open, `http_proxy_io_close` shall fail and return a non-zero value. ]*/</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <span class="keywordflow">if</span> ((http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7ccb4535cac53d4115424ac65cf34686">http_proxy_io_state</a> == <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43aca240fac37d13797fa4837825933c358">HTTP_PROXY_IO_STATE_CLOSED</a>) ||</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_054: [ `http_proxy_io_close` while OPENING shall fail and return a non-zero value. ]*/</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            (http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7ccb4535cac53d4115424ac65cf34686">http_proxy_io_state</a> == <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43abf0c18c5dc594d0b8260d4d70f4bd908">HTTP_PROXY_IO_STATE_CLOSING</a>))</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        {</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            result = __LINE__;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Invalid tlsio_state. Expected state is HTTP_PROXY_IO_STATE_OPEN.&quot;</span>);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        }</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7ccb4535cac53d4115424ac65cf34686">http_proxy_io_state</a> == <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43acbb9fd365c568f3326f7bac234b0c502">HTTP_PROXY_IO_STATE_OPENING_UNDERLYING_IO</a>) ||</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            (http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7ccb4535cac53d4115424ac65cf34686">http_proxy_io_state</a> == <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43a947ca085f2053e7a78265126593e886e">HTTP_PROXY_IO_STATE_WAITING_FOR_CONNECT_RESPONSE</a>))</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        {</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_053: [ `http_proxy_io_close` while OPENING shall trigger the `on_io_open_complete` callback with `IO_OPEN_CANCELLED`. ]*/</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7ccb4535cac53d4115424ac65cf34686">http_proxy_io_state</a> = <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43aca240fac37d13797fa4837825933c358">HTTP_PROXY_IO_STATE_CLOSED</a>;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;            (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="xio_8c.html#a83d9da875cf42f4f1ce130664a9b3860">xio_close</a>(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a8821d48e1193ff21f84464fc96d4a036">underlying_io</a>, <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7373aa941cb4ee43f8fc3ccdfde9a532">on_io_open_complete</a>(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a41d1d1b03932da3a07c2148e31050bec">on_io_open_complete_context</a>, IO_OPEN_CANCELLED);</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160; </div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_022: [ `http_proxy_io_close` shall close the HTTP proxy IO and on success it shall return 0. ]*/</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;            result = 0;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        }</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        {</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            <a class="code" href="http__proxy__io_8c.html#a3979563d2a58e132f5998f6045f7c566">HTTP_PROXY_IO_STATE</a> previous_state = http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7ccb4535cac53d4115424ac65cf34686">http_proxy_io_state</a>;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160; </div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7ccb4535cac53d4115424ac65cf34686">http_proxy_io_state</a> = <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43abf0c18c5dc594d0b8260d4d70f4bd908">HTTP_PROXY_IO_STATE_CLOSING</a>;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160; </div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_026: [ The `on_io_close_complete` and `on_io_close_complete_context` arguments shall be saved for later use. ]*/</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;            http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a8d1c9de4129a6f3207d91d63cf814553">on_io_close_complete</a> = on_io_close_complete;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;            http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a658f732ee6d24301bfcf87d60945c701">on_io_close_complete_context</a> = on_io_close_complete_context;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160; </div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_024: [ `http_proxy_io_close` shall close the underlying IO by calling `xio_close` on the IO handle create in `http_proxy_io_create`, while passing to it the `on_underlying_io_close_complete` callback. ]*/</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="xio_8c.html#a83d9da875cf42f4f1ce130664a9b3860">xio_close</a>(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a8821d48e1193ff21f84464fc96d4a036">underlying_io</a>, on_underlying_io_close_complete, http_proxy_io_instance) != 0)</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;            {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_025: [ If `xio_close` fails, `http_proxy_io_close` shall fail and return a non-zero value. ]*/</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                result = __LINE__;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7ccb4535cac53d4115424ac65cf34686">http_proxy_io_state</a> = previous_state;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Cannot close underlying IO.&quot;</span>);</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;            }</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;            {</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_022: [ `http_proxy_io_close` shall close the HTTP proxy IO and on success it shall return 0. ]*/</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                result = 0;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;            }</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        }</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    }</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160; </div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;}</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160; </div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> http_proxy_io_send(<a class="code" href="xio_8h.html#aa71532538adc618acbebd20396c0f83f">CONCRETE_IO_HANDLE</a> http_proxy_io, <span class="keyword">const</span> <span class="keywordtype">void</span>* <a class="code" href="structbuffer.html">buffer</a>, <span class="keywordtype">size_t</span> <a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a>, <a class="code" href="xio_8h.html#a9275b2e616c2abadf629ca3d94d7871f">ON_SEND_COMPLETE</a> on_send_complete, <span class="keywordtype">void</span>* on_send_complete_context)</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;{</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="keywordtype">int</span> result;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160; </div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_032: [ `on_send_complete` shall be allowed to be NULL. ]*/</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_030: [ If any of the arguments `http_proxy_io` or `buffer` is NULL, `http_proxy_io_send` shall fail and return a non-zero value. ]*/</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="keywordflow">if</span> ((http_proxy_io == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ||</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        (<a class="code" href="structbuffer.html">buffer</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ||</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_031: [ If `size` is 0, `http_proxy_io_send` shall fail and return a non-zero value. ]*/</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        (<a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a> == 0))</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    {</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        result = __LINE__;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Bad arguments: http_proxy_io = %p, buffer = %p.&quot;</span>,</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;            http_proxy_io, <a class="code" href="structbuffer.html">buffer</a>);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    }</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    {</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html">HTTP_PROXY_IO_INSTANCE</a>* http_proxy_io_instance = (<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html">HTTP_PROXY_IO_INSTANCE</a>*)http_proxy_io;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160; </div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_034: [ If `http_proxy_io_send` is called when the IO is not open, `http_proxy_io_send` shall fail and return a non-zero value. ]*/</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_035: [ If the IO is in an error state (an error was reported through the `on_io_error` callback), `http_proxy_io_send` shall fail and return a non-zero value. ]*/</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        <span class="keywordflow">if</span> (http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7ccb4535cac53d4115424ac65cf34686">http_proxy_io_state</a> != <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43a2bbab483a5d912bad03fe2eff4628462">HTTP_PROXY_IO_STATE_OPEN</a>)</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        {</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;            result = __LINE__;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Invalid HTTP proxy IO state. Expected state is HTTP_PROXY_IO_STATE_OPEN.&quot;</span>);</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        }</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        {</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_033: [ `http_proxy_io_send` shall send the bytes by calling `xio_send` on the underlying IO created in `http_proxy_io_create` and passing `buffer` and `size` as arguments. ]*/</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="xio_8c.html#a8055217d505db388235a00b700aa1562">xio_send</a>(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a8821d48e1193ff21f84464fc96d4a036">underlying_io</a>, <a class="code" href="structbuffer.html">buffer</a>, <a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a>, on_send_complete, on_send_complete_context) != 0)</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;            {</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_055: [ If `xio_send` fails, `http_proxy_io_send` shall fail and return a non-zero value. ]*/</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                result = __LINE__;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Underlying xio_send failed.&quot;</span>);</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            }</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;            {</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_029: [ `http_proxy_io_send` shall send the `size` bytes pointed to by `buffer` and on success it shall return 0. ]*/</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                result = 0;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;            }</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        }</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    }</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160; </div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;}</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160; </div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> http_proxy_io_dowork(<a class="code" href="xio_8h.html#aa71532538adc618acbebd20396c0f83f">CONCRETE_IO_HANDLE</a> http_proxy_io)</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;{</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <span class="keywordflow">if</span> (http_proxy_io == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    {</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_038: [ If the `http_proxy_io` argument is NULL, `http_proxy_io_dowork` shall do nothing. ]*/</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;NULL http_proxy_io.&quot;</span>);</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    }</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    {</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html">HTTP_PROXY_IO_INSTANCE</a>* http_proxy_io_instance = (<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html">HTTP_PROXY_IO_INSTANCE</a>*)http_proxy_io;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160; </div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        <span class="keywordflow">if</span> (http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7ccb4535cac53d4115424ac65cf34686">http_proxy_io_state</a> != <a class="code" href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43aca240fac37d13797fa4837825933c358">HTTP_PROXY_IO_STATE_CLOSED</a>)</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        {</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_037: [ `http_proxy_io_dowork` shall call `xio_dowork` on the underlying IO created in `http_proxy_io_create`. ]*/</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;            <a class="code" href="xio_8c.html#ad1678d0cc44c83eb2bdc0eee0be12925">xio_dowork</a>(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a8821d48e1193ff21f84464fc96d4a036">underlying_io</a>);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        }</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    }</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;}</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160; </div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> http_proxy_io_set_option(<a class="code" href="xio_8h.html#aa71532538adc618acbebd20396c0f83f">CONCRETE_IO_HANDLE</a> http_proxy_io, <span class="keyword">const</span> <span class="keywordtype">char</span>* option_name, <span class="keyword">const</span> <span class="keywordtype">void</span>* <a class="code" href="cJSON__Utils_8h.html#a0dff3c76a075649fa412b1c429ffe382">value</a>)</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;{</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="keywordtype">int</span> result;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160; </div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="keywordflow">if</span> ((http_proxy_io == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) || (option_name == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    {</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_040: [ If any of the arguments `http_proxy_io` or `option_name` is NULL, `http_proxy_io_set_option` shall return a non-zero value. ]*/</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Bad arguments: http_proxy_io = %p, option_name = %p&quot;</span>,</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;            http_proxy_io, option_name);</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        result = __LINE__;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    }</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    {</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html">HTTP_PROXY_IO_INSTANCE</a>* http_proxy_io_instance = (<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html">HTTP_PROXY_IO_INSTANCE</a>*)http_proxy_io;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160; </div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_045: [ None. ]*/</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160; </div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_043: [ If the `option_name` argument indicates an option that is not handled by `http_proxy_io_set_option`, then `xio_setoption` shall be called on the underlying IO created in `http_proxy_io_create`, passing the option name and value to it. ]*/</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_056: [ The `value` argument shall be allowed to be NULL. ]*/</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="xio_8c.html#ab842aa9de72d9359ac059be7428c59d5">xio_setoption</a>(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a8821d48e1193ff21f84464fc96d4a036">underlying_io</a>, option_name, <a class="code" href="cJSON__Utils_8h.html#a0dff3c76a075649fa412b1c429ffe382">value</a>) != 0)</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_044: [ if `xio_setoption` fails, `http_proxy_io_set_option` shall return a non-zero value. ]*/</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Unrecognized option&quot;</span>);</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;            result = __LINE__;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        }</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        {</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_042: [ If the option was handled by `http_proxy_io_set_option` or the underlying IO, then `http_proxy_io_set_option` shall return 0. ]*/</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;            result = 0;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        }</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    }</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160; </div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;}</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160; </div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="keyword">static</span> <a class="code" href="structOPTIONHANDLER__HANDLE__DATA__TAG.html">OPTIONHANDLER_HANDLE</a> http_proxy_io_retrieve_options(<a class="code" href="xio_8h.html#aa71532538adc618acbebd20396c0f83f">CONCRETE_IO_HANDLE</a> http_proxy_io)</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;{</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <a class="code" href="structOPTIONHANDLER__HANDLE__DATA__TAG.html">OPTIONHANDLER_HANDLE</a> result;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160; </div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="keywordflow">if</span> (http_proxy_io == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    {</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_047: [ If the parameter `http_proxy_io` is NULL then `http_proxy_io_retrieve_options` shall fail and return NULL. ]*/</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;invalid parameter detected: CONCRETE_IO_HANDLE handle=%p&quot;</span>, http_proxy_io);</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        result = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    }</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    {</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        <a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html">HTTP_PROXY_IO_INSTANCE</a>* http_proxy_io_instance = (<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html">HTTP_PROXY_IO_INSTANCE</a>*)http_proxy_io;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160; </div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_046: [ `http_proxy_io_retrieve_options` shall return an `OPTIONHANDLER_HANDLE` obtained by calling `xio_retrieveoptions` on the underlying IO created in `http_proxy_io_create`. ]*/</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        result = <a class="code" href="xio_8c.html#a42cdddeb35bf5a6d45a4a730b1b9e4a5">xio_retrieveoptions</a>(http_proxy_io_instance-&gt;<a class="code" href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a8821d48e1193ff21f84464fc96d4a036">underlying_io</a>);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        <span class="keywordflow">if</span> (result == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        {</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;            <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_048: [ If `xio_retrieveoptions` fails, `http_proxy_io_retrieve_options` shall return NULL. ]*/</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;unable to create option handler&quot;</span>);</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        }</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    }</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;}</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160; </div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structIO__INTERFACE__DESCRIPTION__TAG.html">IO_INTERFACE_DESCRIPTION</a> http_proxy_io_interface_description =</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;{</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    http_proxy_io_retrieve_options,</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    http_proxy_io_create,</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    http_proxy_io_destroy,</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    http_proxy_io_open,</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    http_proxy_io_close,</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    http_proxy_io_send,</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    http_proxy_io_dowork,</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    http_proxy_io_set_option</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;};</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160; </div>
<div class="line"><a name="l00955"></a><span class="lineno"><a class="line" href="http__proxy__io_8c.html#a0163ea7e6e7be548afa175f4a76b0728">  955</a></span>&#160;<span class="keyword">const</span> <a class="code" href="structIO__INTERFACE__DESCRIPTION__TAG.html">IO_INTERFACE_DESCRIPTION</a>* <a class="code" href="http__proxy__io_8c.html#a0163ea7e6e7be548afa175f4a76b0728">http_proxy_io_get_interface_description</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;{</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <span class="comment">/* Codes_SRS_HTTP_PROXY_IO_01_049: [ `http_proxy_io_get_interface_description` shall return a pointer to an `IO_INTERFACE_DESCRIPTION` structure that contains pointers to the functions: `http_proxy_io_retrieve_options`, `http_proxy_io_retrieve_create`, `http_proxy_io_destroy`, `http_proxy_io_open`, `http_proxy_io_close`, `http_proxy_io_send` and `http_proxy_io_dowork`. ]*/</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <span class="keywordflow">return</span> &amp;http_proxy_io_interface_description;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="astructSOCKETIO__CONFIG__TAG_html_af72914d65fcb834a92d8fdaa54961840"><div class="ttname"><a href="structSOCKETIO__CONFIG__TAG.html#af72914d65fcb834a92d8fdaa54961840">SOCKETIO_CONFIG_TAG::port</a></div><div class="ttdeci">int port</div><div class="ttdef"><b>Definition:</b> <a href="socketio_8h_source.html#l00021">socketio.h:21</a></div></div>
<div class="ttc" id="astructHTTP__PROXY__IO__CONFIG__TAG_html_afae945b5ee4fdded80b1602a692382d1"><div class="ttname"><a href="structHTTP__PROXY__IO__CONFIG__TAG.html#afae945b5ee4fdded80b1602a692382d1">HTTP_PROXY_IO_CONFIG_TAG::proxy_hostname</a></div><div class="ttdeci">const char * proxy_hostname</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8h_source.html#l00018">http_proxy_io.h:18</a></div></div>
<div class="ttc" id="ahttp__proxy__io_8h_html"><div class="ttname"><a href="http__proxy__io_8h.html">http_proxy_io.h</a></div></div>
<div class="ttc" id="astructSTRING__TAG_html"><div class="ttname"><a href="structSTRING__TAG.html">STRING_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="strings_8c_source.html#l00024">strings.c:25</a></div></div>
<div class="ttc" id="astructSOCKETIO__CONFIG__TAG_html"><div class="ttname"><a href="structSOCKETIO__CONFIG__TAG.html">SOCKETIO_CONFIG_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="socketio_8h_source.html#l00018">socketio.h:19</a></div></div>
<div class="ttc" id="axio_8h_html"><div class="ttname"><a href="xio_8h.html">xio.h</a></div></div>
<div class="ttc" id="ahttp__proxy__io_8c_html_a2a401ffb43a26861e755104d0dc9da43a947ca085f2053e7a78265126593e886e"><div class="ttname"><a href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43a947ca085f2053e7a78265126593e886e">HTTP_PROXY_IO_STATE_WAITING_FOR_CONNECT_RESPONSE</a></div><div class="ttdeci">@ HTTP_PROXY_IO_STATE_WAITING_FOR_CONNECT_RESPONSE</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8c_source.html#l00021">http_proxy_io.c:21</a></div></div>
<div class="ttc" id="alimits_8h_html_a9ec306f36d50c7375e74f0d1c55a3a67"><div class="ttname"><a href="limits_8h.html#a9ec306f36d50c7375e74f0d1c55a3a67">INT_MAX</a></div><div class="ttdeci">#define INT_MAX</div><div class="ttdef"><b>Definition:</b> <a href="limits_8h_source.html#l00072">limits.h:71</a></div></div>
<div class="ttc" id="astructHTTP__PROXY__IO__INSTANCE__TAG_html_a7373aa941cb4ee43f8fc3ccdfde9a532"><div class="ttname"><a href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7373aa941cb4ee43f8fc3ccdfde9a532">HTTP_PROXY_IO_INSTANCE_TAG::on_io_open_complete</a></div><div class="ttdeci">ON_IO_OPEN_COMPLETE on_io_open_complete</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8c_source.html#l00034">http_proxy_io.c:34</a></div></div>
<div class="ttc" id="astructHTTP__PROXY__IO__CONFIG__TAG_html_a26c66516aa6b3e6282bf6a1a856e53fd"><div class="ttname"><a href="structHTTP__PROXY__IO__CONFIG__TAG.html#a26c66516aa6b3e6282bf6a1a856e53fd">HTTP_PROXY_IO_CONFIG_TAG::password</a></div><div class="ttdeci">const char * password</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8h_source.html#l00021">http_proxy_io.h:21</a></div></div>
<div class="ttc" id="astructHTTP__PROXY__IO__INSTANCE__TAG_html_a7ccb4535cac53d4115424ac65cf34686"><div class="ttname"><a href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a7ccb4535cac53d4115424ac65cf34686">HTTP_PROXY_IO_INSTANCE_TAG::http_proxy_io_state</a></div><div class="ttdeci">HTTP_PROXY_IO_STATE http_proxy_io_state</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8c_source.html#l00029">http_proxy_io.c:29</a></div></div>
<div class="ttc" id="astructHTTP__PROXY__IO__CONFIG__TAG_html"><div class="ttname"><a href="structHTTP__PROXY__IO__CONFIG__TAG.html">HTTP_PROXY_IO_CONFIG_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8h_source.html#l00014">http_proxy_io.h:15</a></div></div>
<div class="ttc" id="alimits_8h_html_a21658776274b3d146c674318b635a334"><div class="ttname"><a href="limits_8h.html#a21658776274b3d146c674318b635a334">INT_MIN</a></div><div class="ttdeci">#define INT_MIN</div><div class="ttdef"><b>Definition:</b> <a href="limits_8h_source.html#l00070">limits.h:69</a></div></div>
<div class="ttc" id="acrt__abstractions_8c_html_a867b1509b0b0a16b1bae1d829679c484"><div class="ttname"><a href="crt__abstractions_8c.html#a867b1509b0b0a16b1bae1d829679c484">mallocAndStrcpy_s</a></div><div class="ttdeci">int mallocAndStrcpy_s(char **destination, const char *source)</div><div class="ttdef"><b>Definition:</b> <a href="crt__abstractions_8c_source.html#l00681">crt_abstractions.c:681</a></div></div>
<div class="ttc" id="ahttp__proxy__io_8c_html_a3979563d2a58e132f5998f6045f7c566"><div class="ttname"><a href="http__proxy__io_8c.html#a3979563d2a58e132f5998f6045f7c566">HTTP_PROXY_IO_STATE</a></div><div class="ttdeci">enum HTTP_PROXY_IO_STATE_TAG HTTP_PROXY_IO_STATE</div></div>
<div class="ttc" id="axio_8h_html_a9275b2e616c2abadf629ca3d94d7871f"><div class="ttname"><a href="xio_8h.html#a9275b2e616c2abadf629ca3d94d7871f">ON_SEND_COMPLETE</a></div><div class="ttdeci">void(* ON_SEND_COMPLETE)(void *context, IO_SEND_RESULT send_result)</div><div class="ttdef"><b>Definition:</b> <a href="xio_8h_source.html#l00037">xio.h:37</a></div></div>
<div class="ttc" id="aRPSL_8txt_html_ae227cfd33a5880ffce840d383c2fbff3"><div class="ttname"><a href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a></div><div class="ttdeci">Conditions &amp;Restrictions Subject to the terms and conditions of this Licensor hereby grants effective on the date You accept this a royalty free</div><div class="ttdef"><b>Definition:</b> <a href="RPSL_8txt_source.html#l00105">RPSL.txt:105</a></div></div>
<div class="ttc" id="astructHTTP__PROXY__IO__INSTANCE__TAG_html_ae8aaf994df87006a8a18c840ce9b4092"><div class="ttname"><a href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ae8aaf994df87006a8a18c840ce9b4092">HTTP_PROXY_IO_INSTANCE_TAG::on_bytes_received_context</a></div><div class="ttdeci">void * on_bytes_received_context</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8c_source.html#l00031">http_proxy_io.c:31</a></div></div>
<div class="ttc" id="asocketio_8h_html"><div class="ttname"><a href="socketio_8h.html">socketio.h</a></div></div>
<div class="ttc" id="astructHTTP__PROXY__IO__INSTANCE__TAG_html_a8821d48e1193ff21f84464fc96d4a036"><div class="ttname"><a href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a8821d48e1193ff21f84464fc96d4a036">HTTP_PROXY_IO_INSTANCE_TAG::underlying_io</a></div><div class="ttdeci">XIO_HANDLE underlying_io</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8c_source.html#l00044">http_proxy_io.c:44</a></div></div>
<div class="ttc" id="astructHTTP__PROXY__IO__INSTANCE__TAG_html_a037011df7bb17ae0dc1b5c66aae30c9c"><div class="ttname"><a href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a037011df7bb17ae0dc1b5c66aae30c9c">HTTP_PROXY_IO_INSTANCE_TAG::username</a></div><div class="ttdeci">char * username</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8c_source.html#l00042">http_proxy_io.c:42</a></div></div>
<div class="ttc" id="ahttp__proxy__io_8c_html_a2a401ffb43a26861e755104d0dc9da43a06f57d90fe6a9427492bc9294b12be07"><div class="ttname"><a href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43a06f57d90fe6a9427492bc9294b12be07">HTTP_PROXY_IO_STATE_ERROR</a></div><div class="ttdeci">@ HTTP_PROXY_IO_STATE_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8c_source.html#l00025">http_proxy_io.c:24</a></div></div>
<div class="ttc" id="astructHTTP__PROXY__IO__CONFIG__TAG_html_ac3c7bf9d2248763d16105545372d1d34"><div class="ttname"><a href="structHTTP__PROXY__IO__CONFIG__TAG.html#ac3c7bf9d2248763d16105545372d1d34">HTTP_PROXY_IO_CONFIG_TAG::hostname</a></div><div class="ttdeci">const char * hostname</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8h_source.html#l00016">http_proxy_io.h:16</a></div></div>
<div class="ttc" id="astructHTTP__PROXY__IO__CONFIG__TAG_html_a1488039e98bd63f487e95da388e897df"><div class="ttname"><a href="structHTTP__PROXY__IO__CONFIG__TAG.html#a1488039e98bd63f487e95da388e897df">HTTP_PROXY_IO_CONFIG_TAG::proxy_port</a></div><div class="ttdeci">int proxy_port</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8h_source.html#l00019">http_proxy_io.h:19</a></div></div>
<div class="ttc" id="alibraries_2AzureIoT_2src_2az__iot_2c-utility_2inc_2azure__c__shared__utility_2base64_8h_html"><div class="ttname"><a href="libraries_2AzureIoT_2src_2az__iot_2c-utility_2inc_2azure__c__shared__utility_2base64_8h.html">base64.h</a></div><div class="ttdoc">Prototypes for functions related to encoding/decoding a buffer using standard base64 encoding.</div></div>
<div class="ttc" id="ahttp__proxy__io_8c_html_a2a401ffb43a26861e755104d0dc9da43acbb9fd365c568f3326f7bac234b0c502"><div class="ttname"><a href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43acbb9fd365c568f3326f7bac234b0c502">HTTP_PROXY_IO_STATE_OPENING_UNDERLYING_IO</a></div><div class="ttdeci">@ HTTP_PROXY_IO_STATE_OPENING_UNDERLYING_IO</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8c_source.html#l00020">http_proxy_io.c:20</a></div></div>
<div class="ttc" id="astructHTTP__PROXY__IO__INSTANCE__TAG_html_ae75eb106d12c965c286bd42cc8aa4b1c"><div class="ttname"><a href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ae75eb106d12c965c286bd42cc8aa4b1c">HTTP_PROXY_IO_INSTANCE_TAG::proxy_hostname</a></div><div class="ttdeci">char * proxy_hostname</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8c_source.html#l00040">http_proxy_io.c:40</a></div></div>
<div class="ttc" id="anewlib_2sys_2errno_8h_html_ab03f640d90fbc5bcb75285d08a0f25ed"><div class="ttname"><a href="newlib_2sys_2errno_8h.html#ab03f640d90fbc5bcb75285d08a0f25ed">errno</a></div><div class="ttdeci">#define errno</div><div class="ttdef"><b>Definition:</b> <a href="newlib_2sys_2errno_8h_source.html#l00015">errno.h:14</a></div></div>
<div class="ttc" id="axio_8c_html_ad1678d0cc44c83eb2bdc0eee0be12925"><div class="ttname"><a href="xio_8c.html#ad1678d0cc44c83eb2bdc0eee0be12925">xio_dowork</a></div><div class="ttdeci">void xio_dowork(XIO_HANDLE xio)</div><div class="ttdef"><b>Definition:</b> <a href="xio_8c_source.html#l00157">xio.c:157</a></div></div>
<div class="ttc" id="alimits_8h_html"><div class="ttname"><a href="limits_8h.html">limits.h</a></div></div>
<div class="ttc" id="axio_8h_html_a2761e39867e9372423f77921fc5fd26d"><div class="ttname"><a href="xio_8h.html#a2761e39867e9372423f77921fc5fd26d">ON_IO_ERROR</a></div><div class="ttdeci">void(* ON_IO_ERROR)(void *context)</div><div class="ttdef"><b>Definition:</b> <a href="xio_8h_source.html#l00040">xio.h:40</a></div></div>
<div class="ttc" id="astructHTTP__PROXY__IO__INSTANCE__TAG_html_ac2d566a77dcd7be68758874f5cc09a3b"><div class="ttname"><a href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ac2d566a77dcd7be68758874f5cc09a3b">HTTP_PROXY_IO_INSTANCE_TAG::hostname</a></div><div class="ttdeci">char * hostname</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8c_source.html#l00038">http_proxy_io.c:38</a></div></div>
<div class="ttc" id="astructHTTP__PROXY__IO__INSTANCE__TAG_html_a658f732ee6d24301bfcf87d60945c701"><div class="ttname"><a href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a658f732ee6d24301bfcf87d60945c701">HTTP_PROXY_IO_INSTANCE_TAG::on_io_close_complete_context</a></div><div class="ttdeci">void * on_io_close_complete_context</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8c_source.html#l00037">http_proxy_io.c:37</a></div></div>
<div class="ttc" id="ahttp__proxy__io_8c_html_a2a401ffb43a26861e755104d0dc9da43a2bbab483a5d912bad03fe2eff4628462"><div class="ttname"><a href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43a2bbab483a5d912bad03fe2eff4628462">HTTP_PROXY_IO_STATE_OPEN</a></div><div class="ttdeci">@ HTTP_PROXY_IO_STATE_OPEN</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8c_source.html#l00022">http_proxy_io.c:22</a></div></div>
<div class="ttc" id="axio_8c_html_a8055217d505db388235a00b700aa1562"><div class="ttname"><a href="xio_8c.html#a8055217d505db388235a00b700aa1562">xio_send</a></div><div class="ttdeci">int xio_send(XIO_HANDLE xio, const void *buffer, size_t size, ON_SEND_COMPLETE on_send_complete, void *callback_context)</div><div class="ttdef"><b>Definition:</b> <a href="xio_8c_source.html#l00133">xio.c:133</a></div></div>
<div class="ttc" id="astrings_8c_html_a14f1a6a01de229149d3810d4d06816a2"><div class="ttname"><a href="strings_8c.html#a14f1a6a01de229149d3810d4d06816a2">STRING_delete</a></div><div class="ttdeci">void STRING_delete(STRING_HANDLE handle)</div><div class="ttdef"><b>Definition:</b> <a href="strings_8c_source.html#l00654">strings.c:654</a></div></div>
<div class="ttc" id="astructIO__INTERFACE__DESCRIPTION__TAG_html"><div class="ttname"><a href="structIO__INTERFACE__DESCRIPTION__TAG.html">IO_INTERFACE_DESCRIPTION_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="xio_8h_source.html#l00052">xio.h:53</a></div></div>
<div class="ttc" id="astructHTTP__PROXY__IO__INSTANCE__TAG_html_afc54f6d61c36537d67da5054302894ab"><div class="ttname"><a href="structHTTP__PROXY__IO__INSTANCE__TAG.html#afc54f6d61c36537d67da5054302894ab">HTTP_PROXY_IO_INSTANCE_TAG::on_io_error_context</a></div><div class="ttdeci">void * on_io_error_context</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8c_source.html#l00033">http_proxy_io.c:33</a></div></div>
<div class="ttc" id="adef_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="def_8h_source.html#l00071">def.h:70</a></div></div>
<div class="ttc" id="aArduino-IRremote_2LICENSE_8txt_html_a3b083519fd2b41d83363afcfd5ebad9d"><div class="ttname"><a href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a></div><div class="ttdeci">if the work is an executable linked with the with the complete machine readable work that uses the as object code and or source so that the user can modify the Library and then relink to produce a modified executable containing the modified rather than copying library functions into the if the user installs as long as the modified version is interface compatible with the version that the work was made with c Accompany the work with a written valid for at least three to give the same user the materials specified in for a charge no more than the cost of performing this distribution d If distribution of the work is made by offering access to copy from a designated offer equivalent access to copy the above specified materials from the same place e Verify that the user has already received a copy of these materials or that you have already sent this user a copy For an the required form of the work that uses the Library must include any data and utility programs needed for reproducing the executable from it as a special the materials to be distributed need not include anything that is normally and so on of the operating system on which the executable unless that component itself accompanies the executable It may happen that this requirement contradicts the license restrictions of other proprietary libraries that do not normally accompany the operating system Such a contradiction means you cannot use both them and the Library together in an executable that you distribute You may place library facilities that are a work based on the Library side by side in a single library together with other library facilities not covered by this and distribute such a combined provided that the separate distribution of the work based on the Library and of the other library facilities is otherwise and provided that you do these two uncombined with any other library facilities This must be distributed under the terms of the Sections above b Give prominent notice with the combined library of the fact that part of it is a work based on the and explaining where to find the accompanying uncombined form of the same work You may not link or distribute the Library except as expressly provided under this License Any attempt otherwise to link or distribute the Library is void</div><div class="ttdef"><b>Definition:</b> <a href="Arduino-IRremote_2LICENSE_8txt_source.html#l00353">LICENSE.txt:353</a></div></div>
<div class="ttc" id="astructHTTP__PROXY__IO__INSTANCE__TAG_html_a292ad9eb62a49d25a642d4a97355f9ee"><div class="ttname"><a href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a292ad9eb62a49d25a642d4a97355f9ee">HTTP_PROXY_IO_INSTANCE_TAG::port</a></div><div class="ttdeci">int port</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8c_source.html#l00039">http_proxy_io.c:39</a></div></div>
<div class="ttc" id="astructHTTP__PROXY__IO__INSTANCE__TAG_html_af0d45267ae26b56b88254712acad94be"><div class="ttname"><a href="structHTTP__PROXY__IO__INSTANCE__TAG.html#af0d45267ae26b56b88254712acad94be">HTTP_PROXY_IO_INSTANCE_TAG::receive_buffer_size</a></div><div class="ttdeci">size_t receive_buffer_size</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8c_source.html#l00046">http_proxy_io.c:46</a></div></div>
<div class="ttc" id="astructbuffer_html"><div class="ttname"><a href="structbuffer.html">buffer</a></div><div class="ttdef"><b>Definition:</b> <a href="zconf_8lex_8c_source.html#l01095">zconf.lex.c:1095</a></div></div>
<div class="ttc" id="astructHTTP__PROXY__IO__INSTANCE__TAG_html"><div class="ttname"><a href="structHTTP__PROXY__IO__INSTANCE__TAG.html">HTTP_PROXY_IO_INSTANCE_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8c_source.html#l00027">http_proxy_io.c:28</a></div></div>
<div class="ttc" id="axio_8c_html_a42cdddeb35bf5a6d45a4a730b1b9e4a5"><div class="ttname"><a href="xio_8c.html#a42cdddeb35bf5a6d45a4a730b1b9e4a5">xio_retrieveoptions</a></div><div class="ttdeci">OPTIONHANDLER_HANDLE xio_retrieveoptions(XIO_HANDLE xio)</div><div class="ttdef"><b>Definition:</b> <a href="xio_8c_source.html#l00256">xio.c:256</a></div></div>
<div class="ttc" id="aunity__fixture__malloc__overrides_8h_html_acf143577800376dd931c059ecc61ba06"><div class="ttname"><a href="unity__fixture__malloc__overrides_8h.html#acf143577800376dd931c059ecc61ba06">malloc</a></div><div class="ttdeci">#define malloc</div><div class="ttdef"><b>Definition:</b> <a href="unity__fixture__malloc__overrides_8h_source.html#l00038">unity_fixture_malloc_overrides.h:37</a></div></div>
<div class="ttc" id="astructHTTP__PROXY__IO__CONFIG__TAG_html_a69f6084e1141a28dd7e739cc0643646f"><div class="ttname"><a href="structHTTP__PROXY__IO__CONFIG__TAG.html#a69f6084e1141a28dd7e739cc0643646f">HTTP_PROXY_IO_CONFIG_TAG::port</a></div><div class="ttdeci">int port</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8h_source.html#l00017">http_proxy_io.h:17</a></div></div>
<div class="ttc" id="ahttp__proxy__io_8c_html_a0163ea7e6e7be548afa175f4a76b0728"><div class="ttname"><a href="http__proxy__io_8c.html#a0163ea7e6e7be548afa175f4a76b0728">http_proxy_io_get_interface_description</a></div><div class="ttdeci">const IO_INTERFACE_DESCRIPTION * http_proxy_io_get_interface_description(void)</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8c_source.html#l00955">http_proxy_io.c:955</a></div></div>
<div class="ttc" id="astdint_8h_html"><div class="ttname"><a href="stdint_8h.html">stdint.h</a></div></div>
<div class="ttc" id="astructHTTP__PROXY__IO__INSTANCE__TAG_html_a8d1c9de4129a6f3207d91d63cf814553"><div class="ttname"><a href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a8d1c9de4129a6f3207d91d63cf814553">HTTP_PROXY_IO_INSTANCE_TAG::on_io_close_complete</a></div><div class="ttdeci">ON_IO_CLOSE_COMPLETE on_io_close_complete</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8c_source.html#l00036">http_proxy_io.c:36</a></div></div>
<div class="ttc" id="ahttp__proxy__io_8c_html_a2a401ffb43a26861e755104d0dc9da43abf0c18c5dc594d0b8260d4d70f4bd908"><div class="ttname"><a href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43abf0c18c5dc594d0b8260d4d70f4bd908">HTTP_PROXY_IO_STATE_CLOSING</a></div><div class="ttdeci">@ HTTP_PROXY_IO_STATE_CLOSING</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8c_source.html#l00023">http_proxy_io.c:23</a></div></div>
<div class="ttc" id="axio_8c_html_a83d9da875cf42f4f1ce130664a9b3860"><div class="ttname"><a href="xio_8c.html#a83d9da875cf42f4f1ce130664a9b3860">xio_close</a></div><div class="ttdeci">int xio_close(XIO_HANDLE xio, ON_IO_CLOSE_COMPLETE on_io_close_complete, void *callback_context)</div><div class="ttdef"><b>Definition:</b> <a href="xio_8c_source.html#l00104">xio.c:104</a></div></div>
<div class="ttc" id="astructHTTP__PROXY__IO__INSTANCE__TAG_html_abf6cf5baa051d4b312384df8a543d3b1"><div class="ttname"><a href="structHTTP__PROXY__IO__INSTANCE__TAG.html#abf6cf5baa051d4b312384df8a543d3b1">HTTP_PROXY_IO_INSTANCE_TAG::on_bytes_received</a></div><div class="ttdeci">ON_BYTES_RECEIVED on_bytes_received</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8c_source.html#l00030">http_proxy_io.c:30</a></div></div>
<div class="ttc" id="axio_8c_html_acf7bf0887a6f4a203740745d27d21bb1"><div class="ttname"><a href="xio_8c.html#acf7bf0887a6f4a203740745d27d21bb1">xio_destroy</a></div><div class="ttdeci">void xio_destroy(XIO_HANDLE xio)</div><div class="ttdef"><b>Definition:</b> <a href="xio_8c_source.html#l00060">xio.c:60</a></div></div>
<div class="ttc" id="ahttp__proxy__io_8c_html_a81696b47393da4a563ee57e583bf8eb0"><div class="ttname"><a href="http__proxy__io_8c.html#a81696b47393da4a563ee57e583bf8eb0">HTTP_PROXY_IO_INSTANCE</a></div><div class="ttdeci">struct HTTP_PROXY_IO_INSTANCE_TAG HTTP_PROXY_IO_INSTANCE</div></div>
<div class="ttc" id="acJSON__Utils_8h_html_a0dff3c76a075649fa412b1c429ffe382"><div class="ttname"><a href="cJSON__Utils_8h.html#a0dff3c76a075649fa412b1c429ffe382">value</a></div><div class="ttdeci">const char *const const char *const const cJSON *const value</div><div class="ttdef"><b>Definition:</b> <a href="cJSON__Utils_8h_source.html#l00042">cJSON_Utils.h:42</a></div></div>
<div class="ttc" id="axio_8h_html_afdff4c121fba1278335064c5686cc419"><div class="ttname"><a href="xio_8h.html#afdff4c121fba1278335064c5686cc419">ON_IO_CLOSE_COMPLETE</a></div><div class="ttdeci">void(* ON_IO_CLOSE_COMPLETE)(void *context)</div><div class="ttdef"><b>Definition:</b> <a href="xio_8h_source.html#l00039">xio.h:39</a></div></div>
<div class="ttc" id="acrt__abstractions_8h_html"><div class="ttname"><a href="crt__abstractions_8h.html">crt_abstractions.h</a></div></div>
<div class="ttc" id="axio_8h_html_a13198b46d201d067f60a82c1bf0e5780"><div class="ttname"><a href="xio_8h.html#a13198b46d201d067f60a82c1bf0e5780">ON_BYTES_RECEIVED</a></div><div class="ttdeci">void(* ON_BYTES_RECEIVED)(void *context, const unsigned char *buffer, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="xio_8h_source.html#l00036">xio.h:36</a></div></div>
<div class="ttc" id="abase64_8c_html_a9e30a20c2abb2bf5e826426c953d12ed"><div class="ttname"><a href="base64_8c.html#a9e30a20c2abb2bf5e826426c953d12ed">Base64_Encode_Bytes</a></div><div class="ttdeci">STRING_HANDLE Base64_Encode_Bytes(const unsigned char *source, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="base64_8c_source.html#l00316">base64.c:316</a></div></div>
<div class="ttc" id="agballoc_8h_html"><div class="ttname"><a href="gballoc_8h.html">gballoc.h</a></div></div>
<div class="ttc" id="astructHTTP__PROXY__IO__CONFIG__TAG_html_add1d2ba69cc57ac2a55dc6236cbf304c"><div class="ttname"><a href="structHTTP__PROXY__IO__CONFIG__TAG.html#add1d2ba69cc57ac2a55dc6236cbf304c">HTTP_PROXY_IO_CONFIG_TAG::username</a></div><div class="ttdeci">const char * username</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8h_source.html#l00020">http_proxy_io.h:20</a></div></div>
<div class="ttc" id="astrings_8c_html_a351a84891e778e497c7eafa76bd02cd0"><div class="ttname"><a href="strings_8c.html#a351a84891e778e497c7eafa76bd02cd0">STRING_c_str</a></div><div class="ttdeci">const char * STRING_c_str(STRING_HANDLE handle)</div><div class="ttdef"><b>Definition:</b> <a href="strings_8c_source.html#l00667">strings.c:667</a></div></div>
<div class="ttc" id="axlogging_8h_html_aec0857f05ae0368bb1cb6efdc63cd420"><div class="ttname"><a href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a></div><div class="ttdeci">#define LogError(FORMAT,...)</div><div class="ttdef"><b>Definition:</b> <a href="xlogging_8h_source.html#l00164">xlogging.h:163</a></div></div>
<div class="ttc" id="astructHTTP__PROXY__IO__INSTANCE__TAG_html_a24b198d8abbc43d1752be530065edf4a"><div class="ttname"><a href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a24b198d8abbc43d1752be530065edf4a">HTTP_PROXY_IO_INSTANCE_TAG::password</a></div><div class="ttdeci">char * password</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8c_source.html#l00043">http_proxy_io.c:43</a></div></div>
<div class="ttc" id="axio_8c_html_ab842aa9de72d9359ac059be7428c59d5"><div class="ttname"><a href="xio_8c.html#ab842aa9de72d9359ac059be7428c59d5">xio_setoption</a></div><div class="ttdeci">int xio_setoption(XIO_HANDLE xio, const char *optionName, const void *value)</div><div class="ttdef"><b>Definition:</b> <a href="xio_8c_source.html#l00169">xio.c:169</a></div></div>
<div class="ttc" id="axio_8h_html_aa71532538adc618acbebd20396c0f83f"><div class="ttname"><a href="xio_8h.html#aa71532538adc618acbebd20396c0f83f">CONCRETE_IO_HANDLE</a></div><div class="ttdeci">void * CONCRETE_IO_HANDLE</div><div class="ttdef"><b>Definition:</b> <a href="xio_8h_source.html#l00020">xio.h:20</a></div></div>
<div class="ttc" id="astructHTTP__PROXY__IO__INSTANCE__TAG_html_abc19a3996c057365b7a2368352602756"><div class="ttname"><a href="structHTTP__PROXY__IO__INSTANCE__TAG.html#abc19a3996c057365b7a2368352602756">HTTP_PROXY_IO_INSTANCE_TAG::on_io_error</a></div><div class="ttdeci">ON_IO_ERROR on_io_error</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8c_source.html#l00032">http_proxy_io.c:32</a></div></div>
<div class="ttc" id="axio_8c_html_aa6c82a73f8c2e190dfe3b9eb5afb9bdd"><div class="ttname"><a href="xio_8c.html#aa6c82a73f8c2e190dfe3b9eb5afb9bdd">xio_create</a></div><div class="ttdeci">XIO_HANDLE xio_create(const IO_INTERFACE_DESCRIPTION *io_interface_description, const void *xio_create_parameters)</div><div class="ttdef"><b>Definition:</b> <a href="xio_8c_source.html#l00019">xio.c:19</a></div></div>
<div class="ttc" id="aunity__fixture__malloc__overrides_8h_html_a1b739878adcdb46fb5d209af7ce79628"><div class="ttname"><a href="unity__fixture__malloc__overrides_8h.html#a1b739878adcdb46fb5d209af7ce79628">realloc</a></div><div class="ttdeci">#define realloc</div><div class="ttdef"><b>Definition:</b> <a href="unity__fixture__malloc__overrides_8h_source.html#l00040">unity_fixture_malloc_overrides.h:39</a></div></div>
<div class="ttc" id="astructSOCKETIO__CONFIG__TAG_html_a0ed8a2468cb6954c24d397fef0b1422b"><div class="ttname"><a href="structSOCKETIO__CONFIG__TAG.html#a0ed8a2468cb6954c24d397fef0b1422b">SOCKETIO_CONFIG_TAG::accepted_socket</a></div><div class="ttdeci">void * accepted_socket</div><div class="ttdef"><b>Definition:</b> <a href="socketio_8h_source.html#l00022">socketio.h:22</a></div></div>
<div class="ttc" id="axio_8h_html_a3acca89b8b5ff3d42b3eaf0b3dbcf7ca"><div class="ttname"><a href="xio_8h.html#a3acca89b8b5ff3d42b3eaf0b3dbcf7ca">ON_IO_OPEN_COMPLETE</a></div><div class="ttdeci">void(* ON_IO_OPEN_COMPLETE)(void *context, IO_OPEN_RESULT open_result)</div><div class="ttdef"><b>Definition:</b> <a href="xio_8h_source.html#l00038">xio.h:38</a></div></div>
<div class="ttc" id="acacheasm_8h_html_a296a4dfa224096b538c66a9bab58cb9e"><div class="ttname"><a href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a></div><div class="ttdeci">macro cache_index_all size</div><div class="ttdef"><b>Definition:</b> <a href="cacheasm_8h_source.html#l00158">cacheasm.h:158</a></div></div>
<div class="ttc" id="astructHTTP__PROXY__IO__INSTANCE__TAG_html_a41d1d1b03932da3a07c2148e31050bec"><div class="ttname"><a href="structHTTP__PROXY__IO__INSTANCE__TAG.html#a41d1d1b03932da3a07c2148e31050bec">HTTP_PROXY_IO_INSTANCE_TAG::on_io_open_complete_context</a></div><div class="ttdeci">void * on_io_open_complete_context</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8c_source.html#l00035">http_proxy_io.c:35</a></div></div>
<div class="ttc" id="ahttp__proxy__io_8c_html_a2a401ffb43a26861e755104d0dc9da43"><div class="ttname"><a href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43">HTTP_PROXY_IO_STATE_TAG</a></div><div class="ttdeci">HTTP_PROXY_IO_STATE_TAG</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8c_source.html#l00017">http_proxy_io.c:18</a></div></div>
<div class="ttc" id="astructSOCKETIO__CONFIG__TAG_html_ae37dfae4d3a9f1c76d8d5f25059111dc"><div class="ttname"><a href="structSOCKETIO__CONFIG__TAG.html#ae37dfae4d3a9f1c76d8d5f25059111dc">SOCKETIO_CONFIG_TAG::hostname</a></div><div class="ttdeci">const char * hostname</div><div class="ttdef"><b>Definition:</b> <a href="socketio_8h_source.html#l00020">socketio.h:20</a></div></div>
<div class="ttc" id="astructHTTP__PROXY__IO__INSTANCE__TAG_html_ab6cdda13b787b3fc0cf4038f1e633f75"><div class="ttname"><a href="structHTTP__PROXY__IO__INSTANCE__TAG.html#ab6cdda13b787b3fc0cf4038f1e633f75">HTTP_PROXY_IO_INSTANCE_TAG::receive_buffer</a></div><div class="ttdeci">unsigned char * receive_buffer</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8c_source.html#l00045">http_proxy_io.c:45</a></div></div>
<div class="ttc" id="astructXIO__INSTANCE__TAG_html"><div class="ttname"><a href="structXIO__INSTANCE__TAG.html">XIO_INSTANCE_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="xio_8c_source.html#l00013">xio.c:14</a></div></div>
<div class="ttc" id="astructOPTIONHANDLER__HANDLE__DATA__TAG_html"><div class="ttname"><a href="structOPTIONHANDLER__HANDLE__DATA__TAG.html">OPTIONHANDLER_HANDLE_DATA_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="optionhandler_8c_source.html#l00016">optionhandler.c:17</a></div></div>
<div class="ttc" id="axio_8c_html_aff8b447060a2e4671fdc6ad93c5654c2"><div class="ttname"><a href="xio_8c.html#aff8b447060a2e4671fdc6ad93c5654c2">xio_open</a></div><div class="ttdeci">int xio_open(XIO_HANDLE xio, ON_IO_OPEN_COMPLETE on_io_open_complete, void *on_io_open_complete_context, ON_BYTES_RECEIVED on_bytes_received, void *on_bytes_received_context, ON_IO_ERROR on_io_error, void *on_io_error_context)</div><div class="ttdef"><b>Definition:</b> <a href="xio_8c_source.html#l00075">xio.c:75</a></div></div>
<div class="ttc" id="astructHTTP__PROXY__IO__INSTANCE__TAG_html_af6a2ebb823ebfc2f4c7f63831d5ceaae"><div class="ttname"><a href="structHTTP__PROXY__IO__INSTANCE__TAG.html#af6a2ebb823ebfc2f4c7f63831d5ceaae">HTTP_PROXY_IO_INSTANCE_TAG::proxy_port</a></div><div class="ttdeci">int proxy_port</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8c_source.html#l00041">http_proxy_io.c:41</a></div></div>
<div class="ttc" id="ahttp__proxy__io_8c_html_a2a401ffb43a26861e755104d0dc9da43aca240fac37d13797fa4837825933c358"><div class="ttname"><a href="http__proxy__io_8c.html#a2a401ffb43a26861e755104d0dc9da43aca240fac37d13797fa4837825933c358">HTTP_PROXY_IO_STATE_CLOSED</a></div><div class="ttdeci">@ HTTP_PROXY_IO_STATE_CLOSED</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy__io_8c_source.html#l00019">http_proxy_io.c:19</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
