<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>watch 2: components/arduino-esp32/libraries/AzureIoT/src/az_iot/iothub_client/src/iothub_client.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">watch 2
   </div>
   <div id="projectbrief">Firmwareforwatch2</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_409f97388efe006bc3438b95e9edef48.html">components</a></li><li class="navelem"><a class="el" href="dir_5eb99044ce905dee52e93bf33cea5db4.html">arduino-esp32</a></li><li class="navelem"><a class="el" href="dir_0b98385dcf64e929fcaa5e8c894594ea.html">libraries</a></li><li class="navelem"><a class="el" href="dir_eb555940be421b578cfc4731c861a40a.html">AzureIoT</a></li><li class="navelem"><a class="el" href="dir_540bbe64a9e668446da0d15e64e423e9.html">src</a></li><li class="navelem"><a class="el" href="dir_c4ba8e35b6f312a68ea59c6826b7e111.html">az_iot</a></li><li class="navelem"><a class="el" href="dir_aca63954051b320f4be9d4ad42ba7e2c.html">iothub_client</a></li><li class="navelem"><a class="el" href="dir_3bb4b5621159288e6ee2bb1735d058f1.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">iothub_client.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="iothub__client_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright (c) Microsoft. All rights reserved.</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Licensed under the MIT license. See LICENSE file in the project root for full license information.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160; </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span> </div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="umock__c__prod_8h.html">az_iot/c-utility/inc/azure_c_shared_utility/umock_c_prod.h</a>&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="gballoc_8h.html">az_iot/c-utility/inc/azure_c_shared_utility/gballoc.h</a>&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160; </div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;signal.h&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;stddef.h&gt;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="optimize__size_8h.html">az_iot/c-utility/inc/azure_c_shared_utility/optimize_size.h</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="crt__abstractions_8h.html">az_iot/c-utility/inc/azure_c_shared_utility/crt_abstractions.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;../inc/iothub_client.h&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;../inc/iothub_client_ll.h&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;../inc/iothub_client_private.h&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;../inc/iothubtransport.h&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="threadapi_8h.html">az_iot/c-utility/inc/azure_c_shared_utility/threadapi.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libraries_2AzureIoT_2src_2az__iot_2c-utility_2inc_2azure__c__shared__utility_2lock_8h.html">az_iot/c-utility/inc/azure_c_shared_utility/lock.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="xlogging_8h.html">az_iot/c-utility/inc/azure_c_shared_utility/xlogging.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="singlylinkedlist_8h.html">az_iot/c-utility/inc/azure_c_shared_utility/singlylinkedlist.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2inc_2azure__c__shared__utility_2vector_8h.html">az_iot/c-utility/inc/azure_c_shared_utility/vector.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">struct </span><a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT_TAG</a>;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">   24</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE_TAG</a></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;{</div>
<div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">   26</a></span>&#160;    <a class="code" href="structIOTHUB__CLIENT__LL__HANDLE__DATA__TAG.html">IOTHUB_CLIENT_LL_HANDLE</a> <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a>;</div>
<div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a7f8a1a6bc50a5e0371f2587f89c9b8fe">   27</a></span>&#160;    <a class="code" href="structTRANSPORT__HANDLE__DATA__TAG.html">TRANSPORT_HANDLE</a> <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a7f8a1a6bc50a5e0371f2587f89c9b8fe">TransportHandle</a>;</div>
<div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a008f33c5da8e26a2cefab8be0f991744">   28</a></span>&#160;    <a class="code" href="threadapi_8h.html#a51f9e04bbea1ebd9fd7281a2f2a4fbf3">THREAD_HANDLE</a> <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a008f33c5da8e26a2cefab8be0f991744">ThreadHandle</a>;</div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">   29</a></span>&#160;    <a class="code" href="libraries_2AzureIoT_2src_2az__iot_2c-utility_2inc_2azure__c__shared__utility_2lock_8h.html#a83187a1340d2a8c817783e74f55d8281">LOCK_HANDLE</a> <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>;</div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a83429a62cb7730444f275464b09703c5">   30</a></span>&#160;    <a class="code" href="signal_8h.html#a4497f20b236a139698faae200907f375">sig_atomic_t</a> <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a83429a62cb7730444f275464b09703c5">StopThread</a>;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#ifdef USE_UPLOADTOBLOB</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <a class="code" href="structSINGLYLINKEDLIST__INSTANCE__TAG.html">SINGLYLINKEDLIST_HANDLE</a> savedDataToBeCleaned; <span class="comment">/*list containing UPLOADTOBLOB_SAVED_DATA*/</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1ba5770cedc73357f700522f34948142">   34</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1ba5770cedc73357f700522f34948142">created_with_transport_handle</a>;</div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3c7b086b1b96eb49ae2a4a67530746f9">   35</a></span>&#160;    <a class="code" href="structVECTOR__TAG.html">VECTOR_HANDLE</a> <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3c7b086b1b96eb49ae2a4a67530746f9">saved_user_callback_list</a>;</div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a4a48a863612c79a2d974e1809c2c4443">   36</a></span>&#160;    <a class="code" href="iothub__client__ll_8h.html#a3020471f05025405840d9c43466122dc">IOTHUB_CLIENT_DEVICE_TWIN_CALLBACK</a> <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a4a48a863612c79a2d974e1809c2c4443">desired_state_callback</a>;</div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ab13e6a9fcb8fa8587c92e98122474b56">   37</a></span>&#160;    <a class="code" href="iothub__client__ll_8h.html#a41b17fcb2cb70587e3576226561648a0">IOTHUB_CLIENT_EVENT_CONFIRMATION_CALLBACK</a> <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ab13e6a9fcb8fa8587c92e98122474b56">event_confirm_callback</a>;</div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#af56890dbbf4752da02a880eda602a1b4">   38</a></span>&#160;    <a class="code" href="iothub__client__ll_8h.html#a9ae117da9222a5138e31a8953ce18bbc">IOTHUB_CLIENT_REPORTED_STATE_CALLBACK</a> <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#af56890dbbf4752da02a880eda602a1b4">reported_state_callback</a>;</div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#af2e37951e6519740b732c39d24625b6c">   39</a></span>&#160;    <a class="code" href="iothub__client__ll_8h.html#ad0d7e0712e620b1d55e72652f4f4f560">IOTHUB_CLIENT_CONNECTION_STATUS_CALLBACK</a> <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#af2e37951e6519740b732c39d24625b6c">connection_status_callback</a>;</div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a0b135b5f5e01f2e2dafe0e77229f0f19">   40</a></span>&#160;    <a class="code" href="iothub__client__ll_8h.html#aa758c6c04994938fae9257289760d01a">IOTHUB_CLIENT_DEVICE_METHOD_CALLBACK_ASYNC</a> <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a0b135b5f5e01f2e2dafe0e77229f0f19">device_method_callback</a>;</div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a58ae45dac433e034d7f8a394abd7ebfa">   41</a></span>&#160;    <a class="code" href="iothub__client__ll_8h.html#a43072ecc913e5ca776108b1731553c30">IOTHUB_CLIENT_INBOUND_DEVICE_METHOD_CALLBACK</a> <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a58ae45dac433e034d7f8a394abd7ebfa">inbound_device_method_callback</a>;</div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ac778ef2ee110489a4bb4972571684b68">   42</a></span>&#160;    <a class="code" href="iothub__client__ll_8h.html#adf7097e8fc9e34f26dd9347d4eaa5f8d">IOTHUB_CLIENT_MESSAGE_CALLBACK_ASYNC</a> <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ac778ef2ee110489a4bb4972571684b68">message_callback</a>;</div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1a889fb66cede394cdbebd65bc5643b4">   43</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT_TAG</a>* <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1a889fb66cede394cdbebd65bc5643b4">devicetwin_user_context</a>;</div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ae5da1f54d8bfbefcb6c40a8e94565edf">   44</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT_TAG</a>* <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ae5da1f54d8bfbefcb6c40a8e94565edf">connection_status_user_context</a>;</div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#aeba8103aeb06c8281a54013d644b7b30">   45</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT_TAG</a>* <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#aeba8103aeb06c8281a54013d644b7b30">message_user_context</a>;</div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a20fd565795802e8d1bb855017506d7c9">   46</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT_TAG</a>* <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a20fd565795802e8d1bb855017506d7c9">method_user_context</a>;</div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="iothub__client_8c.html#a7e36aa6fb9adeb1623eb9153c7453d2d">   47</a></span>&#160;} <a class="code" href="iothub__client_8c.html#a7e36aa6fb9adeb1623eb9153c7453d2d">IOTHUB_CLIENT_INSTANCE</a>;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#ifdef USE_UPLOADTOBLOB</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>UPLOADTOBLOB_SAVED_DATA_TAG</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;{</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code" href="tag__strings_8h.html#a2090a647eea4ba8be07c28e6d52e97de">source</a>;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a>;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordtype">char</span>* destinationFileName;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="iothub__client_8h.html#a039d574a949c85ba9c183c88d4ce03bf">IOTHUB_CLIENT_FILE_UPLOAD_CALLBACK</a> iotHubClientFileUploadCallback;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordtype">void</span>* context;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="threadapi_8h.html#a51f9e04bbea1ebd9fd7281a2f2a4fbf3">THREAD_HANDLE</a> uploadingThreadHandle;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_HANDLE</a> iotHubClientHandle;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="libraries_2AzureIoT_2src_2az__iot_2c-utility_2inc_2azure__c__shared__utility_2lock_8h.html#a83187a1340d2a8c817783e74f55d8281">LOCK_HANDLE</a> lockGarbage;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordtype">int</span> canBeGarbageCollected; <span class="comment">/*flag indicating that the UPLOADTOBLOB_SAVED_DATA structure can be freed because the thread deadling with it finished*/</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;}UPLOADTOBLOB_SAVED_DATA;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#define USER_CALLBACK_TYPE_VALUES       \</span></div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="iothub__client_8c.html#a112ff42c22debd733490373cdeac54b4">   65</a></span>&#160;<span class="preprocessor">    CALLBACK_TYPE_DEVICE_TWIN,          \</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">    CALLBACK_TYPE_EVENT_CONFIRM,        \</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">    CALLBACK_TYPE_REPORTED_STATE,       \</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">    CALLBACK_TYPE_CONNECTION_STATUS,    \</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">    CALLBACK_TYPE_DEVICE_METHOD,        \</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">    CALLBACK_TYPE_INBOUD_DEVICE_METHOD, \</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">    CALLBACK_TYPE_MESSAGE</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<a class="code" href="macro__utils_8h.html#a2645534006fbb080978beb9682eb0c92">DEFINE_ENUM</a>(USER_CALLBACK_TYPE, <a class="code" href="iothub__client_8c.html#a112ff42c22debd733490373cdeac54b4">USER_CALLBACK_TYPE_VALUES</a>)</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<a class="code" href="macro__utils_8h.html#a9953147f17615533ea50ed383b0171c1">DEFINE_ENUM_STRINGS</a>(USER_CALLBACK_TYPE, <a class="code" href="iothub__client_8c.html#a112ff42c22debd733490373cdeac54b4">USER_CALLBACK_TYPE_VALUES</a>)</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html">   76</a></span>&#160;typedef struct <a class="code" href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html">DEVICE_TWIN_CALLBACK_INFO_TAG</a></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;{</div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html#a3116824aac4189019797b4f6de4afff6">   78</a></span>&#160;    DEVICE_TWIN_UPDATE_STATE <a class="code" href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html#a3116824aac4189019797b4f6de4afff6">update_state</a>;</div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html#a6160cbc2ae0492baf707ef7d97808f8e">   79</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code" href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html#a6160cbc2ae0492baf707ef7d97808f8e">payLoad</a>;</div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html#a809aa23bb29e52a042b588d83428c7e1">   80</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html#a809aa23bb29e52a042b588d83428c7e1">size</a>;</div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="iothub__client_8c.html#a8088bbe5b1815c28e8ecd4bf4e5c32c4">   81</a></span>&#160;} <a class="code" href="iothub__client_8c.html#a8088bbe5b1815c28e8ecd4bf4e5c32c4">DEVICE_TWIN_CALLBACK_INFO</a>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="structEVENT__CONFIRM__CALLBACK__INFO__TAG.html">   83</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structEVENT__CONFIRM__CALLBACK__INFO__TAG.html">EVENT_CONFIRM_CALLBACK_INFO_TAG</a></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;{</div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="structEVENT__CONFIRM__CALLBACK__INFO__TAG.html#a57334a5ffaa4e1863ab52fe1b2f8dcba">   85</a></span>&#160;    IOTHUB_CLIENT_CONFIRMATION_RESULT <a class="code" href="structEVENT__CONFIRM__CALLBACK__INFO__TAG.html#a57334a5ffaa4e1863ab52fe1b2f8dcba">confirm_result</a>;</div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="iothub__client_8c.html#ac781d5481baf2116fa29b1a7fdc70da9">   86</a></span>&#160;} <a class="code" href="iothub__client_8c.html#ac781d5481baf2116fa29b1a7fdc70da9">EVENT_CONFIRM_CALLBACK_INFO</a>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="structREPORTED__STATE__CALLBACK__INFO__TAG.html">   88</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structREPORTED__STATE__CALLBACK__INFO__TAG.html">REPORTED_STATE_CALLBACK_INFO_TAG</a></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;{</div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="structREPORTED__STATE__CALLBACK__INFO__TAG.html#a2d8e9706e26dbcb0fa8cfb727eec2c4b">   90</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structREPORTED__STATE__CALLBACK__INFO__TAG.html#a2d8e9706e26dbcb0fa8cfb727eec2c4b">status_code</a>;</div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="iothub__client_8c.html#aa72981c770835e08964e70efe1a2756c">   91</a></span>&#160;} <a class="code" href="iothub__client_8c.html#aa72981c770835e08964e70efe1a2756c">REPORTED_STATE_CALLBACK_INFO</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="structCONNECTION__STATUS__CALLBACK__INFO__TAG.html">   93</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structCONNECTION__STATUS__CALLBACK__INFO__TAG.html">CONNECTION_STATUS_CALLBACK_INFO_TAG</a></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;{</div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="structCONNECTION__STATUS__CALLBACK__INFO__TAG.html#ac7a7e6f71125e22fe542bf756f853c47">   95</a></span>&#160;    IOTHUB_CLIENT_CONNECTION_STATUS <a class="code" href="structCONNECTION__STATUS__CALLBACK__INFO__TAG.html#ac7a7e6f71125e22fe542bf756f853c47">connection_status</a>;</div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="structCONNECTION__STATUS__CALLBACK__INFO__TAG.html#a9263849bc574c4df644ef66c5a1663b6">   96</a></span>&#160;    IOTHUB_CLIENT_CONNECTION_STATUS_REASON <a class="code" href="structCONNECTION__STATUS__CALLBACK__INFO__TAG.html#a9263849bc574c4df644ef66c5a1663b6">status_reason</a>;</div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="iothub__client_8c.html#a0e3a30fc453cb72d0aff8f9b70c82285">   97</a></span>&#160;} <a class="code" href="iothub__client_8c.html#a0e3a30fc453cb72d0aff8f9b70c82285">CONNECTION_STATUS_CALLBACK_INFO</a>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="structMETHOD__CALLBACK__INFO__TAG.html">   99</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structMETHOD__CALLBACK__INFO__TAG.html">METHOD_CALLBACK_INFO_TAG</a></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;{</div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="structMETHOD__CALLBACK__INFO__TAG.html#a9ba1702222c78679def85ecd451731c3">  101</a></span>&#160;    <a class="code" href="structSTRING__TAG.html">STRING_HANDLE</a> <a class="code" href="structMETHOD__CALLBACK__INFO__TAG.html#a9ba1702222c78679def85ecd451731c3">method_name</a>;</div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="structMETHOD__CALLBACK__INFO__TAG.html#af376724de938122fa0cff9d89286cb00">  102</a></span>&#160;    <a class="code" href="structBUFFER__TAG.html">BUFFER_HANDLE</a> <a class="code" href="structMETHOD__CALLBACK__INFO__TAG.html#af376724de938122fa0cff9d89286cb00">payload</a>;</div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="structMETHOD__CALLBACK__INFO__TAG.html#aeec0712a3ac1da4bc99215650a9630ab">  103</a></span>&#160;    <a class="code" href="iothub__transport__ll_8h.html#a1cc79695294f89e97fb945066a3b3d77">METHOD_HANDLE</a> <a class="code" href="structMETHOD__CALLBACK__INFO__TAG.html#aeec0712a3ac1da4bc99215650a9630ab">method_id</a>;</div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="iothub__client_8c.html#a1fd17a38514d4e3f557197cbadff87d0">  104</a></span>&#160;} <a class="code" href="iothub__client_8c.html#a1fd17a38514d4e3f557197cbadff87d0">METHOD_CALLBACK_INFO</a>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="structUSER__CALLBACK__INFO__TAG.html">  106</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structUSER__CALLBACK__INFO__TAG.html">USER_CALLBACK_INFO_TAG</a></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;{</div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="structUSER__CALLBACK__INFO__TAG.html#acc98d50b9ccd3892732e7627e73c0bf2">  108</a></span>&#160;    USER_CALLBACK_TYPE <a class="code" href="structUSER__CALLBACK__INFO__TAG.html#acc98d50b9ccd3892732e7627e73c0bf2">type</a>;</div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="structUSER__CALLBACK__INFO__TAG.html#ac9ef9a196e06f36dfbd3bb7cc03e8979">  109</a></span>&#160;    <span class="keywordtype">void</span>* <a class="code" href="structUSER__CALLBACK__INFO__TAG.html#ac9ef9a196e06f36dfbd3bb7cc03e8979">userContextCallback</a>;</div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html">  110</a></span>&#160;    <span class="keyword">union </span><a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html">IOTHUB_CALLBACK</a></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    {</div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a22af3d3a1fb308e53e132f54f80a8a0e">  112</a></span>&#160;        <a class="code" href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html">DEVICE_TWIN_CALLBACK_INFO</a> <a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a22af3d3a1fb308e53e132f54f80a8a0e">dev_twin_cb_info</a>;</div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a995c2127121d749bc63ad2b7c2091f6a">  113</a></span>&#160;        <a class="code" href="structEVENT__CONFIRM__CALLBACK__INFO__TAG.html">EVENT_CONFIRM_CALLBACK_INFO</a> <a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a995c2127121d749bc63ad2b7c2091f6a">event_confirm_cb_info</a>;</div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a85bf3c7a28fb18221a0ad3b108aa648f">  114</a></span>&#160;        <a class="code" href="structREPORTED__STATE__CALLBACK__INFO__TAG.html">REPORTED_STATE_CALLBACK_INFO</a> <a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a85bf3c7a28fb18221a0ad3b108aa648f">reported_state_cb_info</a>;</div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ab8cc1695811d84be2d6d65dff4faa2be">  115</a></span>&#160;        <a class="code" href="structCONNECTION__STATUS__CALLBACK__INFO__TAG.html">CONNECTION_STATUS_CALLBACK_INFO</a> <a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ab8cc1695811d84be2d6d65dff4faa2be">connection_status_cb_info</a>;</div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ac76016558a82ef4f252e2f0b427e53df">  116</a></span>&#160;        <a class="code" href="structMETHOD__CALLBACK__INFO__TAG.html">METHOD_CALLBACK_INFO</a> <a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ac76016558a82ef4f252e2f0b427e53df">method_cb_info</a>;</div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a6a747cd66461654e3d1529ca52feb478">  117</a></span>&#160;        <a class="code" href="structMESSAGE__CALLBACK__INFO__TAG.html">MESSAGE_CALLBACK_INFO</a>* <a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a6a747cd66461654e3d1529ca52feb478">message_cb_info</a>;</div>
<div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">  118</a></span>&#160;    } <a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>;</div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="iothub__client_8c.html#ae3970b65ec664310bccadae17b605536">  119</a></span>&#160;} <a class="code" href="iothub__client_8c.html#ae3970b65ec664310bccadae17b605536">USER_CALLBACK_INFO</a>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">  121</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT_TAG</a></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;{</div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a0c3e332401f120f3c28a97b9e5f9e584">  123</a></span>&#160;    <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>* <a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a0c3e332401f120f3c28a97b9e5f9e584">iotHubClientHandle</a>;</div>
<div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a1684554928b9033a4b3a3df07809f77b">  124</a></span>&#160;    <span class="keywordtype">void</span>* <a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a1684554928b9033a4b3a3df07809f77b">userContextCallback</a>;</div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="iothub__client_8c.html#a90487572570a42c6c400ce72d6a861d2">  125</a></span>&#160;} <a class="code" href="iothub__client_8c.html#a90487572570a42c6c400ce72d6a861d2">IOTHUB_QUEUE_CONTEXT</a>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">/*used by unittests only*/</span></div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="iothub__client_8c.html#a7589aa8e3bd524b7c3112dc95b90504b">  128</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="iothub__client_8c.html#a7589aa8e3bd524b7c3112dc95b90504b">IoTHubClient_ThreadTerminationOffset</a> = <a class="code" href="tools_2sdk_2include_2wpa__supplicant_2wpa_2list_8h.html#afd049f7ad59dbe455f460807475c2841">offsetof</a>(<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>, StopThread);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="preprocessor">#ifdef USE_UPLOADTOBLOB</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">/*this function is called from _Destroy and from ScheduleWork_Thread to join finished blobUpload threads and free that memory*/</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> garbageCollectorImpl(<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>* iotHubClientInstance)</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;{</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="comment">/*see if any savedData structures can be disposed of*/</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment">/*Codes_SRS_IOTHUBCLIENT_02_072: [ All threads marked as disposable (upon completion of a file upload) shall be joined and the data structures build for them shall be freed. ]*/</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <a class="code" href="structLIST__ITEM__INSTANCE__TAG.html">LIST_ITEM_HANDLE</a> <a class="code" href="cJSON_8h.html#ac76cea59d438ba893d2f82aabb367d14">item</a> = <a class="code" href="singlylinkedlist_8c.html#a2557a2e240bd38a36a240a8386096507">singlylinkedlist_get_head_item</a>(iotHubClientInstance-&gt;savedDataToBeCleaned);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="cJSON_8h.html#ac76cea59d438ba893d2f82aabb367d14">item</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keyword">const</span> UPLOADTOBLOB_SAVED_DATA* savedData = (<span class="keyword">const</span> UPLOADTOBLOB_SAVED_DATA*)<a class="code" href="singlylinkedlist_8c.html#ae1a394b3f989a78faa77ce2aa11e1c67">singlylinkedlist_item_get_value</a>(<a class="code" href="cJSON_8h.html#ac76cea59d438ba893d2f82aabb367d14">item</a>);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <a class="code" href="structLIST__ITEM__INSTANCE__TAG.html">LIST_ITEM_HANDLE</a> old_item = <a class="code" href="cJSON_8h.html#ac76cea59d438ba893d2f82aabb367d14">item</a>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <a class="code" href="cJSON_8h.html#ac76cea59d438ba893d2f82aabb367d14">item</a> = <a class="code" href="singlylinkedlist_8c.html#a49c10339cc9944b7a7028c25b557f1ef">singlylinkedlist_get_next_item</a>(<a class="code" href="cJSON_8h.html#ac76cea59d438ba893d2f82aabb367d14">item</a>);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#a146c21d68c41777d20ef1f7e30518505">Lock</a>(savedData-&gt;lockGarbage) != LOCK_OK)</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;unable to Lock&quot;</span>);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        }</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            <span class="keywordflow">if</span> (savedData-&gt;canBeGarbageCollected == 1)</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                <span class="keywordtype">int</span> notUsed;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="threadapi_8c.html#aa80bce4748cbe10f4b726f2ea3168609">ThreadAPI_Join</a>(savedData-&gt;uploadingThreadHandle, &amp;notUsed) != THREADAPI_OK)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                    <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;unable to ThreadAPI_Join&quot;</span>);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="singlylinkedlist_8c.html#a4989115eb394f221a8af5db9a2873d1b">singlylinkedlist_remove</a>(iotHubClientInstance-&gt;savedDataToBeCleaned, old_item);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>((<span class="keywordtype">void</span>*)savedData-&gt;source);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>((<span class="keywordtype">void</span>*)savedData-&gt;destinationFileName);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#aef3dd970e9edfc49b414aa6cb0f3ad84">Unlock</a>(savedData-&gt;lockGarbage) != LOCK_OK)</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                    <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;unable to unlock after locking&quot;</span>);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="lock_8c.html#ac9743d97f19aac4a0bda808e57ef1249">Lock_Deinit</a>(savedData-&gt;lockGarbage);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>((<span class="keywordtype">void</span>*)savedData);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#aef3dd970e9edfc49b414aa6cb0f3ad84">Unlock</a>(savedData-&gt;lockGarbage) != LOCK_OK)</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                    <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;unable to unlock after locking&quot;</span>);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;}</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> iothub_ll_message_callback(<a class="code" href="structMESSAGE__CALLBACK__INFO__TAG.html">MESSAGE_CALLBACK_INFO</a>* messageData, <span class="keywordtype">void</span>* userContextCallback)</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;{</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordtype">bool</span> result;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>* queue_context = (<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>*)userContextCallback;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">if</span> (queue_context == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;invalid parameter userContextCallback(NULL)&quot;</span>);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <a class="code" href="structUSER__CALLBACK__INFO__TAG.html">USER_CALLBACK_INFO</a> queue_cb_info;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        queue_cb_info.<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#acc98d50b9ccd3892732e7627e73c0bf2">type</a> = CALLBACK_TYPE_MESSAGE;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        queue_cb_info.<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#ac9ef9a196e06f36dfbd3bb7cc03e8979">userContextCallback</a> = queue_context-&gt;<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a1684554928b9033a4b3a3df07809f77b">userContextCallback</a>;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        queue_cb_info.<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a6a747cd66461654e3d1529ca52feb478">message_cb_info</a> = messageData;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c.html#afb603bc9590ad55494446761fd83f179">VECTOR_push_back</a>(queue_context-&gt;<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a0c3e332401f120f3c28a97b9e5f9e584">iotHubClientHandle</a>-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3c7b086b1b96eb49ae2a4a67530746f9">saved_user_callback_list</a>, &amp;queue_cb_info, 1) == 0)</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        }</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;message callback vector push failed.&quot;</span>);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;}</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> make_method_calback_queue_context(<a class="code" href="structUSER__CALLBACK__INFO__TAG.html">USER_CALLBACK_INFO</a>* queue_cb_info, <span class="keyword">const</span> <span class="keywordtype">char</span>* method_name, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* payload, <span class="keywordtype">size_t</span> <a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a>, <a class="code" href="iothub__transport__ll_8h.html#a1cc79695294f89e97fb945066a3b3d77">METHOD_HANDLE</a> method_id, <a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>* queue_context)</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;{</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordtype">int</span> result;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="comment">/* Codes_SRS_IOTHUB_MQTT_TRANSPORT_07_002: [ IOTHUB_CLIENT_INBOUND_DEVICE_METHOD_CALLBACK shall copy the method_name and payload. ] */</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    queue_cb_info-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#ac9ef9a196e06f36dfbd3bb7cc03e8979">userContextCallback</a> = queue_context-&gt;<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a1684554928b9033a4b3a3df07809f77b">userContextCallback</a>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    queue_cb_info-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ac76016558a82ef4f252e2f0b427e53df">method_cb_info</a>.<a class="code" href="structMETHOD__CALLBACK__INFO__TAG.html#aeec0712a3ac1da4bc99215650a9630ab">method_id</a> = method_id;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">if</span> ((queue_cb_info-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ac76016558a82ef4f252e2f0b427e53df">method_cb_info</a>.<a class="code" href="structMETHOD__CALLBACK__INFO__TAG.html#a9ba1702222c78679def85ecd451731c3">method_name</a> = <a class="code" href="strings_8c.html#ad091a0c95f3dcf64d9f0c242744b464d">STRING_construct</a>(method_name)) == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="comment">/* Codes_SRS_IOTHUB_MQTT_TRANSPORT_07_003: [ If a failure is encountered IOTHUB_CLIENT_INBOUND_DEVICE_METHOD_CALLBACK shall return a non-NULL value. ]*/</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;STRING_construct failed&quot;</span>);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        result = <a class="code" href="macro__utils_8h.html#aa8c798c7579b5c5a23a87b213f9accd6">__FAILURE__</a>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="keywordflow">if</span> ((queue_cb_info-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ac76016558a82ef4f252e2f0b427e53df">method_cb_info</a>.<a class="code" href="structMETHOD__CALLBACK__INFO__TAG.html#af376724de938122fa0cff9d89286cb00">payload</a> = <a class="code" href="buffer_8c.html#a768b64763882b3bafe34f9b0c28726e2">BUFFER_create</a>(payload, <a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a>)) == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            <a class="code" href="strings_8c.html#a14f1a6a01de229149d3810d4d06816a2">STRING_delete</a>(queue_cb_info-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ac76016558a82ef4f252e2f0b427e53df">method_cb_info</a>.<a class="code" href="structMETHOD__CALLBACK__INFO__TAG.html#a9ba1702222c78679def85ecd451731c3">method_name</a>);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <span class="comment">/* Codes_SRS_IOTHUB_MQTT_TRANSPORT_07_003: [ If a failure is encountered IOTHUB_CLIENT_INBOUND_DEVICE_METHOD_CALLBACK shall return a non-NULL value. ]*/</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;BUFFER_create failed&quot;</span>);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            result = <a class="code" href="macro__utils_8h.html#aa8c798c7579b5c5a23a87b213f9accd6">__FAILURE__</a>;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c.html#afb603bc9590ad55494446761fd83f179">VECTOR_push_back</a>(queue_context-&gt;<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a0c3e332401f120f3c28a97b9e5f9e584">iotHubClientHandle</a>-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3c7b086b1b96eb49ae2a4a67530746f9">saved_user_callback_list</a>, queue_cb_info, 1) == 0)</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                result = 0;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            }</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                <a class="code" href="strings_8c.html#a14f1a6a01de229149d3810d4d06816a2">STRING_delete</a>(queue_cb_info-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ac76016558a82ef4f252e2f0b427e53df">method_cb_info</a>.<a class="code" href="structMETHOD__CALLBACK__INFO__TAG.html#a9ba1702222c78679def85ecd451731c3">method_name</a>);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                <a class="code" href="buffer_8c.html#a298682f1e91e58ad5c8e8e50d9bf235d">BUFFER_delete</a>(queue_cb_info-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ac76016558a82ef4f252e2f0b427e53df">method_cb_info</a>.<a class="code" href="structMETHOD__CALLBACK__INFO__TAG.html#af376724de938122fa0cff9d89286cb00">payload</a>);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                <span class="comment">/* Codes_SRS_IOTHUB_MQTT_TRANSPORT_07_003: [ If a failure is encountered IOTHUB_CLIENT_INBOUND_DEVICE_METHOD_CALLBACK shall return a non-NULL value. ]*/</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;VECTOR_push_back failed&quot;</span>);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                result = <a class="code" href="macro__utils_8h.html#aa8c798c7579b5c5a23a87b213f9accd6">__FAILURE__</a>;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;}</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> iothub_ll_device_method_callback(<span class="keyword">const</span> <span class="keywordtype">char</span>* method_name, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* payload, <span class="keywordtype">size_t</span> <a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a>, <a class="code" href="iothub__transport__ll_8h.html#a1cc79695294f89e97fb945066a3b3d77">METHOD_HANDLE</a> method_id, <span class="keywordtype">void</span>* userContextCallback)</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;{</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordtype">int</span> result;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="comment">/* Codes_SRS_IOTHUB_MQTT_TRANSPORT_07_001: [ if userContextCallback is NULL, IOTHUB_CLIENT_INBOUND_DEVICE_METHOD_CALLBACK shall return a nonNULL value. ] */</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">if</span> (userContextCallback == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;invalid parameter userContextCallback(NULL)&quot;</span>);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        result = <a class="code" href="macro__utils_8h.html#aa8c798c7579b5c5a23a87b213f9accd6">__FAILURE__</a>;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>* queue_context = (<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>*)userContextCallback;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <a class="code" href="structUSER__CALLBACK__INFO__TAG.html">USER_CALLBACK_INFO</a> queue_cb_info;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        queue_cb_info.<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#acc98d50b9ccd3892732e7627e73c0bf2">type</a> = CALLBACK_TYPE_DEVICE_METHOD;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        result = make_method_calback_queue_context(&amp;queue_cb_info, method_name, payload, <a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a>, method_id, queue_context);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="keywordflow">if</span> (result != 0)</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;construction of method calback queue context failed&quot;</span>);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            result = <a class="code" href="macro__utils_8h.html#aa8c798c7579b5c5a23a87b213f9accd6">__FAILURE__</a>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;}</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> iothub_ll_inbound_device_method_callback(<span class="keyword">const</span> <span class="keywordtype">char</span>* method_name, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* payload, <span class="keywordtype">size_t</span> <a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a>, <a class="code" href="iothub__transport__ll_8h.html#a1cc79695294f89e97fb945066a3b3d77">METHOD_HANDLE</a> method_id, <span class="keywordtype">void</span>* userContextCallback)</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;{</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordtype">int</span> result;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">/* Codes_SRS_IOTHUB_MQTT_TRANSPORT_07_001: [ if userContextCallback is NULL, IOTHUB_CLIENT_INBOUND_DEVICE_METHOD_CALLBACK shall return a nonNULL value. ] */</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">if</span> (userContextCallback == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;invalid parameter userContextCallback(NULL)&quot;</span>);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        result = <a class="code" href="macro__utils_8h.html#aa8c798c7579b5c5a23a87b213f9accd6">__FAILURE__</a>;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>* queue_context = (<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>*)userContextCallback;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <a class="code" href="structUSER__CALLBACK__INFO__TAG.html">USER_CALLBACK_INFO</a> queue_cb_info;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        queue_cb_info.<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#acc98d50b9ccd3892732e7627e73c0bf2">type</a> = CALLBACK_TYPE_INBOUD_DEVICE_METHOD;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        result = make_method_calback_queue_context(&amp;queue_cb_info, method_name, payload, <a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a>, method_id, queue_context);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">if</span> (result != 0)</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;construction of method calback queue context failed&quot;</span>);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            result = <a class="code" href="macro__utils_8h.html#aa8c798c7579b5c5a23a87b213f9accd6">__FAILURE__</a>;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        }</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;}</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> iothub_ll_connection_status_callback(IOTHUB_CLIENT_CONNECTION_STATUS result, IOTHUB_CLIENT_CONNECTION_STATUS_REASON <a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a9642942062a0c88c684a2bb3289aa738">reason</a>, <span class="keywordtype">void</span>* userContextCallback)</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;{</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>* queue_context = (<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>*)userContextCallback;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">if</span> (queue_context != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <a class="code" href="structUSER__CALLBACK__INFO__TAG.html">USER_CALLBACK_INFO</a> queue_cb_info;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        queue_cb_info.<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#acc98d50b9ccd3892732e7627e73c0bf2">type</a> = CALLBACK_TYPE_CONNECTION_STATUS;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        queue_cb_info.<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#ac9ef9a196e06f36dfbd3bb7cc03e8979">userContextCallback</a> = queue_context-&gt;<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a1684554928b9033a4b3a3df07809f77b">userContextCallback</a>;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        queue_cb_info.<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ab8cc1695811d84be2d6d65dff4faa2be">connection_status_cb_info</a>.<a class="code" href="structCONNECTION__STATUS__CALLBACK__INFO__TAG.html#a9263849bc574c4df644ef66c5a1663b6">status_reason</a> = <a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a9642942062a0c88c684a2bb3289aa738">reason</a>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        queue_cb_info.<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ab8cc1695811d84be2d6d65dff4faa2be">connection_status_cb_info</a>.<a class="code" href="structCONNECTION__STATUS__CALLBACK__INFO__TAG.html#ac7a7e6f71125e22fe542bf756f853c47">connection_status</a> = result;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c.html#afb603bc9590ad55494446761fd83f179">VECTOR_push_back</a>(queue_context-&gt;<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a0c3e332401f120f3c28a97b9e5f9e584">iotHubClientHandle</a>-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3c7b086b1b96eb49ae2a4a67530746f9">saved_user_callback_list</a>, &amp;queue_cb_info, 1) != 0)</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;connection status callback vector push failed.&quot;</span>);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;}</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> iothub_ll_event_confirm_callback(IOTHUB_CLIENT_CONFIRMATION_RESULT result, <span class="keywordtype">void</span>* userContextCallback)</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;{</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>* queue_context = (<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>*)userContextCallback;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">if</span> (queue_context != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <a class="code" href="structUSER__CALLBACK__INFO__TAG.html">USER_CALLBACK_INFO</a> queue_cb_info;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        queue_cb_info.<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#acc98d50b9ccd3892732e7627e73c0bf2">type</a> = CALLBACK_TYPE_EVENT_CONFIRM;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        queue_cb_info.<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#ac9ef9a196e06f36dfbd3bb7cc03e8979">userContextCallback</a> = queue_context-&gt;<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a1684554928b9033a4b3a3df07809f77b">userContextCallback</a>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        queue_cb_info.<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a995c2127121d749bc63ad2b7c2091f6a">event_confirm_cb_info</a>.<a class="code" href="structEVENT__CONFIRM__CALLBACK__INFO__TAG.html#a57334a5ffaa4e1863ab52fe1b2f8dcba">confirm_result</a> = result;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c.html#afb603bc9590ad55494446761fd83f179">VECTOR_push_back</a>(queue_context-&gt;<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a0c3e332401f120f3c28a97b9e5f9e584">iotHubClientHandle</a>-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3c7b086b1b96eb49ae2a4a67530746f9">saved_user_callback_list</a>, &amp;queue_cb_info, 1) != 0)</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;event confirm callback vector push failed.&quot;</span>);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(queue_context);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;}</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160; </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> iothub_ll_reported_state_callback(<span class="keywordtype">int</span> status_code, <span class="keywordtype">void</span>* userContextCallback)</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;{</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>* queue_context = (<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>*)userContextCallback;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">if</span> (queue_context != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <a class="code" href="structUSER__CALLBACK__INFO__TAG.html">USER_CALLBACK_INFO</a> queue_cb_info;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        queue_cb_info.<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#acc98d50b9ccd3892732e7627e73c0bf2">type</a> = CALLBACK_TYPE_REPORTED_STATE;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        queue_cb_info.<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#ac9ef9a196e06f36dfbd3bb7cc03e8979">userContextCallback</a> = queue_context-&gt;<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a1684554928b9033a4b3a3df07809f77b">userContextCallback</a>;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        queue_cb_info.<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a85bf3c7a28fb18221a0ad3b108aa648f">reported_state_cb_info</a>.<a class="code" href="structREPORTED__STATE__CALLBACK__INFO__TAG.html#a2d8e9706e26dbcb0fa8cfb727eec2c4b">status_code</a> = status_code;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c.html#afb603bc9590ad55494446761fd83f179">VECTOR_push_back</a>(queue_context-&gt;<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a0c3e332401f120f3c28a97b9e5f9e584">iotHubClientHandle</a>-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3c7b086b1b96eb49ae2a4a67530746f9">saved_user_callback_list</a>, &amp;queue_cb_info, 1) != 0)</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;reported state callback vector push failed.&quot;</span>);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        }</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(queue_context);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;}</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160; </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> iothub_ll_device_twin_callback(DEVICE_TWIN_UPDATE_STATE update_state, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* payLoad, <span class="keywordtype">size_t</span> <a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a>, <span class="keywordtype">void</span>* userContextCallback)</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;{</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>* queue_context = (<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>*)userContextCallback;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">if</span> (queue_context != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="keywordtype">int</span> push_to_vector;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <a class="code" href="structUSER__CALLBACK__INFO__TAG.html">USER_CALLBACK_INFO</a> queue_cb_info;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        queue_cb_info.<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#acc98d50b9ccd3892732e7627e73c0bf2">type</a> = CALLBACK_TYPE_DEVICE_TWIN;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        queue_cb_info.<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#ac9ef9a196e06f36dfbd3bb7cc03e8979">userContextCallback</a> = queue_context-&gt;<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a1684554928b9033a4b3a3df07809f77b">userContextCallback</a>;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        queue_cb_info.<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a22af3d3a1fb308e53e132f54f80a8a0e">dev_twin_cb_info</a>.<a class="code" href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html#a3116824aac4189019797b4f6de4afff6">update_state</a> = update_state;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keywordflow">if</span> (payLoad == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            queue_cb_info.<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a22af3d3a1fb308e53e132f54f80a8a0e">dev_twin_cb_info</a>.<a class="code" href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html#a6160cbc2ae0492baf707ef7d97808f8e">payLoad</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            queue_cb_info.<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a22af3d3a1fb308e53e132f54f80a8a0e">dev_twin_cb_info</a>.<a class="code" href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html#a809aa23bb29e52a042b588d83428c7e1">size</a> = 0;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            push_to_vector = 0;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            queue_cb_info.<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a22af3d3a1fb308e53e132f54f80a8a0e">dev_twin_cb_info</a>.<a class="code" href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html#a6160cbc2ae0492baf707ef7d97808f8e">payLoad</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)<a class="code" href="unity__fixture__malloc__overrides_8h.html#acf143577800376dd931c059ecc61ba06">malloc</a>(<a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a>);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            <span class="keywordflow">if</span> (queue_cb_info.<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a22af3d3a1fb308e53e132f54f80a8a0e">dev_twin_cb_info</a>.<a class="code" href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html#a6160cbc2ae0492baf707ef7d97808f8e">payLoad</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;failure allocating payload in device twin callback.&quot;</span>);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                queue_cb_info.<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a22af3d3a1fb308e53e132f54f80a8a0e">dev_twin_cb_info</a>.<a class="code" href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html#a809aa23bb29e52a042b588d83428c7e1">size</a> = 0;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                push_to_vector = <a class="code" href="macro__utils_8h.html#aa8c798c7579b5c5a23a87b213f9accd6">__FAILURE__</a>;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            }</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)memcpy(queue_cb_info.<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a22af3d3a1fb308e53e132f54f80a8a0e">dev_twin_cb_info</a>.<a class="code" href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html#a6160cbc2ae0492baf707ef7d97808f8e">payLoad</a>, payLoad, <a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a>);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                queue_cb_info.<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a22af3d3a1fb308e53e132f54f80a8a0e">dev_twin_cb_info</a>.<a class="code" href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html#a809aa23bb29e52a042b588d83428c7e1">size</a> = <a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a>;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                push_to_vector = 0;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keywordflow">if</span> (push_to_vector == 0)</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c.html#afb603bc9590ad55494446761fd83f179">VECTOR_push_back</a>(queue_context-&gt;<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a0c3e332401f120f3c28a97b9e5f9e584">iotHubClientHandle</a>-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3c7b086b1b96eb49ae2a4a67530746f9">saved_user_callback_list</a>, &amp;queue_cb_info, 1) != 0)</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                <span class="keywordflow">if</span> (queue_cb_info.<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a22af3d3a1fb308e53e132f54f80a8a0e">dev_twin_cb_info</a>.<a class="code" href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html#a6160cbc2ae0492baf707ef7d97808f8e">payLoad</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                    <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(queue_cb_info.<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a22af3d3a1fb308e53e132f54f80a8a0e">dev_twin_cb_info</a>.<a class="code" href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html#a6160cbc2ae0492baf707ef7d97808f8e">payLoad</a>);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;device twin callback userContextCallback vector push failed.&quot;</span>);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    }</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;device twin callback userContextCallback NULL&quot;</span>);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    }</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;}</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> dispatch_user_callbacks(<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>* iotHubClientInstance, <a class="code" href="structVECTOR__TAG.html">VECTOR_HANDLE</a> call_backs)</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;{</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordtype">size_t</span> callbacks_length = <a class="code" href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c.html#ac795f6438412ff56cd110ac3308c87e5">VECTOR_size</a>(call_backs);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="cJSON_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="cJSON_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = 0; <a class="code" href="cJSON_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &lt; callbacks_length; <a class="code" href="cJSON_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>++)</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <a class="code" href="structUSER__CALLBACK__INFO__TAG.html">USER_CALLBACK_INFO</a>* queued_cb = (<a class="code" href="structUSER__CALLBACK__INFO__TAG.html">USER_CALLBACK_INFO</a>*)<a class="code" href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c.html#a54e4d6709ddbb04124ce9d0ba39dba83">VECTOR_element</a>(call_backs, <a class="code" href="cJSON_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="keywordflow">if</span> (queued_cb == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;VECTOR_element at index %zd is NULL.&quot;</span>, <a class="code" href="cJSON_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        }</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <span class="keywordflow">switch</span> (queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#acc98d50b9ccd3892732e7627e73c0bf2">type</a>)</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                <span class="keywordflow">case</span> CALLBACK_TYPE_DEVICE_TWIN:</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                {</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                    <a class="code" href="iothub__client__ll_8h.html#a3020471f05025405840d9c43466122dc">IOTHUB_CLIENT_DEVICE_TWIN_CALLBACK</a> desired_state_callback;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#a146c21d68c41777d20ef1f7e30518505">Lock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>) != LOCK_OK)</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                    {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;failed locking for dispatch_user_callbacks&quot;</span>);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                        desired_state_callback = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                    }</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                    {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                        desired_state_callback = iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a4a48a863612c79a2d974e1809c2c4443">desired_state_callback</a>;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                        (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="lock_8c.html#aef3dd970e9edfc49b414aa6cb0f3ad84">Unlock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                    }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                    <span class="keywordflow">if</span> (desired_state_callback)</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                    {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                        desired_state_callback(queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a22af3d3a1fb308e53e132f54f80a8a0e">dev_twin_cb_info</a>.<a class="code" href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html#a3116824aac4189019797b4f6de4afff6">update_state</a>, queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a22af3d3a1fb308e53e132f54f80a8a0e">dev_twin_cb_info</a>.<a class="code" href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html#a6160cbc2ae0492baf707ef7d97808f8e">payLoad</a>, queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a22af3d3a1fb308e53e132f54f80a8a0e">dev_twin_cb_info</a>.<a class="code" href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html#a809aa23bb29e52a042b588d83428c7e1">size</a>, queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#ac9ef9a196e06f36dfbd3bb7cc03e8979">userContextCallback</a>);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                    }</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                    <span class="keywordflow">if</span> (queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a22af3d3a1fb308e53e132f54f80a8a0e">dev_twin_cb_info</a>.<a class="code" href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html#a6160cbc2ae0492baf707ef7d97808f8e">payLoad</a>)</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                    {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a22af3d3a1fb308e53e132f54f80a8a0e">dev_twin_cb_info</a>.<a class="code" href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html#a6160cbc2ae0492baf707ef7d97808f8e">payLoad</a>);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                    }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                <span class="keywordflow">case</span> CALLBACK_TYPE_EVENT_CONFIRM:</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                    <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ab13e6a9fcb8fa8587c92e98122474b56">event_confirm_callback</a>)</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                    {</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                        iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ab13e6a9fcb8fa8587c92e98122474b56">event_confirm_callback</a>(queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a995c2127121d749bc63ad2b7c2091f6a">event_confirm_cb_info</a>.<a class="code" href="structEVENT__CONFIRM__CALLBACK__INFO__TAG.html#a57334a5ffaa4e1863ab52fe1b2f8dcba">confirm_result</a>, queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#ac9ef9a196e06f36dfbd3bb7cc03e8979">userContextCallback</a>);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                    }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                <span class="keywordflow">case</span> CALLBACK_TYPE_REPORTED_STATE:</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                    <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#af56890dbbf4752da02a880eda602a1b4">reported_state_callback</a>)</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                    {</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                        iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#af56890dbbf4752da02a880eda602a1b4">reported_state_callback</a>(queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a85bf3c7a28fb18221a0ad3b108aa648f">reported_state_cb_info</a>.<a class="code" href="structREPORTED__STATE__CALLBACK__INFO__TAG.html#a2d8e9706e26dbcb0fa8cfb727eec2c4b">status_code</a>, queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#ac9ef9a196e06f36dfbd3bb7cc03e8979">userContextCallback</a>);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                    }</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                <span class="keywordflow">case</span> CALLBACK_TYPE_CONNECTION_STATUS:</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                    <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#af2e37951e6519740b732c39d24625b6c">connection_status_callback</a>)</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                    {</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                        iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#af2e37951e6519740b732c39d24625b6c">connection_status_callback</a>(queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ab8cc1695811d84be2d6d65dff4faa2be">connection_status_cb_info</a>.<a class="code" href="structCONNECTION__STATUS__CALLBACK__INFO__TAG.html#ac7a7e6f71125e22fe542bf756f853c47">connection_status</a>, queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ab8cc1695811d84be2d6d65dff4faa2be">connection_status_cb_info</a>.<a class="code" href="structCONNECTION__STATUS__CALLBACK__INFO__TAG.html#a9263849bc574c4df644ef66c5a1663b6">status_reason</a>, queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#ac9ef9a196e06f36dfbd3bb7cc03e8979">userContextCallback</a>);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                    }</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                <span class="keywordflow">case</span> CALLBACK_TYPE_DEVICE_METHOD:</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                    <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a0b135b5f5e01f2e2dafe0e77229f0f19">device_method_callback</a>)</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                    {</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">char</span>* method_name = <a class="code" href="strings_8c.html#a351a84891e778e497c7eafa76bd02cd0">STRING_c_str</a>(queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ac76016558a82ef4f252e2f0b427e53df">method_cb_info</a>.<a class="code" href="structMETHOD__CALLBACK__INFO__TAG.html#a9ba1702222c78679def85ecd451731c3">method_name</a>);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* payload = <a class="code" href="buffer_8c.html#aab70309b34abe6a6451ad4b7db135144">BUFFER_u_char</a>(queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ac76016558a82ef4f252e2f0b427e53df">method_cb_info</a>.<a class="code" href="structMETHOD__CALLBACK__INFO__TAG.html#af376724de938122fa0cff9d89286cb00">payload</a>);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                        <span class="keywordtype">size_t</span> payload_len = <a class="code" href="buffer_8c.html#ad958dcfb88df3654971fb5d1648bdcff">BUFFER_length</a>(queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ac76016558a82ef4f252e2f0b427e53df">method_cb_info</a>.<a class="code" href="structMETHOD__CALLBACK__INFO__TAG.html#af376724de938122fa0cff9d89286cb00">payload</a>);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* payload_resp = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                        <span class="keywordtype">size_t</span> response_size = 0;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                        <span class="keywordtype">int</span> <a class="code" href="namespacegen__esp32part.html#a614575e8b56274b0a0bafca473224e5e">status</a> = iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a0b135b5f5e01f2e2dafe0e77229f0f19">device_method_callback</a>(method_name, payload, payload_len, &amp;payload_resp, &amp;response_size, queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#ac9ef9a196e06f36dfbd3bb7cc03e8979">userContextCallback</a>);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                        <span class="keywordflow">if</span> (payload_resp &amp;&amp; (response_size &gt; 0))</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                        {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                            <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_HANDLE</a> handle = iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a20fd565795802e8d1bb855017506d7c9">method_user_context</a>-&gt;<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a0c3e332401f120f3c28a97b9e5f9e584">iotHubClientHandle</a>;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                            IOTHUB_CLIENT_RESULT result = <a class="code" href="iothub__client_8c.html#ac0a1c0eb5e56083337bbc742b0fe4abb">IoTHubClient_DeviceMethodResponse</a>(handle, queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ac76016558a82ef4f252e2f0b427e53df">method_cb_info</a>.<a class="code" href="structMETHOD__CALLBACK__INFO__TAG.html#aeec0712a3ac1da4bc99215650a9630ab">method_id</a>, (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)payload_resp, response_size, <a class="code" href="namespacegen__esp32part.html#a614575e8b56274b0a0bafca473224e5e">status</a>);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                            <span class="keywordflow">if</span> (result != IOTHUB_CLIENT_OK)</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                            {</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;IoTHubClient_LL_DeviceMethodResponse failed&quot;</span>);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                            }</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                        }</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                        <a class="code" href="buffer_8c.html#a298682f1e91e58ad5c8e8e50d9bf235d">BUFFER_delete</a>(queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ac76016558a82ef4f252e2f0b427e53df">method_cb_info</a>.<a class="code" href="structMETHOD__CALLBACK__INFO__TAG.html#af376724de938122fa0cff9d89286cb00">payload</a>);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                        <a class="code" href="strings_8c.html#a14f1a6a01de229149d3810d4d06816a2">STRING_delete</a>(queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ac76016558a82ef4f252e2f0b427e53df">method_cb_info</a>.<a class="code" href="structMETHOD__CALLBACK__INFO__TAG.html#a9ba1702222c78679def85ecd451731c3">method_name</a>);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                        </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                        <span class="keywordflow">if</span> (payload_resp)</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                        {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                            <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(payload_resp);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                        }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                    }</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                <span class="keywordflow">case</span> CALLBACK_TYPE_INBOUD_DEVICE_METHOD:</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                    <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a58ae45dac433e034d7f8a394abd7ebfa">inbound_device_method_callback</a>)</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                    {</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">char</span>* method_name = <a class="code" href="strings_8c.html#a351a84891e778e497c7eafa76bd02cd0">STRING_c_str</a>(queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ac76016558a82ef4f252e2f0b427e53df">method_cb_info</a>.<a class="code" href="structMETHOD__CALLBACK__INFO__TAG.html#a9ba1702222c78679def85ecd451731c3">method_name</a>);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* payload = <a class="code" href="buffer_8c.html#aab70309b34abe6a6451ad4b7db135144">BUFFER_u_char</a>(queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ac76016558a82ef4f252e2f0b427e53df">method_cb_info</a>.<a class="code" href="structMETHOD__CALLBACK__INFO__TAG.html#af376724de938122fa0cff9d89286cb00">payload</a>);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                        <span class="keywordtype">size_t</span> payload_len = <a class="code" href="buffer_8c.html#ad958dcfb88df3654971fb5d1648bdcff">BUFFER_length</a>(queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ac76016558a82ef4f252e2f0b427e53df">method_cb_info</a>.<a class="code" href="structMETHOD__CALLBACK__INFO__TAG.html#af376724de938122fa0cff9d89286cb00">payload</a>);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160; </div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                        iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a58ae45dac433e034d7f8a394abd7ebfa">inbound_device_method_callback</a>(method_name, payload, payload_len, queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ac76016558a82ef4f252e2f0b427e53df">method_cb_info</a>.<a class="code" href="structMETHOD__CALLBACK__INFO__TAG.html#aeec0712a3ac1da4bc99215650a9630ab">method_id</a>, queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#ac9ef9a196e06f36dfbd3bb7cc03e8979">userContextCallback</a>);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160; </div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                        <a class="code" href="buffer_8c.html#a298682f1e91e58ad5c8e8e50d9bf235d">BUFFER_delete</a>(queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ac76016558a82ef4f252e2f0b427e53df">method_cb_info</a>.<a class="code" href="structMETHOD__CALLBACK__INFO__TAG.html#af376724de938122fa0cff9d89286cb00">payload</a>);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                        <a class="code" href="strings_8c.html#a14f1a6a01de229149d3810d4d06816a2">STRING_delete</a>(queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ac76016558a82ef4f252e2f0b427e53df">method_cb_info</a>.<a class="code" href="structMETHOD__CALLBACK__INFO__TAG.html#a9ba1702222c78679def85ecd451731c3">method_name</a>);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                    }</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                <span class="keywordflow">case</span> CALLBACK_TYPE_MESSAGE:</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                    <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ac778ef2ee110489a4bb4972571684b68">message_callback</a>)</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                    {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                        IOTHUBMESSAGE_DISPOSITION_RESULT disposition = iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ac778ef2ee110489a4bb4972571684b68">message_callback</a>(queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a6a747cd66461654e3d1529ca52feb478">message_cb_info</a>-&gt;<a class="code" href="structMESSAGE__CALLBACK__INFO__TAG.html#a236b601a4e8c04102c63c85317fde8de">messageHandle</a>, queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#ac9ef9a196e06f36dfbd3bb7cc03e8979">userContextCallback</a>);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                        <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_HANDLE</a> handle = iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#aeba8103aeb06c8281a54013d644b7b30">message_user_context</a>-&gt;<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a0c3e332401f120f3c28a97b9e5f9e584">iotHubClientHandle</a>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160; </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#a146c21d68c41777d20ef1f7e30518505">Lock</a>(handle-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>) == LOCK_OK)</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                        {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                            IOTHUB_CLIENT_RESULT result = <a class="code" href="iothub__client__ll_8c.html#a252782e5cbee79b22e8ff15885cd2018">IoTHubClient_LL_SendMessageDisposition</a>(handle-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a>, queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a6a747cd66461654e3d1529ca52feb478">message_cb_info</a>, disposition);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                            (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="lock_8c.html#aef3dd970e9edfc49b414aa6cb0f3ad84">Unlock</a>(handle-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                            <span class="keywordflow">if</span> (result != IOTHUB_CLIENT_OK)</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                            {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;IoTHubClient_LL_SendMessageDisposition failed&quot;</span>);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                            }</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                        }</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                        {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Lock failed&quot;</span>);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                        }</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                    }</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                    <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Invalid callback type &#39;%s&#39;&quot;</span>, <a class="code" href="macro__utils_8h.html#a25551e3ff0e5f7d2457ddf9c155a87c5">ENUM_TO_STRING</a>(USER_CALLBACK_TYPE, queued_cb-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#acc98d50b9ccd3892732e7627e73c0bf2">type</a>));</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            }</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        }</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    }</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <a class="code" href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c.html#adac47be23934ebd7378976c14881466f">VECTOR_destroy</a>(call_backs);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;}</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> ScheduleWork_Thread_ForMultiplexing(<span class="keywordtype">void</span>* iotHubClientHandle)</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;{</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>* iotHubClientInstance = (<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>*)iotHubClientHandle;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160; </div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="preprocessor">#ifdef USE_UPLOADTOBLOB</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    garbageCollectorImpl(iotHubClientInstance);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#a146c21d68c41777d20ef1f7e30518505">Lock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>) == LOCK_OK)</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    {</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <a class="code" href="structVECTOR__TAG.html">VECTOR_HANDLE</a> call_backs = <a class="code" href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c.html#a43922d2256109b20be39b4702fc26209">VECTOR_move</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3c7b086b1b96eb49ae2a4a67530746f9">saved_user_callback_list</a>);</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="lock_8c.html#aef3dd970e9edfc49b414aa6cb0f3ad84">Unlock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160; </div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="keywordflow">if</span> (call_backs == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        {</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Failed moving user callbacks&quot;</span>);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        }</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            dispatch_user_callbacks(iotHubClientInstance, call_backs);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        }</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    }</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    {</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;failed locking for ScheduleWork_Thread_ForMultiplexing&quot;</span>);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    }</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;}</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160; </div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> ScheduleWork_Thread(<span class="keywordtype">void</span>* threadArgument)</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;{</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>* iotHubClientInstance = (<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>*)threadArgument;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160; </div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">while</span> (1)</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    {</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#a146c21d68c41777d20ef1f7e30518505">Lock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>) == LOCK_OK)</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        {</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            <span class="comment">/*Codes_SRS_IOTHUBCLIENT_01_038: [ The thread shall exit when IoTHubClient_Destroy is called. ]*/</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a83429a62cb7730444f275464b09703c5">StopThread</a>)</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            {</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="lock_8c.html#aef3dd970e9edfc49b414aa6cb0f3ad84">Unlock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                <span class="keywordflow">break</span>; <span class="comment">/*gets out of the thread*/</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            }</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            {</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_037: [The thread created by IoTHubClient_SendEvent or IoTHubClient_SetMessageCallback shall call IoTHubClient_LL_DoWork every 1 ms.] */</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_039: [All calls to IoTHubClient_LL_DoWork shall be protected by the lock created in IotHubClient_Create.] */</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                <a class="code" href="iothub__client__ll_8c.html#af5e5e122bdc1f1228ae2116fc158b3d6">IoTHubClient_LL_DoWork</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a>);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="preprocessor">#ifdef USE_UPLOADTOBLOB</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                garbageCollectorImpl(iotHubClientInstance);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                <a class="code" href="structVECTOR__TAG.html">VECTOR_HANDLE</a> call_backs = <a class="code" href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c.html#a43922d2256109b20be39b4702fc26209">VECTOR_move</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3c7b086b1b96eb49ae2a4a67530746f9">saved_user_callback_list</a>);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="lock_8c.html#aef3dd970e9edfc49b414aa6cb0f3ad84">Unlock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                <span class="keywordflow">if</span> (call_backs == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                    <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;VECTOR_move failed&quot;</span>);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                }</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                    dispatch_user_callbacks(iotHubClientInstance, call_backs);</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                }</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        {</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            <span class="comment">/*Codes_SRS_IOTHUBCLIENT_01_040: [If acquiring the lock fails, IoTHubClient_LL_DoWork shall not be called.]*/</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            <span class="comment">/*no code, shall retry*/</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        }</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="threadapi_8c.html#a9ce3ec671e3aa3ca28a3e93c514dac56">ThreadAPI_Sleep</a>(1);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160; </div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <a class="code" href="threadapi_8c.html#a304fd6867f922d6321f36569d1769d04">ThreadAPI_Exit</a>(0);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;}</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="keyword">static</span> IOTHUB_CLIENT_RESULT StartWorkerThreadIfNeeded(<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>* iotHubClientInstance)</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;{</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    IOTHUB_CLIENT_RESULT result;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a7f8a1a6bc50a5e0371f2587f89c9b8fe">TransportHandle</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a008f33c5da8e26a2cefab8be0f991744">ThreadHandle</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a83429a62cb7730444f275464b09703c5">StopThread</a> = 0;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="threadapi_8c.html#aed50c815f4090261c06968bb90644b50">ThreadAPI_Create</a>(&amp;iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a008f33c5da8e26a2cefab8be0f991744">ThreadHandle</a>, ScheduleWork_Thread, iotHubClientInstance) != THREADAPI_OK)</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;ThreadAPI_Create failed&quot;</span>);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a008f33c5da8e26a2cefab8be0f991744">ThreadHandle</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            }</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            {</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                result = IOTHUB_CLIENT_OK;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            }</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        }</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        {</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            result = IOTHUB_CLIENT_OK;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        }</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    }</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    {</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        <span class="comment">/*Codes_SRS_IOTHUBCLIENT_17_012: [ If the transport connection is shared, the thread shall be started by calling IoTHubTransport_StartWorkerThread. ]*/</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        <span class="comment">/*Codes_SRS_IOTHUBCLIENT_17_011: [ If the transport connection is shared, the thread shall be started by calling IoTHubTransport_StartWorkerThread*/</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        result = <a class="code" href="iothubtransport_8c.html#a65f09a05e5c207636fe3eb3b7b4eb18b">IoTHubTransport_StartWorkerThread</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a7f8a1a6bc50a5e0371f2587f89c9b8fe">TransportHandle</a>, iotHubClientInstance, ScheduleWork_Thread_ForMultiplexing);</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    }</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;}</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160; </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="keyword">static</span> <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>* create_iothub_instance(<span class="keyword">const</span> <a class="code" href="structIOTHUB__CLIENT__CONFIG__TAG.html">IOTHUB_CLIENT_CONFIG</a>* config, <a class="code" href="structTRANSPORT__HANDLE__DATA__TAG.html">TRANSPORT_HANDLE</a> transportHandle, <span class="keyword">const</span> <span class="keywordtype">char</span>* connectionString, <a class="code" href="iothub__client__ll_8h.html#a85d87807cf4e5cc48e62a292007f44cb">IOTHUB_CLIENT_TRANSPORT_PROVIDER</a> protocol)</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;{</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>* result = (<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>*)<a class="code" href="unity__fixture__malloc__overrides_8h.html#acf143577800376dd931c059ecc61ba06">malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>));</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160; </div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_004: [If allocating memory for the new IoTHubClient instance fails, then IoTHubClient_Create shall return NULL.] */</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordflow">if</span> (result != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_029: [IoTHubClient_Create shall create a lock object to be used later for serializing IoTHubClient calls.] */</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        <span class="keywordflow">if</span> ( (result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3c7b086b1b96eb49ae2a4a67530746f9">saved_user_callback_list</a> = <a class="code" href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c.html#adc608e654f8aa1c639275e55f5265090">VECTOR_create</a>(<span class="keyword">sizeof</span>(<a class="code" href="structUSER__CALLBACK__INFO__TAG.html">USER_CALLBACK_INFO</a>)) ) == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        {</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Failed creating VECTOR&quot;</span>);</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(result);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;            result = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        }</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        {</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="preprocessor">#ifdef USE_UPLOADTOBLOB</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            <span class="comment">/*Codes_SRS_IOTHUBCLIENT_02_060: [ IoTHubClient_Create shall create a SINGLYLINKEDLIST_HANDLE containing THREAD_HANDLE (created by future calls to IoTHubClient_UploadToBlobAsync). ]*/</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            <span class="keywordflow">if</span> ((result-&gt;savedDataToBeCleaned = <a class="code" href="singlylinkedlist_8c.html#ab0c5ab1106ca4f392541c044fe8a1f13">singlylinkedlist_create</a>()) == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                <span class="comment">/*Codes_SRS_IOTHUBCLIENT_02_061: [ If creating the SINGLYLINKEDLIST_HANDLE fails then IoTHubClient_Create shall fail and return NULL. ]*/</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;unable to singlylinkedlist_create&quot;</span>);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                <a class="code" href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c.html#adac47be23934ebd7378976c14881466f">VECTOR_destroy</a>(result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3c7b086b1b96eb49ae2a4a67530746f9">saved_user_callback_list</a>);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(result);</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                result = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            }</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            {</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a7f8a1a6bc50a5e0371f2587f89c9b8fe">TransportHandle</a> = transportHandle;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1ba5770cedc73357f700522f34948142">created_with_transport_handle</a> = 0;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                <span class="keywordflow">if</span> (config != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                {</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                    <span class="keywordflow">if</span> (transportHandle != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                    {</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                        <span class="comment">/*Codes_SRS_IOTHUBCLIENT_17_005: [ IoTHubClient_CreateWithTransport shall call IoTHubTransport_GetLock to get the transport lock to be used later for serializing IoTHubClient calls. ]*/</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                        result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a> = <a class="code" href="iothubtransport_8c.html#abebd32e98fd36d58098738024eef0e88">IoTHubTransport_GetLock</a>(transportHandle);</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                        <span class="keywordflow">if</span> (result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                        {</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;unable to IoTHubTransport_GetLock&quot;</span>);</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                            result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                        }</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                        {</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                            <a class="code" href="structIOTHUB__CLIENT__DEVICE__CONFIG__TAG.html">IOTHUB_CLIENT_DEVICE_CONFIG</a> deviceConfig;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                            deviceConfig.<a class="code" href="structIOTHUB__CLIENT__DEVICE__CONFIG__TAG.html#a22d93e063002b89ffdd135d27cd7a9f4">deviceId</a> = config-&gt;<a class="code" href="structIOTHUB__CLIENT__CONFIG__TAG.html#af33000861e1bb43af8e339dee3e689a0">deviceId</a>;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                            deviceConfig.<a class="code" href="structIOTHUB__CLIENT__DEVICE__CONFIG__TAG.html#a9df9aa57a8f63add838501219b132807">deviceKey</a> = config-&gt;<a class="code" href="structIOTHUB__CLIENT__CONFIG__TAG.html#ad030712a97d1d08abb7d38841417fc2d">deviceKey</a>;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                            deviceConfig.<a class="code" href="structIOTHUB__CLIENT__DEVICE__CONFIG__TAG.html#a90dfafc0edcf5c2ca2b8545bae53574a">protocol</a> = config-&gt;<a class="code" href="structIOTHUB__CLIENT__CONFIG__TAG.html#aa7753cf96255b57c65c56d8fedd3d7ca">protocol</a>;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                            deviceConfig.<a class="code" href="structIOTHUB__CLIENT__DEVICE__CONFIG__TAG.html#a0c8fbef5af29d3a701b3a8596511f2b6">deviceSasToken</a> = config-&gt;<a class="code" href="structIOTHUB__CLIENT__CONFIG__TAG.html#a54b2c744ca9f3dbe94d71753ea36d1dc">deviceSasToken</a>;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160; </div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                            <span class="comment">/*Codes_SRS_IOTHUBCLIENT_17_003: [ IoTHubClient_CreateWithTransport shall call IoTHubTransport_GetLLTransport on transportHandle to get lower layer transport. ]*/</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                            deviceConfig.<a class="code" href="structIOTHUB__CLIENT__DEVICE__CONFIG__TAG.html#a5740ef18943a10a7ad1006a09715042a">transportHandle</a> = <a class="code" href="iothubtransport_8c.html#aec0323191dbe96fac49e8c3bae08ef60">IoTHubTransport_GetLLTransport</a>(transportHandle);</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                            <span class="keywordflow">if</span> (deviceConfig.<a class="code" href="structIOTHUB__CLIENT__DEVICE__CONFIG__TAG.html#a5740ef18943a10a7ad1006a09715042a">transportHandle</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                            {</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;unable to IoTHubTransport_GetLLTransport&quot;</span>);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                                result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                            }</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                            {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#a146c21d68c41777d20ef1f7e30518505">Lock</a>(result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>) != LOCK_OK)</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                                {</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                                    <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;unable to Lock&quot;</span>);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                                    result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                                }</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                                {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                                    <span class="comment">/*Codes_SRS_IOTHUBCLIENT_17_007: [ IoTHubClient_CreateWithTransport shall instantiate a new IoTHubClient_LL instance by calling IoTHubClient_LL_CreateWithTransport and passing the lower layer transport and config argument. ]*/</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                                    result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a> = <a class="code" href="iothub__client__ll_8c.html#a5f2ea7dfbb5eeb2510e39a43c92fe61e">IoTHubClient_LL_CreateWithTransport</a>(&amp;deviceConfig);</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                                    result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1ba5770cedc73357f700522f34948142">created_with_transport_handle</a> = 1;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                                    <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#aef3dd970e9edfc49b414aa6cb0f3ad84">Unlock</a>(result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>) != LOCK_OK)</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                                    {</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                                        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;unable to Unlock&quot;</span>);</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                                        result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                                    }</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                                }</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                            }</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                        }</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                    }</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                    {</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                        result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a> = <a class="code" href="lock_8c.html#a3683432285e999baa8c543f27633829c">Lock_Init</a>();</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                        <span class="keywordflow">if</span> (result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                        {</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                            <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_030: [If creating the lock fails, then IoTHubClient_Create shall return NULL.] */</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                            <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_031: [If IoTHubClient_Create fails, all resources allocated by it shall be freed.] */</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;                            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Failure creating Lock object&quot;</span>);</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                            result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                        }</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                        <span class="keywordflow">else</span> </div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                        {</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                            <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_002: [IoTHubClient_Create shall instantiate a new IoTHubClient_LL instance by calling IoTHubClient_LL_Create and passing the config argument.] */</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                            result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a> = <a class="code" href="iothub__client__ll_8c.html#ad236a781c7fb988216b98be099125447">IoTHubClient_LL_Create</a>(config);</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                        }</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                    }</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                }</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                {</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                    result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a> = <a class="code" href="lock_8c.html#a3683432285e999baa8c543f27633829c">Lock_Init</a>();</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                    <span class="keywordflow">if</span> (result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                    {</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                        <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_030: [If creating the lock fails, then IoTHubClient_Create shall return NULL.] */</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                        <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_031: [If IoTHubClient_Create fails, all resources allocated by it shall be freed.] */</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Failure creating Lock object&quot;</span>);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                        result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                    }</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                    <span class="keywordflow">else</span> </div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                    {</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                        <span class="comment">/* Codes_SRS_IOTHUBCLIENT_12_006: [IoTHubClient_CreateFromConnectionString shall instantiate a new IoTHubClient_LL instance by calling IoTHubClient_LL_CreateFromConnectionString and passing the connectionString] */</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                        result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a> = <a class="code" href="iothub__client__ll_8c.html#aadecae0b07958725e83cae943250469d">IoTHubClient_LL_CreateFromConnectionString</a>(connectionString, protocol);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                    }</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                }</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160; </div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                <span class="keywordflow">if</span> (result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                {</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                    <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_003: [If IoTHubClient_LL_Create fails, then IoTHubClient_Create shall return NULL.] */</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                    <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_031: [If IoTHubClient_Create fails, all resources allocated by it shall be freed.] */</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                    <span class="comment">/* Codes_SRS_IOTHUBCLIENT_17_006: [ If IoTHubTransport_GetLock fails, then IoTHubClient_CreateWithTransport shall return NULL. ]*/</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                    <span class="keywordflow">if</span> (transportHandle == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                    {</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                        <a class="code" href="lock_8c.html#ac9743d97f19aac4a0bda808e57ef1249">Lock_Deinit</a>(result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>);</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                    }</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="preprocessor">#ifdef USE_UPLOADTOBLOB</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                    <a class="code" href="singlylinkedlist_8c.html#af882d0a8dedb9091e5e77df980e631ff">singlylinkedlist_destroy</a>(result-&gt;savedDataToBeCleaned);</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                    <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Failure creating iothub handle&quot;</span>);</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                    <a class="code" href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c.html#adac47be23934ebd7378976c14881466f">VECTOR_destroy</a>(result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3c7b086b1b96eb49ae2a4a67530746f9">saved_user_callback_list</a>);</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                    <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(result);</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                    result = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                }</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                {</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                    result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a008f33c5da8e26a2cefab8be0f991744">ThreadHandle</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                    result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a4a48a863612c79a2d974e1809c2c4443">desired_state_callback</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                    result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ab13e6a9fcb8fa8587c92e98122474b56">event_confirm_callback</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                    result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#af56890dbbf4752da02a880eda602a1b4">reported_state_callback</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                    result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1a889fb66cede394cdbebd65bc5643b4">devicetwin_user_context</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                    result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#af2e37951e6519740b732c39d24625b6c">connection_status_callback</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                    result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ae5da1f54d8bfbefcb6c40a8e94565edf">connection_status_user_context</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                    result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ac778ef2ee110489a4bb4972571684b68">message_callback</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                    result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#aeba8103aeb06c8281a54013d644b7b30">message_user_context</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                    result-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a20fd565795802e8d1bb855017506d7c9">method_user_context</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                }</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            }</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        }</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    }</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;}</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160; </div>
<div class="line"><a name="l00788"></a><span class="lineno"><a class="line" href="iothub__client_8c.html#a190e08e1201046fda675517070d63e83">  788</a></span>&#160;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_HANDLE</a> <a class="code" href="iothub__client_8c.html#a190e08e1201046fda675517070d63e83">IoTHubClient_CreateFromConnectionString</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* connectionString, <a class="code" href="iothub__client__ll_8h.html#a85d87807cf4e5cc48e62a292007f44cb">IOTHUB_CLIENT_TRANSPORT_PROVIDER</a> protocol)</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;{</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>* result;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160; </div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="comment">/* Codes_SRS_IOTHUBCLIENT_12_003: [IoTHubClient_CreateFromConnectionString shall verify all input parameters and if any is NULL then return NULL] */</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keywordflow">if</span> (connectionString == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    {</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Input parameter is NULL: connectionString&quot;</span>);</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        result = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    }</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (protocol == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    {</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Input parameter is NULL: protocol&quot;</span>);</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        result = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    }</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    {</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        result = create_iothub_instance(<a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, connectionString, protocol);</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    }</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;}</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160; </div>
<div class="line"><a name="l00810"></a><span class="lineno"><a class="line" href="iothub__client_8c.html#a7e4253f4df8cdef79cbe44d33c73547d">  810</a></span>&#160;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_HANDLE</a> <a class="code" href="iothub__client_8c.html#a7e4253f4df8cdef79cbe44d33c73547d">IoTHubClient_Create</a>(<span class="keyword">const</span> <a class="code" href="structIOTHUB__CLIENT__CONFIG__TAG.html">IOTHUB_CLIENT_CONFIG</a>* config)</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;{</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>* result;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keywordflow">if</span> (config == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    {</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Input parameter is NULL: IOTHUB_CLIENT_CONFIG&quot;</span>);</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        result = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    }</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    {</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        result = create_iothub_instance(config, <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    }</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;}</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160; </div>
<div class="line"><a name="l00825"></a><span class="lineno"><a class="line" href="iothub__client_8c.html#a2eb95b5592c8c1c5e1fed5cef60ba0ff">  825</a></span>&#160;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_HANDLE</a> <a class="code" href="iothub__client_8c.html#a2eb95b5592c8c1c5e1fed5cef60ba0ff">IoTHubClient_CreateWithTransport</a>(<a class="code" href="structTRANSPORT__HANDLE__DATA__TAG.html">TRANSPORT_HANDLE</a> transportHandle, <span class="keyword">const</span> <a class="code" href="structIOTHUB__CLIENT__CONFIG__TAG.html">IOTHUB_CLIENT_CONFIG</a>* config)</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;{</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>* result;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="comment">/*Codes_SRS_IOTHUBCLIENT_17_013: [ IoTHubClient_CreateWithTransport shall return NULL if transportHandle is NULL. ]*/</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="comment">/*Codes_SRS_IOTHUBCLIENT_17_014: [ IoTHubClient_CreateWithTransport shall return NULL if config is NULL. ]*/</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="keywordflow">if</span> (transportHandle == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || config == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    {</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;invalid parameter TRANSPORT_HANDLE transportHandle=%p, const IOTHUB_CLIENT_CONFIG* config=%p&quot;</span>, transportHandle, config);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        result = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    }</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        result = create_iothub_instance(config, transportHandle, <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    }</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;}</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160; </div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;<span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_005: [IoTHubClient_Destroy shall free all resources associated with the iotHubClientHandle instance.] */</span></div>
<div class="line"><a name="l00843"></a><span class="lineno"><a class="line" href="iothub__client_8c.html#a47fce212d1c5026e02ccd670242e1d83">  843</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="iothub__client_8c.html#a47fce212d1c5026e02ccd670242e1d83">IoTHubClient_Destroy</a>(<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_HANDLE</a> iotHubClientHandle)</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;{</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_008: [IoTHubClient_Destroy shall do nothing if parameter iotHubClientHandle is NULL.] */</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <span class="keywordflow">if</span> (iotHubClientHandle != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    {</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        <span class="keywordtype">bool</span> okToJoin;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        <span class="keywordtype">size_t</span> vector_size;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160; </div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>* iotHubClientInstance = (<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>*)iotHubClientHandle;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160; </div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a7f8a1a6bc50a5e0371f2587f89c9b8fe">TransportHandle</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        {</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            <span class="comment">/*Codes_SRS_IOTHUBCLIENT_01_007: [ The thread created as part of executing IoTHubClient_SendEventAsync or IoTHubClient_SetNotificationMessageCallback shall be joined. ]*/</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;            okToJoin = <a class="code" href="iothubtransport_8c.html#a637b879b4ba2111c5c87037910fb6584">IoTHubTransport_SignalEndWorkerThread</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a7f8a1a6bc50a5e0371f2587f89c9b8fe">TransportHandle</a>, iotHubClientHandle);</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        }</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160; </div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        <span class="comment">/*Codes_SRS_IOTHUBCLIENT_02_043: [ IoTHubClient_Destroy shall lock the serializing lock and signal the worker thread (if any) to end ]*/</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#a146c21d68c41777d20ef1f7e30518505">Lock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>) != LOCK_OK)</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        {</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;unable to Lock - - will still proceed to try to end the thread without locking&quot;</span>);</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        }</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160; </div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a008f33c5da8e26a2cefab8be0f991744">ThreadHandle</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        {</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a83429a62cb7730444f275464b09703c5">StopThread</a> = 1;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            okToJoin = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        }</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        {</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;            okToJoin = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        }</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160; </div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        <span class="comment">/*Codes_SRS_IOTHUBCLIENT_02_045: [ IoTHubClient_Destroy shall unlock the serializing lock. ]*/</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#aef3dd970e9edfc49b414aa6cb0f3ad84">Unlock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>) != LOCK_OK)</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        {</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;unable to Unlock&quot;</span>);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        }</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160; </div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        <span class="keywordflow">if</span> (okToJoin == <span class="keyword">true</span>)</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        {</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;            <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a008f33c5da8e26a2cefab8be0f991744">ThreadHandle</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;            {</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                <span class="keywordtype">int</span> res;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                <span class="comment">/*Codes_SRS_IOTHUBCLIENT_01_007: [ The thread created as part of executing IoTHubClient_SendEventAsync or IoTHubClient_SetNotificationMessageCallback shall be joined. ]*/</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="threadapi_8c.html#aa80bce4748cbe10f4b726f2ea3168609">ThreadAPI_Join</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a008f33c5da8e26a2cefab8be0f991744">ThreadHandle</a>, &amp;res) != THREADAPI_OK)</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                {</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                    <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;ThreadAPI_Join failed&quot;</span>);</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                }</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;            }</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160; </div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;            <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a7f8a1a6bc50a5e0371f2587f89c9b8fe">TransportHandle</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;            {</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                <span class="comment">/*Codes_SRS_IOTHUBCLIENT_01_007: [ The thread created as part of executing IoTHubClient_SendEventAsync or IoTHubClient_SetNotificationMessageCallback shall be joined. ]*/</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                <a class="code" href="iothubtransport_8c.html#af0d337b880cca04119460c79f7c4d46c">IoTHubTransport_JoinWorkerThread</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a7f8a1a6bc50a5e0371f2587f89c9b8fe">TransportHandle</a>, iotHubClientHandle);</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;            }</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        }</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160; </div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160; </div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#a146c21d68c41777d20ef1f7e30518505">Lock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>) != LOCK_OK)</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        {</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;unable to Lock - - will still proceed to try to end the thread without locking&quot;</span>);</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        }</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160; </div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="preprocessor">#ifdef USE_UPLOADTOBLOB</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        <span class="comment">/*Codes_SRS_IOTHUBCLIENT_02_069: [ IoTHubClient_Destroy shall free all data created by IoTHubClient_UploadToBlobAsync ]*/</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        <span class="comment">/*wait for all uploading threads to finish*/</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="singlylinkedlist_8c.html#a2557a2e240bd38a36a240a8386096507">singlylinkedlist_get_head_item</a>(iotHubClientInstance-&gt;savedDataToBeCleaned) != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        {</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;            garbageCollectorImpl(iotHubClientInstance);</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        }</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160; </div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        <span class="keywordflow">if</span> (iotHubClientInstance-&gt;savedDataToBeCleaned != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        {</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;            <a class="code" href="singlylinkedlist_8c.html#af882d0a8dedb9091e5e77df980e631ff">singlylinkedlist_destroy</a>(iotHubClientInstance-&gt;savedDataToBeCleaned);</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        }</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160; </div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_006: [That includes destroying the IoTHubClient_LL instance by calling IoTHubClient_LL_Destroy.] */</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        <a class="code" href="iothub__client__ll_8c.html#afc3049dc24e311713ab4735873989a4a">IoTHubClient_LL_Destroy</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a>);</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160; </div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#aef3dd970e9edfc49b414aa6cb0f3ad84">Unlock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>) != LOCK_OK)</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        {</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;unable to Unlock&quot;</span>);</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        }</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160; </div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160; </div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        vector_size = <a class="code" href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c.html#ac795f6438412ff56cd110ac3308c87e5">VECTOR_size</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3c7b086b1b96eb49ae2a4a67530746f9">saved_user_callback_list</a>);</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        <span class="keywordtype">size_t</span> <a class="code" href="cJSON_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = 0;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="cJSON_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = 0; <a class="code" href="cJSON_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &lt; vector_size; <a class="code" href="cJSON_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>++)</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        {</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;            <a class="code" href="structUSER__CALLBACK__INFO__TAG.html">USER_CALLBACK_INFO</a>* queue_cb_info = (<a class="code" href="structUSER__CALLBACK__INFO__TAG.html">USER_CALLBACK_INFO</a>*)<a class="code" href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c.html#a54e4d6709ddbb04124ce9d0ba39dba83">VECTOR_element</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3c7b086b1b96eb49ae2a4a67530746f9">saved_user_callback_list</a>, <a class="code" href="cJSON_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            <span class="keywordflow">if</span> (queue_cb_info != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;            {</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                <span class="keywordflow">if</span> ((queue_cb_info-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#acc98d50b9ccd3892732e7627e73c0bf2">type</a> == CALLBACK_TYPE_DEVICE_METHOD) || (queue_cb_info-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#acc98d50b9ccd3892732e7627e73c0bf2">type</a> == CALLBACK_TYPE_INBOUD_DEVICE_METHOD))</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                {</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                    <a class="code" href="strings_8c.html#a14f1a6a01de229149d3810d4d06816a2">STRING_delete</a>(queue_cb_info-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ac76016558a82ef4f252e2f0b427e53df">method_cb_info</a>.<a class="code" href="structMETHOD__CALLBACK__INFO__TAG.html#a9ba1702222c78679def85ecd451731c3">method_name</a>);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;                    <a class="code" href="buffer_8c.html#a298682f1e91e58ad5c8e8e50d9bf235d">BUFFER_delete</a>(queue_cb_info-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ac76016558a82ef4f252e2f0b427e53df">method_cb_info</a>.<a class="code" href="structMETHOD__CALLBACK__INFO__TAG.html#af376724de938122fa0cff9d89286cb00">payload</a>);</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                }</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (queue_cb_info-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#acc98d50b9ccd3892732e7627e73c0bf2">type</a> == CALLBACK_TYPE_DEVICE_TWIN)</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                {</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                    <span class="keywordflow">if</span> (queue_cb_info-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a22af3d3a1fb308e53e132f54f80a8a0e">dev_twin_cb_info</a>.<a class="code" href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html#a6160cbc2ae0492baf707ef7d97808f8e">payLoad</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                    {</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(queue_cb_info-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a22af3d3a1fb308e53e132f54f80a8a0e">dev_twin_cb_info</a>.<a class="code" href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html#a6160cbc2ae0492baf707ef7d97808f8e">payLoad</a>);</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                    }</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                }</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (queue_cb_info-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#acc98d50b9ccd3892732e7627e73c0bf2">type</a> == CALLBACK_TYPE_EVENT_CONFIRM)</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                {</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                    <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ab13e6a9fcb8fa8587c92e98122474b56">event_confirm_callback</a>)</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                    {</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;                        iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ab13e6a9fcb8fa8587c92e98122474b56">event_confirm_callback</a>(queue_cb_info-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">iothub_callback</a>.<a class="code" href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a995c2127121d749bc63ad2b7c2091f6a">event_confirm_cb_info</a>.<a class="code" href="structEVENT__CONFIRM__CALLBACK__INFO__TAG.html#a57334a5ffaa4e1863ab52fe1b2f8dcba">confirm_result</a>, queue_cb_info-&gt;<a class="code" href="structUSER__CALLBACK__INFO__TAG.html#ac9ef9a196e06f36dfbd3bb7cc03e8979">userContextCallback</a>);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                    }</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;                }</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;            }</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        }</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        <a class="code" href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c.html#adac47be23934ebd7378976c14881466f">VECTOR_destroy</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3c7b086b1b96eb49ae2a4a67530746f9">saved_user_callback_list</a>);</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160; </div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a7f8a1a6bc50a5e0371f2587f89c9b8fe">TransportHandle</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        {</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;            <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_032: [If the lock was allocated in IoTHubClient_Create, it shall be also freed..] */</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;            <a class="code" href="lock_8c.html#ac9743d97f19aac4a0bda808e57ef1249">Lock_Deinit</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>);</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        }</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1a889fb66cede394cdbebd65bc5643b4">devicetwin_user_context</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        {</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;            <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1a889fb66cede394cdbebd65bc5643b4">devicetwin_user_context</a>);</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        }</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ae5da1f54d8bfbefcb6c40a8e94565edf">connection_status_user_context</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        {</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;            <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ae5da1f54d8bfbefcb6c40a8e94565edf">connection_status_user_context</a>);</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        }</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#aeba8103aeb06c8281a54013d644b7b30">message_user_context</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        {</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;            <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#aeba8103aeb06c8281a54013d644b7b30">message_user_context</a>);</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        }</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a20fd565795802e8d1bb855017506d7c9">method_user_context</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        {</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;            <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a20fd565795802e8d1bb855017506d7c9">method_user_context</a>);</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        }</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(iotHubClientInstance);</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    }</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;}</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160; </div>
<div class="line"><a name="l00984"></a><span class="lineno"><a class="line" href="iothub__client_8c.html#a3e60e953d03a503c1ae30dd6af7f390f">  984</a></span>&#160;IOTHUB_CLIENT_RESULT <a class="code" href="iothub__client_8c.html#a3e60e953d03a503c1ae30dd6af7f390f">IoTHubClient_SendEventAsync</a>(<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_HANDLE</a> iotHubClientHandle, <a class="code" href="structIOTHUB__MESSAGE__HANDLE__DATA__TAG.html">IOTHUB_MESSAGE_HANDLE</a> eventMessageHandle, <a class="code" href="iothub__client__ll_8h.html#a41b17fcb2cb70587e3576226561648a0">IOTHUB_CLIENT_EVENT_CONFIRMATION_CALLBACK</a> eventConfirmationCallback, <span class="keywordtype">void</span>* userContextCallback)</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;{</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    IOTHUB_CLIENT_RESULT result;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160; </div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keywordflow">if</span> (iotHubClientHandle == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    {</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_011: [If iotHubClientHandle is NULL, IoTHubClient_SendEventAsync shall return IOTHUB_CLIENT_INVALID_ARG.] */</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        result = IOTHUB_CLIENT_INVALID_ARG;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;NULL iothubClientHandle&quot;</span>);</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    }</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    {</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>* iotHubClientInstance = (<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>*)iotHubClientHandle;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160; </div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_009: [IoTHubClient_SendEventAsync shall start the worker thread if it was not previously started.] */</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        <span class="keywordflow">if</span> ((result = StartWorkerThreadIfNeeded(iotHubClientInstance)) != IOTHUB_CLIENT_OK)</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        {</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;            <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_010: [If starting the thread fails, IoTHubClient_SendEventAsync shall return IOTHUB_CLIENT_ERROR.] */</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;            result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Could not start worker thread&quot;</span>);</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        }</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        {</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1ba5770cedc73357f700522f34948142">created_with_transport_handle</a> == 0)</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;            {</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;                iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ab13e6a9fcb8fa8587c92e98122474b56">event_confirm_callback</a> = eventConfirmationCallback;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;            }</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160; </div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;            <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_025: [IoTHubClient_SendEventAsync shall be made thread-safe by using the lock created in IoTHubClient_Create.] */</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#a146c21d68c41777d20ef1f7e30518505">Lock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>) != LOCK_OK)</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;            {</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_026: [If acquiring the lock fails, IoTHubClient_SendEventAsync shall return IOTHUB_CLIENT_ERROR.] */</span></div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Could not acquire lock&quot;</span>);</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;            }</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;            {</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1ba5770cedc73357f700522f34948142">created_with_transport_handle</a> != 0 || eventConfirmationCallback == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;                {</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                    result = <a class="code" href="iothub__client__ll_8c.html#ab47deec96944dd3f1bf0e747ab565277">IoTHubClient_LL_SendEventAsync</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a>, eventMessageHandle, eventConfirmationCallback, userContextCallback);</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                }</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;                {</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                    <span class="comment">/* Codes_SRS_IOTHUBCLIENT_07_001: [ IoTHubClient_SendEventAsync shall allocate a IOTHUB_QUEUE_CONTEXT object to be sent to the IoTHubClient_LL_SendEventAsync function as a user context. ] */</span></div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;                    <a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>* queue_context = (<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>*)<a class="code" href="unity__fixture__malloc__overrides_8h.html#acf143577800376dd931c059ecc61ba06">malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>));</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;                    <span class="keywordflow">if</span> (queue_context == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                    {</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                        result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;                        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Failed allocating QUEUE_CONTEXT&quot;</span>);</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                    }</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;                    {</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;                        queue_context-&gt;<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a0c3e332401f120f3c28a97b9e5f9e584">iotHubClientHandle</a> = iotHubClientInstance;</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                        queue_context-&gt;<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a1684554928b9033a4b3a3df07809f77b">userContextCallback</a> = userContextCallback;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                        <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_012: [IoTHubClient_SendEventAsync shall call IoTHubClient_LL_SendEventAsync, while passing the IoTHubClient_LL handle created by IoTHubClient_Create and the parameters eventMessageHandle, eventConfirmationCallback and userContextCallback.] */</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                        <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_013: [When IoTHubClient_LL_SendEventAsync is called, IoTHubClient_SendEventAsync shall return the result of IoTHubClient_LL_SendEventAsync.] */</span></div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                        result = <a class="code" href="iothub__client__ll_8c.html#ab47deec96944dd3f1bf0e747ab565277">IoTHubClient_LL_SendEventAsync</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a>, eventMessageHandle, iothub_ll_event_confirm_callback, queue_context);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                        <span class="keywordflow">if</span> (result != IOTHUB_CLIENT_OK)</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                        {</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;IoTHubClient_LL_SendEventAsync failed&quot;</span>);</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                            <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(queue_context);</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                        }</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                    }</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                }</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160; </div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_025: [IoTHubClient_SendEventAsync shall be made thread-safe by using the lock created in IoTHubClient_Create.] */</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;                (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="lock_8c.html#aef3dd970e9edfc49b414aa6cb0f3ad84">Unlock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;            }</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        }</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    }</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160; </div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;}</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160; </div>
<div class="line"><a name="l01058"></a><span class="lineno"><a class="line" href="iothub__client_8c.html#a692ed29a02e5842a60db1b3c0ce1b186"> 1058</a></span>&#160;IOTHUB_CLIENT_RESULT <a class="code" href="iothub__client_8c.html#a692ed29a02e5842a60db1b3c0ce1b186">IoTHubClient_GetSendStatus</a>(<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_HANDLE</a> iotHubClientHandle, IOTHUB_CLIENT_STATUS *iotHubClientStatus)</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;{</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    IOTHUB_CLIENT_RESULT result;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160; </div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <span class="keywordflow">if</span> (iotHubClientHandle == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    {</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;        <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_023: [If iotHubClientHandle is NULL, IoTHubClient_ GetSendStatus shall return IOTHUB_CLIENT_INVALID_ARG.] */</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        result = IOTHUB_CLIENT_INVALID_ARG;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;NULL iothubClientHandle&quot;</span>);</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    }</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    {</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>* iotHubClientInstance = (<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>*)iotHubClientHandle;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160; </div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_033: [IoTHubClient_GetSendStatus shall be made thread-safe by using the lock created in IoTHubClient_Create.] */</span></div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#a146c21d68c41777d20ef1f7e30518505">Lock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>) != LOCK_OK)</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        {</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;            <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_034: [If acquiring the lock fails, IoTHubClient_GetSendStatus shall return IOTHUB_CLIENT_ERROR.] */</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;            result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Could not acquire lock&quot;</span>);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        }</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        {</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;            <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_022: [IoTHubClient_GetSendStatus shall call IoTHubClient_LL_GetSendStatus, while passing the IoTHubClient_LL handle created by IoTHubClient_Create and the parameter iotHubClientStatus.] */</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;            <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_024: [Otherwise, IoTHubClient_GetSendStatus shall return the result of IoTHubClient_LL_GetSendStatus.] */</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;            result = <a class="code" href="iothub__client__ll_8c.html#aa7773cdda101288cfd805c34f726eb84">IoTHubClient_LL_GetSendStatus</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a>, iotHubClientStatus);</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160; </div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;            <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_033: [IoTHubClient_GetSendStatus shall be made thread-safe by using the lock created in IoTHubClient_Create.] */</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;            (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="lock_8c.html#aef3dd970e9edfc49b414aa6cb0f3ad84">Unlock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>);</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        }</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    }</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160; </div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;}</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160; </div>
<div class="line"><a name="l01093"></a><span class="lineno"><a class="line" href="iothub__client_8c.html#a86d2a2ad2209f6e33bf59ee586abc042"> 1093</a></span>&#160;IOTHUB_CLIENT_RESULT <a class="code" href="iothub__client_8c.html#a86d2a2ad2209f6e33bf59ee586abc042">IoTHubClient_SetMessageCallback</a>(<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_HANDLE</a> iotHubClientHandle, <a class="code" href="iothub__client__ll_8h.html#adf7097e8fc9e34f26dd9347d4eaa5f8d">IOTHUB_CLIENT_MESSAGE_CALLBACK_ASYNC</a> messageCallback, <span class="keywordtype">void</span>* userContextCallback)</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;{</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    IOTHUB_CLIENT_RESULT result;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160; </div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <span class="keywordflow">if</span> (iotHubClientHandle == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    {</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_016: [If iotHubClientHandle is NULL, IoTHubClient_SetMessageCallback shall return IOTHUB_CLIENT_INVALID_ARG.] */</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        result = IOTHUB_CLIENT_INVALID_ARG;</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;NULL iothubClientHandle&quot;</span>);</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    }</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    {</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>* iotHubClientInstance = (<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>*)iotHubClientHandle;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160; </div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_014: [IoTHubClient_SetMessageCallback shall start the worker thread if it was not previously started.] */</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        <span class="keywordflow">if</span> ((result = StartWorkerThreadIfNeeded(iotHubClientInstance)) != IOTHUB_CLIENT_OK)</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;        {</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;            <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_015: [If starting the thread fails, IoTHubClient_SetMessageCallback shall return IOTHUB_CLIENT_ERROR.] */</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;            result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Could not start worker thread&quot;</span>);</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        }</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        {</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;            <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1ba5770cedc73357f700522f34948142">created_with_transport_handle</a> == 0)</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;            {</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;                iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ac778ef2ee110489a4bb4972571684b68">message_callback</a> = messageCallback;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;            }</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160; </div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;            <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_027: [IoTHubClient_SetMessageCallback shall be made thread-safe by using the lock created in IoTHubClient_Create.] */</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#a146c21d68c41777d20ef1f7e30518505">Lock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>) != LOCK_OK)</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;            {</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;                <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_028: [If acquiring the lock fails, IoTHubClient_SetMessageCallback shall return IOTHUB_CLIENT_ERROR.] */</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;                result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Could not acquire lock&quot;</span>);</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;            }</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;            {</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#aeba8103aeb06c8281a54013d644b7b30">message_user_context</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;                {</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;                    <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#aeba8103aeb06c8281a54013d644b7b30">message_user_context</a>);</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;                    iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#aeba8103aeb06c8281a54013d644b7b30">message_user_context</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;                }</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;                <span class="keywordflow">if</span> (messageCallback == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;                {</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;                    result = <a class="code" href="iothub__client__ll_8c.html#a0f2bcd060d35a9e1ccc19f4719635736">IoTHubClient_LL_SetMessageCallback_Ex</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a>, <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#aeba8103aeb06c8281a54013d644b7b30">message_user_context</a>);</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                }</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1ba5770cedc73357f700522f34948142">created_with_transport_handle</a> != 0)</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;                {</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;                    result = <a class="code" href="iothub__client__ll_8c.html#af8c8a00af8c2fac1ccf2111eb4e2016c">IoTHubClient_LL_SetMessageCallback</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a>, messageCallback, userContextCallback);</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;                }</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;                {</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;                    iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#aeba8103aeb06c8281a54013d644b7b30">message_user_context</a> = (<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>*)<a class="code" href="unity__fixture__malloc__overrides_8h.html#acf143577800376dd931c059ecc61ba06">malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>));</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;                    <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#aeba8103aeb06c8281a54013d644b7b30">message_user_context</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;                    {</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;                        result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;                        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Failed allocating QUEUE_CONTEXT&quot;</span>);</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;                    }</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;                    {</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;                        iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#aeba8103aeb06c8281a54013d644b7b30">message_user_context</a>-&gt;<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a0c3e332401f120f3c28a97b9e5f9e584">iotHubClientHandle</a> = iotHubClientHandle;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                        iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#aeba8103aeb06c8281a54013d644b7b30">message_user_context</a>-&gt;<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a1684554928b9033a4b3a3df07809f77b">userContextCallback</a> = userContextCallback;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160; </div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;                        <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_017: [IoTHubClient_SetMessageCallback shall call IoTHubClient_LL_SetMessageCallback_Ex, while passing the IoTHubClient_LL handle created by IoTHubClient_Create and the local iothub_ll_message_callback wrapper of messageCallback and userContextCallback.] */</span></div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;                        <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_018: [When IoTHubClient_LL_SetMessageCallback_Ex is called, IoTHubClient_SetMessageCallback shall return the result of IoTHubClient_LL_SetMessageCallback_Ex.] */</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;                        result = <a class="code" href="iothub__client__ll_8c.html#a0f2bcd060d35a9e1ccc19f4719635736">IoTHubClient_LL_SetMessageCallback_Ex</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a>, iothub_ll_message_callback, iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#aeba8103aeb06c8281a54013d644b7b30">message_user_context</a>);</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;                        <span class="keywordflow">if</span> (result != IOTHUB_CLIENT_OK)</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;                        {</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;                            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;IoTHubClient_LL_SetMessageCallback failed&quot;</span>);</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                            <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#aeba8103aeb06c8281a54013d644b7b30">message_user_context</a>);</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;                            iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#aeba8103aeb06c8281a54013d644b7b30">message_user_context</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;                        }</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                    }</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                }</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160; </div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_027: [IoTHubClient_SetMessageCallback shall be made thread-safe by using the lock created in IoTHubClient_Create.] */</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="lock_8c.html#aef3dd970e9edfc49b414aa6cb0f3ad84">Unlock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>);</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;            }</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;        }</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    }</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160; </div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;}</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160; </div>
<div class="line"><a name="l01177"></a><span class="lineno"><a class="line" href="iothub__client_8c.html#a6fb9f6dbb0fdf87d62ed457f2f285dac"> 1177</a></span>&#160;IOTHUB_CLIENT_RESULT <a class="code" href="iothub__client_8c.html#a6fb9f6dbb0fdf87d62ed457f2f285dac">IoTHubClient_SetConnectionStatusCallback</a>(<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_HANDLE</a> iotHubClientHandle, <a class="code" href="iothub__client__ll_8h.html#ad0d7e0712e620b1d55e72652f4f4f560">IOTHUB_CLIENT_CONNECTION_STATUS_CALLBACK</a> connectionStatusCallback, <span class="keywordtype">void</span> * userContextCallback)</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;{</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    IOTHUB_CLIENT_RESULT result;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160; </div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <span class="keywordflow">if</span> (iotHubClientHandle == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    {</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;        <span class="comment">/* Codes_SRS_IOTHUBCLIENT_25_076: [** If `iotHubClientHandle` is `NULL`, `IoTHubClient_SetRetryPolicy` shall return `IOTHUB_CLIENT_INVALID_ARG`. ] */</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        result = IOTHUB_CLIENT_INVALID_ARG;</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;NULL iothubClientHandle&quot;</span>);</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    }</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    {</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;        <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>* iotHubClientInstance = (<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>*)iotHubClientHandle;</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160; </div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;        <span class="comment">/* Codes_SRS_IOTHUBCLIENT_25_081: [ `IoTHubClient_SetConnectionStatusCallback` shall start the worker thread if it was not previously started. ]*/</span></div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        <span class="keywordflow">if</span> ((result = StartWorkerThreadIfNeeded(iotHubClientInstance)) != IOTHUB_CLIENT_OK)</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;        {</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;            <span class="comment">/* Codes_SRS_IOTHUBCLIENT_25_083: [ If starting the thread fails, `IoTHubClient_SetConnectionStatusCallback` shall return `IOTHUB_CLIENT_ERROR`. ]*/</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;            result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Could not start worker thread&quot;</span>);</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;        }</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;        {</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;            <span class="comment">/* Codes_SRS_IOTHUBCLIENT_25_087: [ `IoTHubClient_SetConnectionStatusCallback` shall be made thread-safe by using the lock created in `IoTHubClient_Create`. ] */</span></div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#a146c21d68c41777d20ef1f7e30518505">Lock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>) != LOCK_OK)</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;            {</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;                <span class="comment">/* Codes_SRS_IOTHUBCLIENT_25_088: [ If acquiring the lock fails, `IoTHubClient_SetConnectionStatusCallback` shall return `IOTHUB_CLIENT_ERROR`. ]*/</span></div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;                result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Could not acquire lock&quot;</span>);</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;            }</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;            {</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;                <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1ba5770cedc73357f700522f34948142">created_with_transport_handle</a> == 0)</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;                {</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;                    iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#af2e37951e6519740b732c39d24625b6c">connection_status_callback</a> = connectionStatusCallback;</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;                }</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160; </div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;                <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1ba5770cedc73357f700522f34948142">created_with_transport_handle</a> != 0 || connectionStatusCallback == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;                {</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;                    <span class="comment">/* Codes_SRS_IOTHUBCLIENT_25_085: [ `IoTHubClient_SetConnectionStatusCallback` shall call `IoTHubClient_LL_SetConnectionStatusCallback`, while passing the `IoTHubClient_LL` handle created by `IoTHubClient_Create` and the parameters `connectionStatusCallback` and `userContextCallback`. ]*/</span></div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;                    result = <a class="code" href="iothub__client__ll_8c.html#a6d0656a868fcbdaba0fba066fbe92bd9">IoTHubClient_LL_SetConnectionStatusCallback</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a>, connectionStatusCallback, userContextCallback);</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;                }</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;                {</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;                    <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ae5da1f54d8bfbefcb6c40a8e94565edf">connection_status_user_context</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;                    {</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;                        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ae5da1f54d8bfbefcb6c40a8e94565edf">connection_status_user_context</a>);</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;                    }</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;                    iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ae5da1f54d8bfbefcb6c40a8e94565edf">connection_status_user_context</a> = (<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>*)<a class="code" href="unity__fixture__malloc__overrides_8h.html#acf143577800376dd931c059ecc61ba06">malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>));</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;                    <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ae5da1f54d8bfbefcb6c40a8e94565edf">connection_status_user_context</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;                    {</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;                        result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;                        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Failed allocating QUEUE_CONTEXT&quot;</span>);</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;                    }</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;                    {</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;                        iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ae5da1f54d8bfbefcb6c40a8e94565edf">connection_status_user_context</a>-&gt;<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a0c3e332401f120f3c28a97b9e5f9e584">iotHubClientHandle</a> = iotHubClientInstance;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;                        iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ae5da1f54d8bfbefcb6c40a8e94565edf">connection_status_user_context</a>-&gt;<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a1684554928b9033a4b3a3df07809f77b">userContextCallback</a> = userContextCallback;</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160; </div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;                        <span class="comment">/* Codes_SRS_IOTHUBCLIENT_25_085: [ `IoTHubClient_SetConnectionStatusCallback` shall call `IoTHubClient_LL_SetConnectionStatusCallback`, while passing the `IoTHubClient_LL` handle created by `IoTHubClient_Create` and the parameters `connectionStatusCallback` and `userContextCallback`. ]*/</span></div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;                        result = <a class="code" href="iothub__client__ll_8c.html#a6d0656a868fcbdaba0fba066fbe92bd9">IoTHubClient_LL_SetConnectionStatusCallback</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a>, iothub_ll_connection_status_callback, iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ae5da1f54d8bfbefcb6c40a8e94565edf">connection_status_user_context</a>);</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                        <span class="keywordflow">if</span> (result != IOTHUB_CLIENT_OK)</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;                        {</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;                            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;IoTHubClient_LL_SetConnectionStatusCallback failed&quot;</span>);</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;                            <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ae5da1f54d8bfbefcb6c40a8e94565edf">connection_status_user_context</a>);</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;                            iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ae5da1f54d8bfbefcb6c40a8e94565edf">connection_status_user_context</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;                        }</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;                    }</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;                }</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;                (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="lock_8c.html#aef3dd970e9edfc49b414aa6cb0f3ad84">Unlock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>);</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;            }</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;        }</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    }</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;}</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160; </div>
<div class="line"><a name="l01253"></a><span class="lineno"><a class="line" href="iothub__client_8c.html#acda949e1d5657a858a071ca8da90232a"> 1253</a></span>&#160;IOTHUB_CLIENT_RESULT <a class="code" href="iothub__client_8c.html#acda949e1d5657a858a071ca8da90232a">IoTHubClient_SetRetryPolicy</a>(<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_HANDLE</a> iotHubClientHandle, IOTHUB_CLIENT_RETRY_POLICY retryPolicy, <span class="keywordtype">size_t</span> retryTimeoutLimitInSeconds)</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;{</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    IOTHUB_CLIENT_RESULT result;</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160; </div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <span class="keywordflow">if</span> (iotHubClientHandle == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    {</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        <span class="comment">/* Codes_SRS_IOTHUBCLIENT_25_076: [** If `iotHubClientHandle` is `NULL`, `IoTHubClient_SetRetryPolicy` shall return `IOTHUB_CLIENT_INVALID_ARG`. ] */</span></div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;        result = IOTHUB_CLIENT_INVALID_ARG;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;NULL iothubClientHandle&quot;</span>);</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    }</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    {</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;        <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>* iotHubClientInstance = (<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>*)iotHubClientHandle;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160; </div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;        <span class="comment">/* Codes_SRS_IOTHUBCLIENT_25_073: [ `IoTHubClient_SetRetryPolicy` shall start the worker thread if it was not previously started. ] */</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        <span class="keywordflow">if</span> ((result = StartWorkerThreadIfNeeded(iotHubClientInstance)) != IOTHUB_CLIENT_OK)</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        {</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;            <span class="comment">/* Codes_SRS_IOTHUBCLIENT_25_075: [ If starting the thread fails, `IoTHubClient_SetRetryPolicy` shall return `IOTHUB_CLIENT_ERROR`. ]*/</span></div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;            result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Could not start worker thread&quot;</span>);</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;        }</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;        {</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;            <span class="comment">/* Codes_SRS_IOTHUBCLIENT_25_079: [ `IoTHubClient_SetRetryPolicy` shall be made thread-safe by using the lock created in `IoTHubClient_Create`.] */</span></div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#a146c21d68c41777d20ef1f7e30518505">Lock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>) != LOCK_OK)</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;            {</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                <span class="comment">/* Codes_SRS_IOTHUBCLIENT_25_080: [ If acquiring the lock fails, `IoTHubClient_SetRetryPolicy` shall return `IOTHUB_CLIENT_ERROR`. ]*/</span></div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;                result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Could not acquire lock&quot;</span>);</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;            }</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;            {</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;                <span class="comment">/* Codes_SRS_IOTHUBCLIENT_25_077: [ `IoTHubClient_SetRetryPolicy` shall call `IoTHubClient_LL_SetRetryPolicy`, while passing the `IoTHubClient_LL` handle created by `IoTHubClient_Create` and the parameters `retryPolicy` and `retryTimeoutLimitinSeconds`.]*/</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;                result = <a class="code" href="iothub__client__ll_8c.html#a8a0b5a41fae26b16aa01134d09e93278">IoTHubClient_LL_SetRetryPolicy</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a>, retryPolicy, retryTimeoutLimitInSeconds);</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;                (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="lock_8c.html#aef3dd970e9edfc49b414aa6cb0f3ad84">Unlock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>);</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;            }</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160; </div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;        }</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    }</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160; </div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;}</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160; </div>
<div class="line"><a name="l01296"></a><span class="lineno"><a class="line" href="iothub__client_8c.html#a4d7cab2213f5f82aac7d60fca5e519bc"> 1296</a></span>&#160;IOTHUB_CLIENT_RESULT <a class="code" href="iothub__client_8c.html#a4d7cab2213f5f82aac7d60fca5e519bc">IoTHubClient_GetRetryPolicy</a>(<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_HANDLE</a> iotHubClientHandle, IOTHUB_CLIENT_RETRY_POLICY* retryPolicy, <span class="keywordtype">size_t</span>* retryTimeoutLimitInSeconds)</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;{</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    IOTHUB_CLIENT_RESULT result;</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160; </div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    <span class="keywordflow">if</span> (iotHubClientHandle == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    {</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;        <span class="comment">/* Codes_SRS_IOTHUBCLIENT_25_092: [ If `iotHubClientHandle` is `NULL`, `IoTHubClient_GetRetryPolicy` shall return `IOTHUB_CLIENT_INVALID_ARG`. ]*/</span></div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;        result = IOTHUB_CLIENT_INVALID_ARG;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;NULL iothubClientHandle&quot;</span>);</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    }</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    {</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;        <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>* iotHubClientInstance = (<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>*)iotHubClientHandle;</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160; </div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;        <span class="comment">/* Codes_SRS_IOTHUBCLIENT_25_089: [ `IoTHubClient_GetRetryPolicy` shall start the worker thread if it was not previously started.]*/</span></div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;        <span class="keywordflow">if</span> ((result = StartWorkerThreadIfNeeded(iotHubClientInstance)) != IOTHUB_CLIENT_OK)</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        {</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;            <span class="comment">/* Codes_SRS_IOTHUBCLIENT_25_091: [ If starting the thread fails, `IoTHubClient_GetRetryPolicy` shall return `IOTHUB_CLIENT_ERROR`.]*/</span></div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;            result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Could not start worker thread&quot;</span>);</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;        }</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        {</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;            <span class="comment">/* Codes_SRS_IOTHUBCLIENT_25_095: [ `IoTHubClient_GetRetryPolicy` shall be made thread-safe by using the lock created in `IoTHubClient_Create`. ]*/</span></div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#a146c21d68c41777d20ef1f7e30518505">Lock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>) != LOCK_OK)</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;            {</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;                <span class="comment">/* Codes_SRS_IOTHUBCLIENT_25_096: [ If acquiring the lock fails, `IoTHubClient_GetRetryPolicy` shall return `IOTHUB_CLIENT_ERROR`. ]*/</span></div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;                result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Could not acquire lock&quot;</span>);</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;            }</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;            {</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;                <span class="comment">/* Codes_SRS_IOTHUBCLIENT_25_093: [ `IoTHubClient_GetRetryPolicy` shall call `IoTHubClient_LL_GetRetryPolicy`, while passing the `IoTHubClient_LL` handle created by `IoTHubClient_Create` and the parameters `connectionStatusCallback` and `userContextCallback`.]*/</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;                result = <a class="code" href="iothub__client__ll_8c.html#acd507eebe67d0b08bf49838120d9d3db">IoTHubClient_LL_GetRetryPolicy</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a>, retryPolicy, retryTimeoutLimitInSeconds);</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;                (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="lock_8c.html#aef3dd970e9edfc49b414aa6cb0f3ad84">Unlock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>);</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;            }</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;        }</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    }</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160; </div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;}</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160; </div>
<div class="line"><a name="l01338"></a><span class="lineno"><a class="line" href="iothub__client_8c.html#a4484e3db3c295c66d379b44fc53cfd79"> 1338</a></span>&#160;IOTHUB_CLIENT_RESULT <a class="code" href="iothub__client_8c.html#a4484e3db3c295c66d379b44fc53cfd79">IoTHubClient_GetLastMessageReceiveTime</a>(<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_HANDLE</a> iotHubClientHandle, <a class="code" href="timeb_8h.html#aa17c461cd5eca7fc12a66daa803c7fd7">time_t</a>* lastMessageReceiveTime)</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;{</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    IOTHUB_CLIENT_RESULT result;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160; </div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    <span class="keywordflow">if</span> (iotHubClientHandle == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    {</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;        <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_020: [If iotHubClientHandle is NULL, IoTHubClient_GetLastMessageReceiveTime shall return IOTHUB_CLIENT_INVALID_ARG.] */</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;        result = IOTHUB_CLIENT_INVALID_ARG;</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;NULL iothubClientHandle&quot;</span>);</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    }</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    {</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;        <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>* iotHubClientInstance = (<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>*)iotHubClientHandle;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160; </div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;        <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_035: [IoTHubClient_GetLastMessageReceiveTime shall be made thread-safe by using the lock created in IoTHubClient_Create.] */</span></div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#a146c21d68c41777d20ef1f7e30518505">Lock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>) != LOCK_OK)</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;        {</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;            <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_036: [If acquiring the lock fails, IoTHubClient_GetLastMessageReceiveTime shall return IOTHUB_CLIENT_ERROR.] */</span></div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;            result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Could not acquire lock&quot;</span>);</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;        }</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        {</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;            <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_019: [IoTHubClient_GetLastMessageReceiveTime shall call IoTHubClient_LL_GetLastMessageReceiveTime, while passing the IoTHubClient_LL handle created by IoTHubClient_Create and the parameter lastMessageReceiveTime.] */</span></div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;            <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_021: [Otherwise, IoTHubClient_GetLastMessageReceiveTime shall return the result of IoTHubClient_LL_GetLastMessageReceiveTime.] */</span></div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;            result = <a class="code" href="iothub__client__ll_8c.html#a21b712300499f014b8c467e195f2503c">IoTHubClient_LL_GetLastMessageReceiveTime</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a>, lastMessageReceiveTime);</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160; </div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;            <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_035: [IoTHubClient_GetLastMessageReceiveTime shall be made thread-safe by using the lock created in IoTHubClient_Create.] */</span></div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;            (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="lock_8c.html#aef3dd970e9edfc49b414aa6cb0f3ad84">Unlock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>);</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;        }</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    }</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160; </div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;}</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160; </div>
<div class="line"><a name="l01373"></a><span class="lineno"><a class="line" href="iothub__client_8c.html#a7a0ff66340551d6748b13e9ca74f3197"> 1373</a></span>&#160;IOTHUB_CLIENT_RESULT <a class="code" href="iothub__client_8c.html#a7a0ff66340551d6748b13e9ca74f3197">IoTHubClient_SetOption</a>(<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_HANDLE</a> iotHubClientHandle, <span class="keyword">const</span> <span class="keywordtype">char</span>* optionName, <span class="keyword">const</span> <span class="keywordtype">void</span>* <a class="code" href="cJSON__Utils_8h.html#a0dff3c76a075649fa412b1c429ffe382">value</a>)</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;{</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    IOTHUB_CLIENT_RESULT result;</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <span class="comment">/*Codes_SRS_IOTHUBCLIENT_02_034: [If parameter iotHubClientHandle is NULL then IoTHubClient_SetOption shall return IOTHUB_CLIENT_INVALID_ARG.] */</span></div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    <span class="comment">/*Codes_SRS_IOTHUBCLIENT_02_035: [ If parameter optionName is NULL then IoTHubClient_SetOption shall return IOTHUB_CLIENT_INVALID_ARG. ]*/</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    <span class="comment">/*Codes_SRS_IOTHUBCLIENT_02_036: [ If parameter value is NULL then IoTHubClient_SetOption shall return IOTHUB_CLIENT_INVALID_ARG. ]*/</span></div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    <span class="keywordflow">if</span> (</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;        (iotHubClientHandle == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ||</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        (optionName == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ||</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;        (<a class="code" href="cJSON__Utils_8h.html#a0dff3c76a075649fa412b1c429ffe382">value</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;        )</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    {</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;        result = IOTHUB_CLIENT_INVALID_ARG;</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;invalid arg (NULL)&quot;</span>);</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    }</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    {</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;        <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>* iotHubClientInstance = (<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>*)iotHubClientHandle;</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160; </div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;        <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_041: [ IoTHubClient_SetOption shall be made thread-safe by using the lock created in IoTHubClient_Create. ]*/</span></div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#a146c21d68c41777d20ef1f7e30518505">Lock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>) != LOCK_OK)</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;        {</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;            <span class="comment">/* Codes_SRS_IOTHUBCLIENT_01_042: [ If acquiring the lock fails, IoTHubClient_SetOption shall return IOTHUB_CLIENT_ERROR. ]*/</span></div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;            result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Could not acquire lock&quot;</span>);</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;        }</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;        {</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;            <span class="comment">/*Codes_SRS_IOTHUBCLIENT_02_038: [If optionName doesn&#39;t match one of the options handled by this module then IoTHubClient_SetOption shall call IoTHubClient_LL_SetOption passing the same parameters and return what IoTHubClient_LL_SetOption returns.] */</span></div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;            result = <a class="code" href="iothub__client__ll_8c.html#a70eb58c7ede92f75001104ff4745faa2">IoTHubClient_LL_SetOption</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a>, optionName, <a class="code" href="cJSON__Utils_8h.html#a0dff3c76a075649fa412b1c429ffe382">value</a>);</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;            <span class="keywordflow">if</span> (result != IOTHUB_CLIENT_OK)</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;            {</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;IoTHubClient_LL_SetOption failed&quot;</span>);</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;            }</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160; </div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;            (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="lock_8c.html#aef3dd970e9edfc49b414aa6cb0f3ad84">Unlock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>);</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;        }</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    }</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;}</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160; </div>
<div class="line"><a name="l01414"></a><span class="lineno"><a class="line" href="iothub__client_8c.html#a447f057c69117c3c36c6b13de05e2001"> 1414</a></span>&#160;IOTHUB_CLIENT_RESULT <a class="code" href="iothub__client_8c.html#a447f057c69117c3c36c6b13de05e2001">IoTHubClient_SetDeviceTwinCallback</a>(<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_HANDLE</a> iotHubClientHandle, <a class="code" href="iothub__client__ll_8h.html#a3020471f05025405840d9c43466122dc">IOTHUB_CLIENT_DEVICE_TWIN_CALLBACK</a> deviceTwinCallback, <span class="keywordtype">void</span>* userContextCallback)</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;{</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    IOTHUB_CLIENT_RESULT result;</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160; </div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    <span class="comment">/*Codes_SRS_IOTHUBCLIENT_10_001: [** `IoTHubClient_SetDeviceTwinCallback` shall fail and return `IOTHUB_CLIENT_INVALID_ARG` if parameter `iotHubClientHandle` is `NULL`. ]*/</span></div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    <span class="keywordflow">if</span> (iotHubClientHandle == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    {</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;        result = IOTHUB_CLIENT_INVALID_ARG;</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;invalid arg (NULL)&quot;</span>);</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    }</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    {</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;        <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>* iotHubClientInstance = (<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>*)iotHubClientHandle;</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160; </div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;        <span class="comment">/*Codes_SRS_IOTHUBCLIENT_10_003: [** If the transport connection is shared, the thread shall be started by calling `IoTHubTransport_StartWorkerThread`. ]*/</span></div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;        <span class="keywordflow">if</span> ((result = StartWorkerThreadIfNeeded(iotHubClientInstance)) != IOTHUB_CLIENT_OK)</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;        {</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;            <span class="comment">/*Codes_SRS_IOTHUBCLIENT_10_004: [** If starting the thread fails, `IoTHubClient_SetDeviceTwinCallback` shall return `IOTHUB_CLIENT_ERROR`. ]*/</span></div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;            result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Could not start worker thread&quot;</span>);</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;        }</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;        {</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;            <span class="comment">/*Codes_SRS_IOTHUBCLIENT_10_020: [** `IoTHubClient_SetDeviceTwinCallback` shall be made thread - safe by using the lock created in IoTHubClient_Create. ]*/</span></div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#a146c21d68c41777d20ef1f7e30518505">Lock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>) != LOCK_OK)</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;            {</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;                <span class="comment">/*Codes_SRS_IOTHUBCLIENT_10_002: [** If acquiring the lock fails, `IoTHubClient_SetDeviceTwinCallback` shall return `IOTHUB_CLIENT_ERROR`. ]*/</span></div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;                result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Could not acquire lock&quot;</span>);</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;            }</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;            {</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;                <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1ba5770cedc73357f700522f34948142">created_with_transport_handle</a> == 0)</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;                {</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;                    iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a4a48a863612c79a2d974e1809c2c4443">desired_state_callback</a> = deviceTwinCallback;</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;                }</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160; </div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;                <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1ba5770cedc73357f700522f34948142">created_with_transport_handle</a> != 0 || deviceTwinCallback == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;                {</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;                    <span class="comment">/*Codes_SRS_IOTHUBCLIENT_10_005: [** `IoTHubClient_LL_SetDeviceTwinCallback` shall call `IoTHubClient_LL_SetDeviceTwinCallback`, while passing the `IoTHubClient_LL handle` created by `IoTHubClient_LL_Create` along with the parameters `reportedStateCallback` and `userContextCallback`. ]*/</span></div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;                    result = <a class="code" href="iothub__client__ll_8c.html#ac7df62eaef41c0081af988467e45a0e4">IoTHubClient_LL_SetDeviceTwinCallback</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a>, deviceTwinCallback, userContextCallback);</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;                }</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;                {</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;                    <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1a889fb66cede394cdbebd65bc5643b4">devicetwin_user_context</a> != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;                    {</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;                        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1a889fb66cede394cdbebd65bc5643b4">devicetwin_user_context</a>);</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;                    }</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160; </div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;                    <span class="comment">/*Codes_SRS_IOTHUBCLIENT_07_002: [ IoTHubClient_SetDeviceTwinCallback shall allocate a IOTHUB_QUEUE_CONTEXT object to be sent to the IoTHubClient_LL_SetDeviceTwinCallback function as a user context. ]*/</span></div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;                    iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1a889fb66cede394cdbebd65bc5643b4">devicetwin_user_context</a> = (<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>*)<a class="code" href="unity__fixture__malloc__overrides_8h.html#acf143577800376dd931c059ecc61ba06">malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>));</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;                    <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1a889fb66cede394cdbebd65bc5643b4">devicetwin_user_context</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;                    {</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;                        result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;                        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Failed allocating QUEUE_CONTEXT&quot;</span>);</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;                    }</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;                    {</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;                        <span class="comment">/*Codes_SRS_IOTHUBCLIENT_10_005: [** `IoTHubClient_LL_SetDeviceTwinCallback` shall call `IoTHubClient_LL_SetDeviceTwinCallback`, while passing the `IoTHubClient_LL handle` created by `IoTHubClient_LL_Create` along with the parameters `iothub_ll_device_twin_callback` and IOTHUB_QUEUE_CONTEXT variable. ]*/</span></div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;                        iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1a889fb66cede394cdbebd65bc5643b4">devicetwin_user_context</a>-&gt;<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a0c3e332401f120f3c28a97b9e5f9e584">iotHubClientHandle</a> = iotHubClientInstance;</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;                        iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1a889fb66cede394cdbebd65bc5643b4">devicetwin_user_context</a>-&gt;<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a1684554928b9033a4b3a3df07809f77b">userContextCallback</a> = userContextCallback;</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;                        result = <a class="code" href="iothub__client__ll_8c.html#ac7df62eaef41c0081af988467e45a0e4">IoTHubClient_LL_SetDeviceTwinCallback</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a>, iothub_ll_device_twin_callback, iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1a889fb66cede394cdbebd65bc5643b4">devicetwin_user_context</a>);</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;                        <span class="keywordflow">if</span> (result != IOTHUB_CLIENT_OK)</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;                        {</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;                            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;IoTHubClient_LL_SetDeviceTwinCallback failed&quot;</span>);</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;                            <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1a889fb66cede394cdbebd65bc5643b4">devicetwin_user_context</a>);</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;                            iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1a889fb66cede394cdbebd65bc5643b4">devicetwin_user_context</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;                        }</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;                    }</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;                }</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160; </div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;                (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="lock_8c.html#aef3dd970e9edfc49b414aa6cb0f3ad84">Unlock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>);</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;            }</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;        }</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    }</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;}</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160; </div>
<div class="line"><a name="l01492"></a><span class="lineno"><a class="line" href="iothub__client_8c.html#ac34cf252e6306068821ede9131606cc4"> 1492</a></span>&#160;IOTHUB_CLIENT_RESULT <a class="code" href="iothub__client_8c.html#ac34cf252e6306068821ede9131606cc4">IoTHubClient_SendReportedState</a>(<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_HANDLE</a> iotHubClientHandle, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* reportedState, <span class="keywordtype">size_t</span> <a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a>, <a class="code" href="iothub__client__ll_8h.html#a9ae117da9222a5138e31a8953ce18bbc">IOTHUB_CLIENT_REPORTED_STATE_CALLBACK</a> reportedStateCallback, <span class="keywordtype">void</span>* userContextCallback)</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;{</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    IOTHUB_CLIENT_RESULT result;</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160; </div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    <span class="comment">/*Codes_SRS_IOTHUBCLIENT_10_013: [** If `iotHubClientHandle` is `NULL`, `IoTHubClient_SendReportedState` shall return `IOTHUB_CLIENT_INVALID_ARG`. ]*/</span></div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    <span class="keywordflow">if</span> (iotHubClientHandle == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    {</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;        result = IOTHUB_CLIENT_INVALID_ARG;</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;invalid arg (NULL)&quot;</span>);</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    }</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    {</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;        <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>* iotHubClientInstance = (<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>*)iotHubClientHandle;</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160; </div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;        <span class="comment">/*Codes_SRS_IOTHUBCLIENT_10_015: [** If the transport connection is shared, the thread shall be started by calling `IoTHubTransport_StartWorkerThread`. ]*/</span></div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;        <span class="keywordflow">if</span> ((result = StartWorkerThreadIfNeeded(iotHubClientInstance)) != IOTHUB_CLIENT_OK)</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;        {</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;            <span class="comment">/*Codes_SRS_IOTHUBCLIENT_10_016: [** If starting the thread fails, `IoTHubClient_SendReportedState` shall return `IOTHUB_CLIENT_ERROR`. ]*/</span></div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;            result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Could not start worker thread&quot;</span>);</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;        }</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;        {</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;            <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1ba5770cedc73357f700522f34948142">created_with_transport_handle</a> == 0)</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;            {</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;                iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#af56890dbbf4752da02a880eda602a1b4">reported_state_callback</a> = reportedStateCallback;</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;            }</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160; </div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;            <span class="comment">/*Codes_SRS_IOTHUBCLIENT_10_021: [** `IoTHubClient_SendReportedState` shall be made thread-safe by using the lock created in IoTHubClient_Create. ]*/</span></div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#a146c21d68c41777d20ef1f7e30518505">Lock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>) != LOCK_OK)</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;            {</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;                <span class="comment">/*Codes_SRS_IOTHUBCLIENT_10_014: [** If acquiring the lock fails, `IoTHubClient_SendReportedState` shall return `IOTHUB_CLIENT_ERROR`. ]*/</span></div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;                result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Could not acquire lock&quot;</span>);</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;            }</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;            {</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;                <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1ba5770cedc73357f700522f34948142">created_with_transport_handle</a> != 0 || reportedStateCallback == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;                {</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;                    <span class="comment">/*Codes_SRS_IOTHUBCLIENT_10_017: [** `IoTHubClient_SendReportedState` shall call `IoTHubClient_LL_SendReportedState`, while passing the `IoTHubClient_LL handle` created by `IoTHubClient_LL_Create` along with the parameters `reportedState`, `size`, `reportedStateCallback`, and `userContextCallback`. ]*/</span></div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;                    <span class="comment">/*Codes_SRS_IOTHUBCLIENT_10_018: [** When `IoTHubClient_LL_SendReportedState` is called, `IoTHubClient_SendReportedState` shall return the result of `IoTHubClient_LL_SendReportedState`. **]*/</span></div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;                    result = <a class="code" href="iothub__client__ll_8c.html#af48d8760649bf7792d861874e89e6b66">IoTHubClient_LL_SendReportedState</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a>, reportedState, <a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a>, reportedStateCallback, userContextCallback);</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;                }</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;                {</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;                    <span class="comment">/* Codes_SRS_IOTHUBCLIENT_07_003: [ IoTHubClient_SendReportedState shall allocate a IOTHUB_QUEUE_CONTEXT object to be sent to the IoTHubClient_LL_SendReportedState function as a user context. ] */</span></div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;                    <a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>* queue_context = (<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>*)<a class="code" href="unity__fixture__malloc__overrides_8h.html#acf143577800376dd931c059ecc61ba06">malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>));</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                    <span class="keywordflow">if</span> (queue_context == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;                    {</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;                        result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;                        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Failed allocating QUEUE_CONTEXT&quot;</span>);</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;                    }</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;                    {</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;                        queue_context-&gt;<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a0c3e332401f120f3c28a97b9e5f9e584">iotHubClientHandle</a> = iotHubClientInstance;</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;                        queue_context-&gt;<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a1684554928b9033a4b3a3df07809f77b">userContextCallback</a> = userContextCallback;</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;                        <span class="comment">/*Codes_SRS_IOTHUBCLIENT_10_017: [** `IoTHubClient_SendReportedState` shall call `IoTHubClient_LL_SendReportedState`, while passing the `IoTHubClient_LL handle` created by `IoTHubClient_LL_Create` along with the parameters `reportedState`, `size`, `iothub_ll_reported_state_callback` and IOTHUB_QUEUE_CONTEXT variable. ]*/</span></div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;                        <span class="comment">/*Codes_SRS_IOTHUBCLIENT_10_018: [** When `IoTHubClient_LL_SendReportedState` is called, `IoTHubClient_SendReportedState` shall return the result of `IoTHubClient_LL_SendReportedState`. **]*/</span></div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;                        result = <a class="code" href="iothub__client__ll_8c.html#af48d8760649bf7792d861874e89e6b66">IoTHubClient_LL_SendReportedState</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a>, reportedState, <a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a>, iothub_ll_reported_state_callback, queue_context);</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;                        <span class="keywordflow">if</span> (result != IOTHUB_CLIENT_OK)</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;                        {</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;                            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;IoTHubClient_LL_SendReportedState failed&quot;</span>);</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;                            <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(queue_context);</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;                        }</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;                    }</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;                }</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160; </div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;                (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="lock_8c.html#aef3dd970e9edfc49b414aa6cb0f3ad84">Unlock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>);</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;            }</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;        }</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    }</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;}</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160; </div>
<div class="line"><a name="l01566"></a><span class="lineno"><a class="line" href="iothub__client_8c.html#a44acf1df96a838735870184172d2f783"> 1566</a></span>&#160;IOTHUB_CLIENT_RESULT <a class="code" href="iothub__client_8c.html#a44acf1df96a838735870184172d2f783">IoTHubClient_SetDeviceMethodCallback</a>(<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_HANDLE</a> iotHubClientHandle, <a class="code" href="iothub__client__ll_8h.html#aa758c6c04994938fae9257289760d01a">IOTHUB_CLIENT_DEVICE_METHOD_CALLBACK_ASYNC</a> deviceMethodCallback, <span class="keywordtype">void</span>* userContextCallback)</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;{</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    IOTHUB_CLIENT_RESULT result;</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160; </div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    <span class="comment">/*Codes_SRS_IOTHUBCLIENT_12_012: [ If iotHubClientHandle is NULL, IoTHubClient_SetDeviceMethodCallback shall return IOTHUB_CLIENT_INVALID_ARG. ]*/</span> </div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    <span class="keywordflow">if</span> (iotHubClientHandle == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    {</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;        result = IOTHUB_CLIENT_INVALID_ARG;</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;invalid arg (NULL)&quot;</span>);</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    }</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    {</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;        <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>* iotHubClientInstance = (<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>*)iotHubClientHandle;</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160; </div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;        <span class="comment">/*Codes_SRS_IOTHUBCLIENT_12_014: [ If the transport handle is null and the worker thread is not initialized, the thread shall be started by calling IoTHubTransport_StartWorkerThread. ]*/</span></div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;        <span class="keywordflow">if</span> ((result = StartWorkerThreadIfNeeded(iotHubClientInstance)) != IOTHUB_CLIENT_OK)</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;        {</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;            <span class="comment">/*Codes_SRS_IOTHUBCLIENT_12_015: [ If starting the thread fails, IoTHubClient_SetDeviceMethodCallback shall return IOTHUB_CLIENT_ERROR. ]*/</span></div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;            result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Could not start worker thread&quot;</span>);</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        }</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;        {</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;            <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1ba5770cedc73357f700522f34948142">created_with_transport_handle</a> == 0)</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;            {</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;                iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a0b135b5f5e01f2e2dafe0e77229f0f19">device_method_callback</a> = deviceMethodCallback;</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;            }</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160; </div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;            <span class="comment">/*Codes_SRS_IOTHUBCLIENT_12_018: [ IoTHubClient_SetDeviceMethodCallback shall be made thread-safe by using the lock created in IoTHubClient_Create. ]*/</span></div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#a146c21d68c41777d20ef1f7e30518505">Lock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>) != LOCK_OK)</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;            {</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;                <span class="comment">/*Codes_SRS_IOTHUBCLIENT_12_013: [ If acquiring the lock fails, IoTHubClient_SetDeviceMethodCallback shall return IOTHUB_CLIENT_ERROR. ]*/</span></div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;                result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Could not acquire lock&quot;</span>);</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;            }</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;            {</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;                <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a20fd565795802e8d1bb855017506d7c9">method_user_context</a>)</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;                {</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;                    <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a20fd565795802e8d1bb855017506d7c9">method_user_context</a>);</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;                    iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a20fd565795802e8d1bb855017506d7c9">method_user_context</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;                }</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;                <span class="keywordflow">if</span> (deviceMethodCallback == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;                {</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;                    result = <a class="code" href="iothub__client__ll_8c.html#a93d4fa3242a15429e6cf6e0d7c65da9e">IoTHubClient_LL_SetDeviceMethodCallback_Ex</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a>, <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;                }</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;                {</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;                    iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a20fd565795802e8d1bb855017506d7c9">method_user_context</a> = (<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>*)<a class="code" href="unity__fixture__malloc__overrides_8h.html#acf143577800376dd931c059ecc61ba06">malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>));</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;                    <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a20fd565795802e8d1bb855017506d7c9">method_user_context</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;                    {</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;                        result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;                        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Failed allocating QUEUE_CONTEXT&quot;</span>);</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;                    }</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;                    {</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;                        iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a20fd565795802e8d1bb855017506d7c9">method_user_context</a>-&gt;<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a0c3e332401f120f3c28a97b9e5f9e584">iotHubClientHandle</a> = iotHubClientHandle;</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;                        iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a20fd565795802e8d1bb855017506d7c9">method_user_context</a>-&gt;<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a1684554928b9033a4b3a3df07809f77b">userContextCallback</a> = userContextCallback;</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160; </div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;                        <span class="comment">/*Codes_SRS_IOTHUBCLIENT_12_016: [ IoTHubClient_SetDeviceMethodCallback shall call IoTHubClient_LL_SetDeviceMethodCallback, while passing the IoTHubClient_LL_handle created by IoTHubClient_LL_Create along with the parameters deviceMethodCallback and userContextCallback. ]*/</span></div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;                        <span class="comment">/*Codes_SRS_IOTHUBCLIENT_12_017: [ When IoTHubClient_LL_SetDeviceMethodCallback is called, IoTHubClient_SetDeviceMethodCallback shall return the result of IoTHubClient_LL_SetDeviceMethodCallback. ]*/</span></div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;                        result = <a class="code" href="iothub__client__ll_8c.html#a93d4fa3242a15429e6cf6e0d7c65da9e">IoTHubClient_LL_SetDeviceMethodCallback_Ex</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a>, iothub_ll_device_method_callback, iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a20fd565795802e8d1bb855017506d7c9">method_user_context</a>);</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;                        <span class="keywordflow">if</span> (result != IOTHUB_CLIENT_OK)</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;                        {</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;                            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;IoTHubClient_LL_SetDeviceMethodCallback_Ex failed&quot;</span>);</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;                            <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a20fd565795802e8d1bb855017506d7c9">method_user_context</a>);</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;                            iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a20fd565795802e8d1bb855017506d7c9">method_user_context</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;                        }</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;                        {</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;                            iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a0b135b5f5e01f2e2dafe0e77229f0f19">device_method_callback</a> = deviceMethodCallback;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;                        }</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;                    }</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;                }</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160; </div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;                (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="lock_8c.html#aef3dd970e9edfc49b414aa6cb0f3ad84">Unlock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>);</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;            }</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160; </div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;        }</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    }</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;}</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160; </div>
<div class="line"><a name="l01649"></a><span class="lineno"><a class="line" href="iothub__client_8c.html#a3934d3b340ec1483d79acf34d1ea950f"> 1649</a></span>&#160;IOTHUB_CLIENT_RESULT <a class="code" href="iothub__client_8c.html#a3934d3b340ec1483d79acf34d1ea950f">IoTHubClient_SetDeviceMethodCallback_Ex</a>(<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_HANDLE</a> iotHubClientHandle, <a class="code" href="iothub__client__ll_8h.html#a43072ecc913e5ca776108b1731553c30">IOTHUB_CLIENT_INBOUND_DEVICE_METHOD_CALLBACK</a> inboundDeviceMethodCallback, <span class="keywordtype">void</span>* userContextCallback)</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;{</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    IOTHUB_CLIENT_RESULT result;</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160; </div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    <span class="comment">/*Codes_SRS_IOTHUBCLIENT_07_001: [ If iotHubClientHandle is NULL, IoTHubClient_SetDeviceMethodCallback_Ex shall return IOTHUB_CLIENT_INVALID_ARG. ]*/</span> </div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    <span class="keywordflow">if</span> (iotHubClientHandle == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    {</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;        result = IOTHUB_CLIENT_INVALID_ARG;</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;invalid arg (NULL)&quot;</span>);</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    }</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    {</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;        <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>* iotHubClientInstance = (<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>*)iotHubClientHandle;</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160; </div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;        <span class="comment">/*Codes_SRS_IOTHUBCLIENT_07_003: [ If the transport handle is NULL and the worker thread is not initialized, the thread shall be started by calling IoTHubTransport_StartWorkerThread. ]*/</span></div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;        <span class="keywordflow">if</span> ((result = StartWorkerThreadIfNeeded(iotHubClientInstance)) != IOTHUB_CLIENT_OK)</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;        {</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;            <span class="comment">/*Codes_SRS_IOTHUBCLIENT_07_004: [ If starting the thread fails, IoTHubClient_SetDeviceMethodCallback_Ex shall return IOTHUB_CLIENT_ERROR. ]*/</span></div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;            result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Could not start worker thread&quot;</span>);</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;        }</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;        {</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;            <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1ba5770cedc73357f700522f34948142">created_with_transport_handle</a> == 0)</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;            {</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;                iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a58ae45dac433e034d7f8a394abd7ebfa">inbound_device_method_callback</a> = inboundDeviceMethodCallback;</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;            }</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160; </div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;            <span class="comment">/*Codes_SRS_IOTHUBCLIENT_07_007: [ IoTHubClient_SetDeviceMethodCallback_Ex shall be made thread-safe by using the lock created in IoTHubClient_Create. ]*/</span></div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#a146c21d68c41777d20ef1f7e30518505">Lock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>) != LOCK_OK)</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;            {</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;                <span class="comment">/*Codes_SRS_IOTHUBCLIENT_07_002: [ If acquiring the lock fails, IoTHubClient_SetDeviceMethodCallback_Ex shall return IOTHUB_CLIENT_ERROR. ]*/</span></div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;                result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Could not acquire lock&quot;</span>);</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;            }</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;            {</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;                <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a20fd565795802e8d1bb855017506d7c9">method_user_context</a>)</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;                {</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;                    <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a20fd565795802e8d1bb855017506d7c9">method_user_context</a>);</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;                    iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a20fd565795802e8d1bb855017506d7c9">method_user_context</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;                }</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;                <span class="keywordflow">if</span> (inboundDeviceMethodCallback == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;                {</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;                    <span class="comment">/* Codes_SRS_IOTHUBCLIENT_07_008: [ If inboundDeviceMethodCallback is NULL, IoTHubClient_SetDeviceMethodCallback_Ex shall call IoTHubClient_LL_SetDeviceMethodCallback_Ex, passing NULL for the iothub_ll_inbound_device_method_callback. ] */</span></div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;                    result = <a class="code" href="iothub__client__ll_8c.html#a93d4fa3242a15429e6cf6e0d7c65da9e">IoTHubClient_LL_SetDeviceMethodCallback_Ex</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a>, <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;                }</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;                {</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;                    iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a20fd565795802e8d1bb855017506d7c9">method_user_context</a> = (<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>*)<a class="code" href="unity__fixture__malloc__overrides_8h.html#acf143577800376dd931c059ecc61ba06">malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT</a>));</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;                    <span class="keywordflow">if</span> (iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a20fd565795802e8d1bb855017506d7c9">method_user_context</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;                    {</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;                        result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;                        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Failed allocating QUEUE_CONTEXT&quot;</span>);</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;                    }</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;                    {</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;                        <span class="comment">/*Codes_SRS_IOTHUBCLIENT_07_005: [ IoTHubClient_SetDeviceMethodCallback_Ex shall call IoTHubClient_LL_SetDeviceMethodCallback_Ex, while passing the IoTHubClient_LL_handle created by IoTHubClient_LL_Create along with the parameters iothub_ll_inbound_device_method_callback and IOTHUB_QUEUE_CONTEXT. ]*/</span></div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;                        iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a20fd565795802e8d1bb855017506d7c9">method_user_context</a>-&gt;<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a0c3e332401f120f3c28a97b9e5f9e584">iotHubClientHandle</a> = iotHubClientHandle;</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;                        iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a20fd565795802e8d1bb855017506d7c9">method_user_context</a>-&gt;<a class="code" href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a1684554928b9033a4b3a3df07809f77b">userContextCallback</a> = userContextCallback;</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160; </div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;                        <span class="comment">/* Codes_SRS_IOTHUBCLIENT_07_006: [ When IoTHubClient_LL_SetDeviceMethodCallback_Ex is called, IoTHubClient_SetDeviceMethodCallback_Ex shall return the result of IoTHubClient_LL_SetDeviceMethodCallback_Ex. ] */</span></div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;                        result = <a class="code" href="iothub__client__ll_8c.html#a93d4fa3242a15429e6cf6e0d7c65da9e">IoTHubClient_LL_SetDeviceMethodCallback_Ex</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a>, iothub_ll_inbound_device_method_callback, iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a20fd565795802e8d1bb855017506d7c9">method_user_context</a>);</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;                        <span class="keywordflow">if</span> (result != IOTHUB_CLIENT_OK)</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;                        {</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;                            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;IoTHubClient_LL_SetDeviceMethodCallback_Ex failed&quot;</span>);</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;                            <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a20fd565795802e8d1bb855017506d7c9">method_user_context</a>);</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;                            iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a20fd565795802e8d1bb855017506d7c9">method_user_context</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;                        }</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;                        {</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;                            iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a58ae45dac433e034d7f8a394abd7ebfa">inbound_device_method_callback</a> = inboundDeviceMethodCallback;</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;                        }</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;                    }</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;                }</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160; </div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;                (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="lock_8c.html#aef3dd970e9edfc49b414aa6cb0f3ad84">Unlock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>);</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;            }</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;        }</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    }</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;}</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160; </div>
<div class="line"><a name="l01732"></a><span class="lineno"><a class="line" href="iothub__client_8c.html#ac0a1c0eb5e56083337bbc742b0fe4abb"> 1732</a></span>&#160;IOTHUB_CLIENT_RESULT <a class="code" href="iothub__client_8c.html#ac0a1c0eb5e56083337bbc742b0fe4abb">IoTHubClient_DeviceMethodResponse</a>(<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_HANDLE</a> iotHubClientHandle, <a class="code" href="iothub__transport__ll_8h.html#a1cc79695294f89e97fb945066a3b3d77">METHOD_HANDLE</a> methodId, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* response, <span class="keywordtype">size_t</span> respSize, <span class="keywordtype">int</span> statusCode)</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;{</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;    IOTHUB_CLIENT_RESULT result;</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160; </div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    <span class="comment">/*Codes_SRS_IOTHUBCLIENT_12_012: [ If iotHubClientHandle is NULL, IoTHubClient_SetDeviceMethodCallback shall return IOTHUB_CLIENT_INVALID_ARG. ]*/</span> </div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;    <span class="keywordflow">if</span> (iotHubClientHandle == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;    {</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;        result = IOTHUB_CLIENT_INVALID_ARG;</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;invalid arg (NULL)&quot;</span>);</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;    }</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    {</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;        <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>* iotHubClientInstance = (<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>*)iotHubClientHandle;</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160; </div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;        <span class="comment">/*Codes_SRS_IOTHUBCLIENT_12_018: [ IoTHubClient_SetDeviceMethodCallback shall be made thread-safe by using the lock created in IoTHubClient_Create. ]*/</span></div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#a146c21d68c41777d20ef1f7e30518505">Lock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>) != LOCK_OK)</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;        {</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;            <span class="comment">/*Codes_SRS_IOTHUBCLIENT_12_013: [ If acquiring the lock fails, IoTHubClient_SetDeviceMethodCallback shall return IOTHUB_CLIENT_ERROR. ]*/</span></div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;            result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Could not acquire lock&quot;</span>);</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;        }</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;        {</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;            result = <a class="code" href="iothub__client__ll_8c.html#a738828c16b0f1479401bf910c34bccfe">IoTHubClient_LL_DeviceMethodResponse</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IoTHubClientLLHandle</a>, methodId, response, respSize, statusCode);</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;            <span class="keywordflow">if</span> (result != IOTHUB_CLIENT_OK)</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;            {</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;IoTHubClient_LL_DeviceMethodResponse failed&quot;</span>);</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;            }</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;            (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="lock_8c.html#aef3dd970e9edfc49b414aa6cb0f3ad84">Unlock</a>(iotHubClientInstance-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>);</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;        }</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    }</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;}</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160; </div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;<span class="preprocessor">#ifdef USE_UPLOADTOBLOB</span></div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> uploadingThread(<span class="keywordtype">void</span> *<a class="code" href="namespaceudp__server.html#ade67d79c46c11d44cd799213c5a772ca">data</a>)</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;{</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;    UPLOADTOBLOB_SAVED_DATA* savedData = (UPLOADTOBLOB_SAVED_DATA*)<a class="code" href="namespaceudp__server.html#ade67d79c46c11d44cd799213c5a772ca">data</a>;</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160; </div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#a146c21d68c41777d20ef1f7e30518505">Lock</a>(savedData-&gt;iotHubClientHandle-&gt;LockHandle) == LOCK_OK)</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    {</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;        IOTHUB_CLIENT_FILE_UPLOAD_RESULT upload_result;</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;        <span class="comment">/*it so happens that IoTHubClient_LL_UploadToBlob is thread-safe because there&#39;s no saved state in the handle and there are no globals, so no need to protect it*/</span></div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;        <span class="comment">/*not having it protected means multiple simultaneous uploads can happen*/</span></div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;        <span class="comment">/*Codes_SRS_IOTHUBCLIENT_02_054: [ The thread shall call IoTHubClient_LL_UploadToBlob passing the information packed in the structure. ]*/</span></div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;        <span class="keywordflow">if</span> (IoTHubClient_LL_UploadToBlob(savedData-&gt;iotHubClientHandle-&gt;IoTHubClientLLHandle, savedData-&gt;destinationFileName, savedData-&gt;source, savedData-&gt;size) == IOTHUB_CLIENT_OK)</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;        {</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;            upload_result = FILE_UPLOAD_OK;</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;        }</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;        {</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;unable to IoTHubClient_LL_UploadToBlob&quot;</span>);</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;            upload_result = FILE_UPLOAD_ERROR;</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;        }</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;        (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="lock_8c.html#aef3dd970e9edfc49b414aa6cb0f3ad84">Unlock</a>(savedData-&gt;iotHubClientHandle-&gt;LockHandle);</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160; </div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;        <span class="keywordflow">if</span> (savedData-&gt;iotHubClientFileUploadCallback != <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;        {</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;            <span class="comment">/*Codes_SRS_IOTHUBCLIENT_02_055: [ If IoTHubClient_LL_UploadToBlob fails then the thread shall call iotHubClientFileUploadCallbackInternal passing as result FILE_UPLOAD_ERROR and as context the structure from SRS IOTHUBCLIENT 02 051. ]*/</span></div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;            savedData-&gt;iotHubClientFileUploadCallback(upload_result, savedData-&gt;context);</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;        }</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    }</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    {</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Lock failed&quot;</span>);</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    }</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160; </div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;    <span class="comment">/*Codes_SRS_IOTHUBCLIENT_02_071: [ The thread shall mark itself as disposable. ]*/</span></div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#a146c21d68c41777d20ef1f7e30518505">Lock</a>(savedData-&gt;lockGarbage) != LOCK_OK)</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    {</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;unable to Lock - trying anyway&quot;</span>);</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;        savedData-&gt;canBeGarbageCollected = 1;</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;    }</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    {</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;        savedData-&gt;canBeGarbageCollected = 1;</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160; </div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#aef3dd970e9edfc49b414aa6cb0f3ad84">Unlock</a>(savedData-&gt;lockGarbage) != LOCK_OK)</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;        {</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;unable to Unlock after locking&quot;</span>);</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;        }</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    }</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160; </div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    <a class="code" href="threadapi_8c.html#a304fd6867f922d6321f36569d1769d04">ThreadAPI_Exit</a>(0);</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;}</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160; </div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;<span class="preprocessor">#ifdef USE_UPLOADTOBLOB</span></div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;IOTHUB_CLIENT_RESULT IoTHubClient_UploadToBlobAsync(<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_HANDLE</a> iotHubClientHandle, <span class="keyword">const</span> <span class="keywordtype">char</span>* destinationFileName, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code" href="tag__strings_8h.html#a2090a647eea4ba8be07c28e6d52e97de">source</a>, <span class="keywordtype">size_t</span> <a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a>, <a class="code" href="iothub__client_8h.html#a039d574a949c85ba9c183c88d4ce03bf">IOTHUB_CLIENT_FILE_UPLOAD_CALLBACK</a> iotHubClientFileUploadCallback, <span class="keywordtype">void</span>* context)</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;{</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    IOTHUB_CLIENT_RESULT result;</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;    <span class="comment">/*Codes_SRS_IOTHUBCLIENT_02_047: [ If iotHubClientHandle is NULL then IoTHubClient_UploadToBlobAsync shall fail and return IOTHUB_CLIENT_INVALID_ARG. ]*/</span></div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;    <span class="comment">/*Codes_SRS_IOTHUBCLIENT_02_048: [ If destinationFileName is NULL then IoTHubClient_UploadToBlobAsync shall fail and return IOTHUB_CLIENT_INVALID_ARG. ]*/</span></div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    <span class="comment">/*Codes_SRS_IOTHUBCLIENT_02_049: [ If source is NULL and size is greated than 0 then IoTHubClient_UploadToBlobAsync shall fail and return IOTHUB_CLIENT_INVALID_ARG. ]*/</span></div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;    <span class="keywordflow">if</span> (</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;        (iotHubClientHandle == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ||</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;        (destinationFileName == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ||</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;        ((<a class="code" href="tag__strings_8h.html#a2090a647eea4ba8be07c28e6d52e97de">source</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) &amp;&amp; (<a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a> &gt; 0))</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;        )</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;    {</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;invalid parameters IOTHUB_CLIENT_HANDLE iotHubClientHandle = %p , const char* destinationFileName = %s, const unsigned char* source= %p, size_t size = %lu, IOTHUB_CLIENT_FILE_UPLOAD_CALLBACK iotHubClientFileUploadCallback = %p, void* context = %p&quot;</span>,</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;            iotHubClientHandle,</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;            destinationFileName,</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;            <a class="code" href="tag__strings_8h.html#a2090a647eea4ba8be07c28e6d52e97de">source</a>,</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;            <a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a>,</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;            iotHubClientFileUploadCallback,</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;            context</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;        );</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;        result = IOTHUB_CLIENT_INVALID_ARG;</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;    }</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    {</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;        <span class="comment">/*Codes_SRS_IOTHUBCLIENT_02_051: [IoTHubClient_UploadToBlobAsync shall copy the souce, size, iotHubClientFileUploadCallback, context into a structure.]*/</span></div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;        UPLOADTOBLOB_SAVED_DATA *savedData = (UPLOADTOBLOB_SAVED_DATA *)<a class="code" href="unity__fixture__malloc__overrides_8h.html#acf143577800376dd931c059ecc61ba06">malloc</a>(<span class="keyword">sizeof</span>(UPLOADTOBLOB_SAVED_DATA));</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;        <span class="keywordflow">if</span> (savedData == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;        {</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;            <span class="comment">/*Codes_SRS_IOTHUBCLIENT_02_053: [ If copying to the structure or spawning the thread fails, then IoTHubClient_UploadToBlobAsync shall fail and return IOTHUB_CLIENT_ERROR. ]*/</span></div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;unable to malloc - oom&quot;</span>);</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;            result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;        }</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;        {</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="crt__abstractions_8c.html#a867b1509b0b0a16b1bae1d829679c484">mallocAndStrcpy_s</a>((<span class="keywordtype">char</span>**)&amp;savedData-&gt;destinationFileName, destinationFileName) != 0)</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;            {</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;                <span class="comment">/*Codes_SRS_IOTHUBCLIENT_02_053: [ If copying to the structure or spawning the thread fails, then IoTHubClient_UploadToBlobAsync shall fail and return IOTHUB_CLIENT_ERROR. ]*/</span></div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;unable to mallocAndStrcpy_s&quot;</span>);</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;                <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(savedData);</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;                result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;            }</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;            {</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;                savedData-&gt;size = <a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a>;</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;                <span class="keywordtype">int</span> sourceCloned;</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a> == 0)</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;                {</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;                    savedData-&gt;source = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;                    sourceCloned = 1;</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;                }</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;                {</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;                    savedData-&gt;source = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)<a class="code" href="unity__fixture__malloc__overrides_8h.html#acf143577800376dd931c059ecc61ba06">malloc</a>(<a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a>);</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;                    <span class="keywordflow">if</span> (savedData-&gt;source == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;                    {</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;                        <span class="comment">/*Codes_SRS_IOTHUBCLIENT_02_053: [ If copying to the structure or spawning the thread fails, then IoTHubClient_UploadToBlobAsync shall fail and return IOTHUB_CLIENT_ERROR. ]*/</span></div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;                        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;unable to malloc - oom&quot;</span>);</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;                        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(savedData-&gt;destinationFileName);</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;                        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(savedData);</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;                        sourceCloned = 0;</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;                    }</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;                    {</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;                        sourceCloned = 1;</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;                    }</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;                }</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160; </div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;                <span class="keywordflow">if</span> (sourceCloned == 0)</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;                {</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;                    result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;                }</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;                {</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;                    <a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>* iotHubClientHandleData = (<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE</a>*)iotHubClientHandle;</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160; </div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;                    savedData-&gt;iotHubClientFileUploadCallback = iotHubClientFileUploadCallback;</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;                    savedData-&gt;context = context;</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;                    (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)memcpy(savedData-&gt;source, <a class="code" href="tag__strings_8h.html#a2090a647eea4ba8be07c28e6d52e97de">source</a>, <a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a>);</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160; </div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;                    <span class="keywordflow">if</span> ((result = StartWorkerThreadIfNeeded(iotHubClientHandleData)) != IOTHUB_CLIENT_OK)</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;                    {</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;                        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(savedData-&gt;source);</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;                        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(savedData-&gt;destinationFileName);</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;                        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(savedData);</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;                        result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;                        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;Could not start worker thread&quot;</span>);</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;                    }</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;                    {</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="lock_8c.html#a146c21d68c41777d20ef1f7e30518505">Lock</a>(iotHubClientHandleData-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>) != LOCK_OK) <span class="comment">/*locking because the next statement is changing blobThreadsToBeJoined*/</span></div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;                        {</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;                            <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;unable to lock&quot;</span>);</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;                            <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(savedData-&gt;source);</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;                            <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(savedData-&gt;destinationFileName);</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;                            <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(savedData);</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;                            result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;                        }</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;                        {</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;                            <span class="comment">/*Codes_SRS_IOTHUBCLIENT_02_058: [ IoTHubClient_UploadToBlobAsync shall add the structure to the list of structures that need to be cleaned once file upload finishes. ]*/</span></div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;                            <a class="code" href="structLIST__ITEM__INSTANCE__TAG.html">LIST_ITEM_HANDLE</a> <a class="code" href="cJSON_8h.html#ac76cea59d438ba893d2f82aabb367d14">item</a> = <a class="code" href="singlylinkedlist_8c.html#a42bf74145425439976828ec33f4642e9">singlylinkedlist_add</a>(iotHubClientHandleData-&gt;savedDataToBeCleaned, savedData);</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="cJSON_8h.html#ac76cea59d438ba893d2f82aabb367d14">item</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;                            {</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;                                <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;unable to singlylinkedlist_add&quot;</span>);</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;                                <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(savedData-&gt;source);</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;                                <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(savedData-&gt;destinationFileName);</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;                                <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(savedData);</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;                                result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;                            }</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;                            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;                            {</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;                                savedData-&gt;iotHubClientHandle = iotHubClientHandle;</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;                                savedData-&gt;canBeGarbageCollected = 0;</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;                                <span class="keywordflow">if</span> ((savedData-&gt;lockGarbage = <a class="code" href="lock_8c.html#a3683432285e999baa8c543f27633829c">Lock_Init</a>()) == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;                                {</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;                                    (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="singlylinkedlist_8c.html#a4989115eb394f221a8af5db9a2873d1b">singlylinkedlist_remove</a>(iotHubClientHandleData-&gt;savedDataToBeCleaned, <a class="code" href="cJSON_8h.html#ac76cea59d438ba893d2f82aabb367d14">item</a>);</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;                                    <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(savedData-&gt;source);</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;                                    <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(savedData-&gt;destinationFileName);</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;                                    <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(savedData);</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;                                    result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;                                    <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;unable to Lock_Init&quot;</span>);</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;                                }</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;                                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;                                {</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;                                    <span class="comment">/*Codes_SRS_IOTHUBCLIENT_02_052: [ IoTHubClient_UploadToBlobAsync shall spawn a thread passing the structure build in SRS IOTHUBCLIENT 02 051 as thread data.]*/</span></div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;                                    <span class="keywordflow">if</span> (<a class="code" href="threadapi_8c.html#aed50c815f4090261c06968bb90644b50">ThreadAPI_Create</a>(&amp;savedData-&gt;uploadingThreadHandle, uploadingThread, savedData) != THREADAPI_OK)</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;                                    {</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;                                        <span class="comment">/*Codes_SRS_IOTHUBCLIENT_02_053: [ If copying to the structure or spawning the thread fails, then IoTHubClient_UploadToBlobAsync shall fail and return IOTHUB_CLIENT_ERROR. ]*/</span></div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;                                        <a class="code" href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a>(<span class="stringliteral">&quot;unablet to ThreadAPI_Create&quot;</span>);</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;                                        (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="lock_8c.html#ac9743d97f19aac4a0bda808e57ef1249">Lock_Deinit</a>(savedData-&gt;lockGarbage);</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;                                        (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="singlylinkedlist_8c.html#a4989115eb394f221a8af5db9a2873d1b">singlylinkedlist_remove</a>(iotHubClientHandleData-&gt;savedDataToBeCleaned, <a class="code" href="cJSON_8h.html#ac76cea59d438ba893d2f82aabb367d14">item</a>);</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;                                        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(savedData-&gt;source);</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;                                        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(savedData-&gt;destinationFileName);</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;                                        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(savedData);</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;                                        result = IOTHUB_CLIENT_ERROR;</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;                                    }</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;                                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;                                    {</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;                                        result = IOTHUB_CLIENT_OK;</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;                                    }</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;                                }</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;                            }</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160; </div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;                            (<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a>)<a class="code" href="lock_8c.html#aef3dd970e9edfc49b414aa6cb0f3ad84">Unlock</a>(iotHubClientHandleData-&gt;<a class="code" href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">LockHandle</a>);</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;                        }</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;                    }</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;                }</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;            }</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;        }</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;    }</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;}</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/*USE_UPLOADTOBLOB*/</span><span class="preprocessor"></span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aiothub__client_8c_html_a112ff42c22debd733490373cdeac54b4"><div class="ttname"><a href="iothub__client_8c.html#a112ff42c22debd733490373cdeac54b4">USER_CALLBACK_TYPE_VALUES</a></div><div class="ttdeci">#define USER_CALLBACK_TYPE_VALUES</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00065">iothub_client.c:64</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__INSTANCE__TAG_html_a3aa9e99f277feb72f2a3715a5b1ef7d1"><div class="ttname"><a href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3aa9e99f277feb72f2a3715a5b1ef7d1">IOTHUB_CLIENT_INSTANCE_TAG::IoTHubClientLLHandle</a></div><div class="ttdeci">IOTHUB_CLIENT_LL_HANDLE IoTHubClientLLHandle</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00026">iothub_client.c:26</a></div></div>
<div class="ttc" id="astructVECTOR__TAG_html"><div class="ttname"><a href="structVECTOR__TAG.html">VECTOR_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="vector__types__internal_8h_source.html#l00013">vector_types_internal.h:14</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__DEVICE__CONFIG__TAG_html_a90dfafc0edcf5c2ca2b8545bae53574a"><div class="ttname"><a href="structIOTHUB__CLIENT__DEVICE__CONFIG__TAG.html#a90dfafc0edcf5c2ca2b8545bae53574a">IOTHUB_CLIENT_DEVICE_CONFIG_TAG::protocol</a></div><div class="ttdeci">IOTHUB_CLIENT_TRANSPORT_PROVIDER protocol</div><div class="ttdoc">A function pointer that is passed into the IoTHubClientCreate. A function definition for AMQP is defi...</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8h_source.html#l00211">iothub_client_ll.h:211</a></div></div>
<div class="ttc" id="aiothub__client__ll_8h_html_aa758c6c04994938fae9257289760d01a"><div class="ttname"><a href="iothub__client__ll_8h.html#aa758c6c04994938fae9257289760d01a">IOTHUB_CLIENT_DEVICE_METHOD_CALLBACK_ASYNC</a></div><div class="ttdeci">int(* IOTHUB_CLIENT_DEVICE_METHOD_CALLBACK_ASYNC)(const char *method_name, const unsigned char *payload, size_t size, unsigned char **response, size_t *response_size, void *userContextCallback)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8h_source.html#l00172">iothub_client_ll.h:172</a></div></div>
<div class="ttc" id="amacro__utils_8h_html_aa8c798c7579b5c5a23a87b213f9accd6"><div class="ttname"><a href="macro__utils_8h.html#aa8c798c7579b5c5a23a87b213f9accd6">__FAILURE__</a></div><div class="ttdeci">#define __FAILURE__</div><div class="ttdef"><b>Definition:</b> <a href="macro__utils_8h_source.html#l00019">macro_utils.h:18</a></div></div>
<div class="ttc" id="astructMETHOD__CALLBACK__INFO__TAG_html"><div class="ttname"><a href="structMETHOD__CALLBACK__INFO__TAG.html">METHOD_CALLBACK_INFO_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00099">iothub_client.c:100</a></div></div>
<div class="ttc" id="aiothub__client__ll_8c_html_af5e5e122bdc1f1228ae2116fc158b3d6"><div class="ttname"><a href="iothub__client__ll_8c.html#af5e5e122bdc1f1228ae2116fc158b3d6">IoTHubClient_LL_DoWork</a></div><div class="ttdeci">void IoTHubClient_LL_DoWork(IOTHUB_CLIENT_LL_HANDLE iotHubClientHandle)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8c_source.html#l01257">iothub_client_ll.c:1257</a></div></div>
<div class="ttc" id="astructUSER__CALLBACK__INFO__TAG_html_a8a7e3cd9252aabc750beb1c67743533f"><div class="ttname"><a href="structUSER__CALLBACK__INFO__TAG.html#a8a7e3cd9252aabc750beb1c67743533f">USER_CALLBACK_INFO_TAG::iothub_callback</a></div><div class="ttdeci">union USER_CALLBACK_INFO_TAG::IOTHUB_CALLBACK iothub_callback</div></div>
<div class="ttc" id="astructUSER__CALLBACK__INFO__TAG_html"><div class="ttname"><a href="structUSER__CALLBACK__INFO__TAG.html">USER_CALLBACK_INFO_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00106">iothub_client.c:107</a></div></div>
<div class="ttc" id="aiothub__client__ll_8h_html_a41b17fcb2cb70587e3576226561648a0"><div class="ttname"><a href="iothub__client__ll_8h.html#a41b17fcb2cb70587e3576226561648a0">IOTHUB_CLIENT_EVENT_CONFIRMATION_CALLBACK</a></div><div class="ttdeci">void(* IOTHUB_CLIENT_EVENT_CONFIRMATION_CALLBACK)(IOTHUB_CLIENT_CONFIRMATION_RESULT result, void *userContextCallback)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8h_source.html#l00165">iothub_client_ll.h:165</a></div></div>
<div class="ttc" id="astructCONNECTION__STATUS__CALLBACK__INFO__TAG_html_a9263849bc574c4df644ef66c5a1663b6"><div class="ttname"><a href="structCONNECTION__STATUS__CALLBACK__INFO__TAG.html#a9263849bc574c4df644ef66c5a1663b6">CONNECTION_STATUS_CALLBACK_INFO_TAG::status_reason</a></div><div class="ttdeci">IOTHUB_CLIENT_CONNECTION_STATUS_REASON status_reason</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00096">iothub_client.c:96</a></div></div>
<div class="ttc" id="aiothub__client_8c_html_a3e60e953d03a503c1ae30dd6af7f390f"><div class="ttname"><a href="iothub__client_8c.html#a3e60e953d03a503c1ae30dd6af7f390f">IoTHubClient_SendEventAsync</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubClient_SendEventAsync(IOTHUB_CLIENT_HANDLE iotHubClientHandle, IOTHUB_MESSAGE_HANDLE eventMessageHandle, IOTHUB_CLIENT_EVENT_CONFIRMATION_CALLBACK eventConfirmationCallback, void *userContextCallback)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00984">iothub_client.c:984</a></div></div>
<div class="ttc" id="aiothub__client__ll_8c_html_ad236a781c7fb988216b98be099125447"><div class="ttname"><a href="iothub__client__ll_8c.html#ad236a781c7fb988216b98be099125447">IoTHubClient_LL_Create</a></div><div class="ttdeci">IOTHUB_CLIENT_LL_HANDLE IoTHubClient_LL_Create(const IOTHUB_CLIENT_CONFIG *config)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8c_source.html#l00877">iothub_client_ll.c:877</a></div></div>
<div class="ttc" id="athreadapi_8h_html_a51f9e04bbea1ebd9fd7281a2f2a4fbf3"><div class="ttname"><a href="threadapi_8h.html#a51f9e04bbea1ebd9fd7281a2f2a4fbf3">THREAD_HANDLE</a></div><div class="ttdeci">void * THREAD_HANDLE</div><div class="ttdef"><b>Definition:</b> <a href="threadapi_8h_source.html#l00032">threadapi.h:32</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__INSTANCE__TAG_html_a1a889fb66cede394cdbebd65bc5643b4"><div class="ttname"><a href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1a889fb66cede394cdbebd65bc5643b4">IOTHUB_CLIENT_INSTANCE_TAG::devicetwin_user_context</a></div><div class="ttdeci">struct IOTHUB_QUEUE_CONTEXT_TAG * devicetwin_user_context</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00043">iothub_client.c:43</a></div></div>
<div class="ttc" id="acomponents_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c_html_ac795f6438412ff56cd110ac3308c87e5"><div class="ttname"><a href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c.html#ac795f6438412ff56cd110ac3308c87e5">VECTOR_size</a></div><div class="ttdeci">size_t VECTOR_size(VECTOR_HANDLE handle)</div><div class="ttdef"><b>Definition:</b> <a href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c_source.html#l00323">vector.c:323</a></div></div>
<div class="ttc" id="astructREPORTED__STATE__CALLBACK__INFO__TAG_html"><div class="ttname"><a href="structREPORTED__STATE__CALLBACK__INFO__TAG.html">REPORTED_STATE_CALLBACK_INFO_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00088">iothub_client.c:89</a></div></div>
<div class="ttc" id="aiothub__client__ll_8c_html_a70eb58c7ede92f75001104ff4745faa2"><div class="ttname"><a href="iothub__client__ll_8c.html#a70eb58c7ede92f75001104ff4745faa2">IoTHubClient_LL_SetOption</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubClient_LL_SetOption(IOTHUB_CLIENT_LL_HANDLE iotHubClientHandle, const char *optionName, const void *value)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8c_source.html#l01661">iothub_client_ll.c:1661</a></div></div>
<div class="ttc" id="aiothub__client__ll_8c_html_aadecae0b07958725e83cae943250469d"><div class="ttname"><a href="iothub__client__ll_8c.html#aadecae0b07958725e83cae943250469d">IoTHubClient_LL_CreateFromConnectionString</a></div><div class="ttdeci">IOTHUB_CLIENT_LL_HANDLE IoTHubClient_LL_CreateFromConnectionString(const char *connectionString, IOTHUB_CLIENT_TRANSPORT_PROVIDER protocol)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8c_source.html#l00607">iothub_client_ll.c:607</a></div></div>
<div class="ttc" id="aiothub__client_8c_html_a44acf1df96a838735870184172d2f783"><div class="ttname"><a href="iothub__client_8c.html#a44acf1df96a838735870184172d2f783">IoTHubClient_SetDeviceMethodCallback</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubClient_SetDeviceMethodCallback(IOTHUB_CLIENT_HANDLE iotHubClientHandle, IOTHUB_CLIENT_DEVICE_METHOD_CALLBACK_ASYNC deviceMethodCallback, void *userContextCallback)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l01566">iothub_client.c:1566</a></div></div>
<div class="ttc" id="abuffer_8c_html_ad958dcfb88df3654971fb5d1648bdcff"><div class="ttname"><a href="buffer_8c.html#ad958dcfb88df3654971fb5d1648bdcff">BUFFER_length</a></div><div class="ttdeci">size_t BUFFER_length(BUFFER_HANDLE handle)</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00587">buffer.c:587</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__INSTANCE__TAG_html_a20fd565795802e8d1bb855017506d7c9"><div class="ttname"><a href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a20fd565795802e8d1bb855017506d7c9">IOTHUB_CLIENT_INSTANCE_TAG::method_user_context</a></div><div class="ttdeci">struct IOTHUB_QUEUE_CONTEXT_TAG * method_user_context</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00046">iothub_client.c:46</a></div></div>
<div class="ttc" id="astructSTRING__TAG_html"><div class="ttname"><a href="structSTRING__TAG.html">STRING_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="strings_8c_source.html#l00024">strings.c:25</a></div></div>
<div class="ttc" id="aiothub__client_8c_html_a86d2a2ad2209f6e33bf59ee586abc042"><div class="ttname"><a href="iothub__client_8c.html#a86d2a2ad2209f6e33bf59ee586abc042">IoTHubClient_SetMessageCallback</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubClient_SetMessageCallback(IOTHUB_CLIENT_HANDLE iotHubClientHandle, IOTHUB_CLIENT_MESSAGE_CALLBACK_ASYNC messageCallback, void *userContextCallback)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l01093">iothub_client.c:1093</a></div></div>
<div class="ttc" id="aiothub__client__ll_8h_html_a85d87807cf4e5cc48e62a292007f44cb"><div class="ttname"><a href="iothub__client__ll_8h.html#a85d87807cf4e5cc48e62a292007f44cb">IOTHUB_CLIENT_TRANSPORT_PROVIDER</a></div><div class="ttdeci">const TRANSPORT_PROVIDER *(* IOTHUB_CLIENT_TRANSPORT_PROVIDER)(void)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8h_source.html#l00168">iothub_client_ll.h:168</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__INSTANCE__TAG_html_aeba8103aeb06c8281a54013d644b7b30"><div class="ttname"><a href="structIOTHUB__CLIENT__INSTANCE__TAG.html#aeba8103aeb06c8281a54013d644b7b30">IOTHUB_CLIENT_INSTANCE_TAG::message_user_context</a></div><div class="ttdeci">struct IOTHUB_QUEUE_CONTEXT_TAG * message_user_context</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00045">iothub_client.c:45</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__LL__HANDLE__DATA__TAG_html"><div class="ttname"><a href="structIOTHUB__CLIENT__LL__HANDLE__DATA__TAG.html">IOTHUB_CLIENT_LL_HANDLE_DATA_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8c_source.html#l00061">iothub_client_ll.c:62</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__DEVICE__CONFIG__TAG_html_a9df9aa57a8f63add838501219b132807"><div class="ttname"><a href="structIOTHUB__CLIENT__DEVICE__CONFIG__TAG.html#a9df9aa57a8f63add838501219b132807">IOTHUB_CLIENT_DEVICE_CONFIG_TAG::deviceKey</a></div><div class="ttdeci">const char * deviceKey</div><div class="ttdoc">The device key used to authenticate the device. x509 authentication is is not supported for multiplex...</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8h_source.html#l00221">iothub_client_ll.h:221</a></div></div>
<div class="ttc" id="aiothubtransport_8c_html_abebd32e98fd36d58098738024eef0e88"><div class="ttname"><a href="iothubtransport_8c.html#abebd32e98fd36d58098738024eef0e88">IoTHubTransport_GetLock</a></div><div class="ttdeci">LOCK_HANDLE IoTHubTransport_GetLock(TRANSPORT_HANDLE transportHandle)</div><div class="ttdef"><b>Definition:</b> <a href="iothubtransport_8c_source.html#l00358">iothubtransport.c:358</a></div></div>
<div class="ttc" id="amacro__utils_8h_html_a2645534006fbb080978beb9682eb0c92"><div class="ttname"><a href="macro__utils_8h.html#a2645534006fbb080978beb9682eb0c92">DEFINE_ENUM</a></div><div class="ttdeci">#define DEFINE_ENUM(enumName,...)</div><div class="ttdef"><b>Definition:</b> <a href="macro__utils_8h_source.html#l12570">macro_utils.h:12569</a></div></div>
<div class="ttc" id="aiothub__client_8c_html_ac34cf252e6306068821ede9131606cc4"><div class="ttname"><a href="iothub__client_8c.html#ac34cf252e6306068821ede9131606cc4">IoTHubClient_SendReportedState</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubClient_SendReportedState(IOTHUB_CLIENT_HANDLE iotHubClientHandle, const unsigned char *reportedState, size_t size, IOTHUB_CLIENT_REPORTED_STATE_CALLBACK reportedStateCallback, void *userContextCallback)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l01492">iothub_client.c:1492</a></div></div>
<div class="ttc" id="aiothub__client_8c_html_ac781d5481baf2116fa29b1a7fdc70da9"><div class="ttname"><a href="iothub__client_8c.html#ac781d5481baf2116fa29b1a7fdc70da9">EVENT_CONFIRM_CALLBACK_INFO</a></div><div class="ttdeci">struct EVENT_CONFIRM_CALLBACK_INFO_TAG EVENT_CONFIRM_CALLBACK_INFO</div></div>
<div class="ttc" id="aiothub__client__ll_8h_html_ad0d7e0712e620b1d55e72652f4f4f560"><div class="ttname"><a href="iothub__client__ll_8h.html#ad0d7e0712e620b1d55e72652f4f4f560">IOTHUB_CLIENT_CONNECTION_STATUS_CALLBACK</a></div><div class="ttdeci">void(* IOTHUB_CLIENT_CONNECTION_STATUS_CALLBACK)(IOTHUB_CLIENT_CONNECTION_STATUS result, IOTHUB_CLIENT_CONNECTION_STATUS_REASON reason, void *userContextCallback)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8h_source.html#l00166">iothub_client_ll.h:166</a></div></div>
<div class="ttc" id="aoptimize__size_8h_html"><div class="ttname"><a href="optimize__size_8h.html">optimize_size.h</a></div></div>
<div class="ttc" id="aiothub__client__ll_8c_html_a252782e5cbee79b22e8ff15885cd2018"><div class="ttname"><a href="iothub__client__ll_8c.html#a252782e5cbee79b22e8ff15885cd2018">IoTHubClient_LL_SendMessageDisposition</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubClient_LL_SendMessageDisposition(IOTHUB_CLIENT_LL_HANDLE iotHubClientHandle, MESSAGE_CALLBACK_INFO *message_data, IOTHUBMESSAGE_DISPOSITION_RESULT disposition)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8c_source.html#l01205">iothub_client_ll.c:1205</a></div></div>
<div class="ttc" id="aiothubtransport_8c_html_af0d337b880cca04119460c79f7c4d46c"><div class="ttname"><a href="iothubtransport_8c.html#af0d337b880cca04119460c79f7c4d46c">IoTHubTransport_JoinWorkerThread</a></div><div class="ttdeci">void IoTHubTransport_JoinWorkerThread(TRANSPORT_HANDLE transportHandle, IOTHUB_CLIENT_HANDLE clientHandle)</div><div class="ttdef"><b>Definition:</b> <a href="iothubtransport_8c_source.html#l00441">iothubtransport.c:441</a></div></div>
<div class="ttc" id="anamespaceudp__server_html_ade67d79c46c11d44cd799213c5a772ca"><div class="ttname"><a href="namespaceudp__server.html#ade67d79c46c11d44cd799213c5a772ca">udp_server.data</a></div><div class="ttdeci">data</div><div class="ttdef"><b>Definition:</b> <a href="udp__server_8py_source.html#l00023">udp_server.py:23</a></div></div>
<div class="ttc" id="acrt__abstractions_8c_html_a867b1509b0b0a16b1bae1d829679c484"><div class="ttname"><a href="crt__abstractions_8c.html#a867b1509b0b0a16b1bae1d829679c484">mallocAndStrcpy_s</a></div><div class="ttdeci">int mallocAndStrcpy_s(char **destination, const char *source)</div><div class="ttdef"><b>Definition:</b> <a href="crt__abstractions_8c_source.html#l00681">crt_abstractions.c:681</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__CONFIG__TAG_html_aa7753cf96255b57c65c56d8fedd3d7ca"><div class="ttname"><a href="structIOTHUB__CLIENT__CONFIG__TAG.html#aa7753cf96255b57c65c56d8fedd3d7ca">IOTHUB_CLIENT_CONFIG_TAG::protocol</a></div><div class="ttdeci">IOTHUB_CLIENT_TRANSPORT_PROVIDER protocol</div><div class="ttdoc">A function pointer that is passed into the IoTHubClientCreate. A function definition for AMQP is defi...</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8h_source.html#l00182">iothub_client_ll.h:182</a></div></div>
<div class="ttc" id="astructTRANSPORT__HANDLE__DATA__TAG_html"><div class="ttname"><a href="structTRANSPORT__HANDLE__DATA__TAG.html">TRANSPORT_HANDLE_DATA_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="iothubtransport_8c_source.html#l00017">iothubtransport.c:18</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__INSTANCE__TAG_html_ae5da1f54d8bfbefcb6c40a8e94565edf"><div class="ttname"><a href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ae5da1f54d8bfbefcb6c40a8e94565edf">IOTHUB_CLIENT_INSTANCE_TAG::connection_status_user_context</a></div><div class="ttdeci">struct IOTHUB_QUEUE_CONTEXT_TAG * connection_status_user_context</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00044">iothub_client.c:44</a></div></div>
<div class="ttc" id="aiothub__client__ll_8c_html_a8a0b5a41fae26b16aa01134d09e93278"><div class="ttname"><a href="iothub__client__ll_8c.html#a8a0b5a41fae26b16aa01134d09e93278">IoTHubClient_LL_SetRetryPolicy</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubClient_LL_SetRetryPolicy(IOTHUB_CLIENT_LL_HANDLE iotHubClientHandle, IOTHUB_CLIENT_RETRY_POLICY retryPolicy, size_t retryTimeoutLimitInSeconds)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8c_source.html#l01570">iothub_client_ll.c:1570</a></div></div>
<div class="ttc" id="anamespacegen__esp32part_html_a614575e8b56274b0a0bafca473224e5e"><div class="ttname"><a href="namespacegen__esp32part.html#a614575e8b56274b0a0bafca473224e5e">gen_esp32part.status</a></div><div class="ttdeci">def status(msg)</div><div class="ttdef"><b>Definition:</b> <a href="gen__esp32part_8py_source.html#l00076">gen_esp32part.py:76</a></div></div>
<div class="ttc" id="aiothub__client_8c_html_a47fce212d1c5026e02ccd670242e1d83"><div class="ttname"><a href="iothub__client_8c.html#a47fce212d1c5026e02ccd670242e1d83">IoTHubClient_Destroy</a></div><div class="ttdeci">void IoTHubClient_Destroy(IOTHUB_CLIENT_HANDLE iotHubClientHandle)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00843">iothub_client.c:843</a></div></div>
<div class="ttc" id="astructDEVICE__TWIN__CALLBACK__INFO__TAG_html_a3116824aac4189019797b4f6de4afff6"><div class="ttname"><a href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html#a3116824aac4189019797b4f6de4afff6">DEVICE_TWIN_CALLBACK_INFO_TAG::update_state</a></div><div class="ttdeci">DEVICE_TWIN_UPDATE_STATE update_state</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00078">iothub_client.c:78</a></div></div>
<div class="ttc" id="aunionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK_html_a6a747cd66461654e3d1529ca52feb478"><div class="ttname"><a href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a6a747cd66461654e3d1529ca52feb478">USER_CALLBACK_INFO_TAG::IOTHUB_CALLBACK::message_cb_info</a></div><div class="ttdeci">MESSAGE_CALLBACK_INFO * message_cb_info</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00117">iothub_client.c:117</a></div></div>
<div class="ttc" id="abuffer_8c_html_aab70309b34abe6a6451ad4b7db135144"><div class="ttname"><a href="buffer_8c.html#aab70309b34abe6a6451ad4b7db135144">BUFFER_u_char</a></div><div class="ttdeci">unsigned char * BUFFER_u_char(BUFFER_HANDLE handle)</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00569">buffer.c:569</a></div></div>
<div class="ttc" id="aiothub__client_8c_html_a3934d3b340ec1483d79acf34d1ea950f"><div class="ttname"><a href="iothub__client_8c.html#a3934d3b340ec1483d79acf34d1ea950f">IoTHubClient_SetDeviceMethodCallback_Ex</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubClient_SetDeviceMethodCallback_Ex(IOTHUB_CLIENT_HANDLE iotHubClientHandle, IOTHUB_CLIENT_INBOUND_DEVICE_METHOD_CALLBACK inboundDeviceMethodCallback, void *userContextCallback)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l01649">iothub_client.c:1649</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__DEVICE__CONFIG__TAG_html"><div class="ttname"><a href="structIOTHUB__CLIENT__DEVICE__CONFIG__TAG.html">IOTHUB_CLIENT_DEVICE_CONFIG_TAG</a></div><div class="ttdoc">This struct captures IoTHub client device configuration.</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8h_source.html#l00205">iothub_client_ll.h:206</a></div></div>
<div class="ttc" id="aRPSL_8txt_html_ae227cfd33a5880ffce840d383c2fbff3"><div class="ttname"><a href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a></div><div class="ttdeci">Conditions &amp;Restrictions Subject to the terms and conditions of this Licensor hereby grants effective on the date You accept this a royalty free</div><div class="ttdef"><b>Definition:</b> <a href="RPSL_8txt_source.html#l00105">RPSL.txt:105</a></div></div>
<div class="ttc" id="aiothub__client_8c_html_a1fd17a38514d4e3f557197cbadff87d0"><div class="ttname"><a href="iothub__client_8c.html#a1fd17a38514d4e3f557197cbadff87d0">METHOD_CALLBACK_INFO</a></div><div class="ttdeci">struct METHOD_CALLBACK_INFO_TAG METHOD_CALLBACK_INFO</div></div>
<div class="ttc" id="aArduino-IRremote_2LICENSE_8txt_html_a9642942062a0c88c684a2bb3289aa738"><div class="ttname"><a href="Arduino-IRremote_2LICENSE_8txt.html#a9642942062a0c88c684a2bb3289aa738">reason</a></div><div class="ttdeci">if the work is an executable linked with the with the complete machine readable work that uses the as object code and or source so that the user can modify the Library and then relink to produce a modified executable containing the modified rather than copying library functions into the if the user installs as long as the modified version is interface compatible with the version that the work was made with c Accompany the work with a written valid for at least three to give the same user the materials specified in for a charge no more than the cost of performing this distribution d If distribution of the work is made by offering access to copy from a designated offer equivalent access to copy the above specified materials from the same place e Verify that the user has already received a copy of these materials or that you have already sent this user a copy For an the required form of the work that uses the Library must include any data and utility programs needed for reproducing the executable from it as a special the materials to be distributed need not include anything that is normally and so on of the operating system on which the executable unless that component itself accompanies the executable It may happen that this requirement contradicts the license restrictions of other proprietary libraries that do not normally accompany the operating system Such a contradiction means you cannot use both them and the Library together in an executable that you distribute You may place library facilities that are a work based on the Library side by side in a single library together with other library facilities not covered by this and distribute such a combined provided that the separate distribution of the work based on the Library and of the other library facilities is otherwise and provided that you do these two uncombined with any other library facilities This must be distributed under the terms of the Sections above b Give prominent notice with the combined library of the fact that part of it is a work based on the and explaining where to find the accompanying uncombined form of the same work You may not link or distribute the Library except as expressly provided under this License Any attempt otherwise to link or distribute the Library is and will automatically terminate your rights under this License parties who have received or from you under this License will not have their licenses terminated so long as such parties remain in full compliance You are not required to accept this since you have not signed it nothing else grants you permission to modify or distribute the Library or its derivative works These actions are prohibited by law if you do not accept this License by modifying or distributing the you indicate your acceptance of this License to do and all its terms and conditions for distributing or modifying the Library or works based on it Each time you redistribute the the recipient automatically receives a license from the original licensor to link with or modify the Library subject to these terms and conditions You may not impose any further restrictions on the recipients exercise of the rights granted herein You are not responsible for enforcing compliance by third parties with this License as a consequence of a court judgment or allegation of patent infringement or for any other reason(not limited to patent issues)</div></div>
<div class="ttc" id="aiothub__client__ll_8c_html_a21b712300499f014b8c467e195f2503c"><div class="ttname"><a href="iothub__client__ll_8c.html#a21b712300499f014b8c467e195f2503c">IoTHubClient_LL_GetLastMessageReceiveTime</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubClient_LL_GetLastMessageReceiveTime(IOTHUB_CLIENT_LL_HANDLE iotHubClientHandle, time_t *lastMessageReceiveTime)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8c_source.html#l01630">iothub_client_ll.c:1630</a></div></div>
<div class="ttc" id="aiothub__client_8c_html_acda949e1d5657a858a071ca8da90232a"><div class="ttname"><a href="iothub__client_8c.html#acda949e1d5657a858a071ca8da90232a">IoTHubClient_SetRetryPolicy</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubClient_SetRetryPolicy(IOTHUB_CLIENT_HANDLE iotHubClientHandle, IOTHUB_CLIENT_RETRY_POLICY retryPolicy, size_t retryTimeoutLimitInSeconds)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l01253">iothub_client.c:1253</a></div></div>
<div class="ttc" id="aiothub__client_8c_html_a7e4253f4df8cdef79cbe44d33c73547d"><div class="ttname"><a href="iothub__client_8c.html#a7e4253f4df8cdef79cbe44d33c73547d">IoTHubClient_Create</a></div><div class="ttdeci">IOTHUB_CLIENT_HANDLE IoTHubClient_Create(const IOTHUB_CLIENT_CONFIG *config)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00810">iothub_client.c:810</a></div></div>
<div class="ttc" id="asignal_8h_html_a4497f20b236a139698faae200907f375"><div class="ttname"><a href="signal_8h.html#a4497f20b236a139698faae200907f375">sig_atomic_t</a></div><div class="ttdeci">_BEGIN_STD_C typedef int sig_atomic_t</div><div class="ttdef"><b>Definition:</b> <a href="signal_8h_source.html#l00009">signal.h:9</a></div></div>
<div class="ttc" id="aiothub__client__ll_8c_html_a738828c16b0f1479401bf910c34bccfe"><div class="ttname"><a href="iothub__client__ll_8c.html#a738828c16b0f1479401bf910c34bccfe">IoTHubClient_LL_DeviceMethodResponse</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubClient_LL_DeviceMethodResponse(IOTHUB_CLIENT_LL_HANDLE iotHubClientHandle, METHOD_HANDLE methodId, const unsigned char *response, size_t response_size, int status_response)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8c_source.html#l01999">iothub_client_ll.c:1999</a></div></div>
<div class="ttc" id="astructMETHOD__CALLBACK__INFO__TAG_html_aeec0712a3ac1da4bc99215650a9630ab"><div class="ttname"><a href="structMETHOD__CALLBACK__INFO__TAG.html#aeec0712a3ac1da4bc99215650a9630ab">METHOD_CALLBACK_INFO_TAG::method_id</a></div><div class="ttdeci">METHOD_HANDLE method_id</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00103">iothub_client.c:103</a></div></div>
<div class="ttc" id="astructMETHOD__CALLBACK__INFO__TAG_html_a9ba1702222c78679def85ecd451731c3"><div class="ttname"><a href="structMETHOD__CALLBACK__INFO__TAG.html#a9ba1702222c78679def85ecd451731c3">METHOD_CALLBACK_INFO_TAG::method_name</a></div><div class="ttdeci">STRING_HANDLE method_name</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00101">iothub_client.c:101</a></div></div>
<div class="ttc" id="astructIOTHUB__MESSAGE__HANDLE__DATA__TAG_html"><div class="ttname"><a href="structIOTHUB__MESSAGE__HANDLE__DATA__TAG.html">IOTHUB_MESSAGE_HANDLE_DATA_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="iothub__message_8c_source.html#l00018">iothub_message.c:19</a></div></div>
<div class="ttc" id="aiothub__transport__ll_8h_html_a1cc79695294f89e97fb945066a3b3d77"><div class="ttname"><a href="iothub__transport__ll_8h.html#a1cc79695294f89e97fb945066a3b3d77">METHOD_HANDLE</a></div><div class="ttdeci">void * METHOD_HANDLE</div><div class="ttdef"><b>Definition:</b> <a href="iothub__transport__ll_8h_source.html#l00017">iothub_transport_ll.h:17</a></div></div>
<div class="ttc" id="acJSON_8h_html_a750b5d744c39a06bfb13e6eb010e35d0"><div class="ttname"><a href="cJSON_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition:</b> <a href="cJSON_8h_source.html#l00168">cJSON.h:168</a></div></div>
<div class="ttc" id="aiothub__client__ll_8h_html_a9ae117da9222a5138e31a8953ce18bbc"><div class="ttname"><a href="iothub__client__ll_8h.html#a9ae117da9222a5138e31a8953ce18bbc">IOTHUB_CLIENT_REPORTED_STATE_CALLBACK</a></div><div class="ttdeci">void(* IOTHUB_CLIENT_REPORTED_STATE_CALLBACK)(int status_code, void *userContextCallback)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8h_source.html#l00171">iothub_client_ll.h:171</a></div></div>
<div class="ttc" id="alibraries_2AzureIoT_2src_2az__iot_2c-utility_2inc_2azure__c__shared__utility_2lock_8h_html_a83187a1340d2a8c817783e74f55d8281"><div class="ttname"><a href="libraries_2AzureIoT_2src_2az__iot_2c-utility_2inc_2azure__c__shared__utility_2lock_8h.html#a83187a1340d2a8c817783e74f55d8281">LOCK_HANDLE</a></div><div class="ttdeci">void * LOCK_HANDLE</div><div class="ttdef"><b>Definition:</b> <a href="libraries_2AzureIoT_2src_2az__iot_2c-utility_2inc_2azure__c__shared__utility_2lock_8h_source.html#l00024">lock.h:24</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__INSTANCE__TAG_html_a4a48a863612c79a2d974e1809c2c4443"><div class="ttname"><a href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a4a48a863612c79a2d974e1809c2c4443">IOTHUB_CLIENT_INSTANCE_TAG::desired_state_callback</a></div><div class="ttdeci">IOTHUB_CLIENT_DEVICE_TWIN_CALLBACK desired_state_callback</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00036">iothub_client.c:36</a></div></div>
<div class="ttc" id="aiothub__client_8c_html_ae3970b65ec664310bccadae17b605536"><div class="ttname"><a href="iothub__client_8c.html#ae3970b65ec664310bccadae17b605536">USER_CALLBACK_INFO</a></div><div class="ttdeci">struct USER_CALLBACK_INFO_TAG USER_CALLBACK_INFO</div></div>
<div class="ttc" id="astructBUFFER__TAG_html"><div class="ttname"><a href="structBUFFER__TAG.html">BUFFER_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00013">buffer.c:14</a></div></div>
<div class="ttc" id="aiothub__client_8c_html_a7a0ff66340551d6748b13e9ca74f3197"><div class="ttname"><a href="iothub__client_8c.html#a7a0ff66340551d6748b13e9ca74f3197">IoTHubClient_SetOption</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubClient_SetOption(IOTHUB_CLIENT_HANDLE iotHubClientHandle, const char *optionName, const void *value)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l01373">iothub_client.c:1373</a></div></div>
<div class="ttc" id="aumock__c__prod_8h_html"><div class="ttname"><a href="umock__c__prod_8h.html">umock_c_prod.h</a></div></div>
<div class="ttc" id="acomponents_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c_html_a54e4d6709ddbb04124ce9d0ba39dba83"><div class="ttname"><a href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c.html#a54e4d6709ddbb04124ce9d0ba39dba83">VECTOR_element</a></div><div class="ttdeci">void * VECTOR_element(VECTOR_HANDLE handle, size_t index)</div><div class="ttdef"><b>Definition:</b> <a href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c_source.html#l00207">vector.c:207</a></div></div>
<div class="ttc" id="acomponents_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c_html_adac47be23934ebd7378976c14881466f"><div class="ttname"><a href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c.html#adac47be23934ebd7378976c14881466f">VECTOR_destroy</a></div><div class="ttdeci">void VECTOR_destroy(VECTOR_HANDLE handle)</div><div class="ttdef"><b>Definition:</b> <a href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c_source.html#l00041">vector.c:41</a></div></div>
<div class="ttc" id="astructMESSAGE__CALLBACK__INFO__TAG_html"><div class="ttname"><a href="structMESSAGE__CALLBACK__INFO__TAG.html">MESSAGE_CALLBACK_INFO_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="iothub__transport__ll_8h_source.html#l00026">iothub_transport_ll.h:27</a></div></div>
<div class="ttc" id="asinglylinkedlist_8c_html_a2557a2e240bd38a36a240a8386096507"><div class="ttname"><a href="singlylinkedlist_8c.html#a2557a2e240bd38a36a240a8386096507">singlylinkedlist_get_head_item</a></div><div class="ttdeci">LIST_ITEM_HANDLE singlylinkedlist_get_head_item(SINGLYLINKEDLIST_HANDLE list)</div><div class="ttdef"><b>Definition:</b> <a href="singlylinkedlist_8c_source.html#l00155">singlylinkedlist.c:155</a></div></div>
<div class="ttc" id="acomponents_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c_html_adc608e654f8aa1c639275e55f5265090"><div class="ttname"><a href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c.html#adc608e654f8aa1c639275e55f5265090">VECTOR_create</a></div><div class="ttdeci">VECTOR_HANDLE VECTOR_create(size_t elementSize)</div><div class="ttdef"><b>Definition:</b> <a href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c_source.html#l00012">vector.c:12</a></div></div>
<div class="ttc" id="aiothub__client_8c_html_a8088bbe5b1815c28e8ecd4bf4e5c32c4"><div class="ttname"><a href="iothub__client_8c.html#a8088bbe5b1815c28e8ecd4bf4e5c32c4">DEVICE_TWIN_CALLBACK_INFO</a></div><div class="ttdeci">struct DEVICE_TWIN_CALLBACK_INFO_TAG DEVICE_TWIN_CALLBACK_INFO</div></div>
<div class="ttc" id="asinglylinkedlist_8c_html_a4989115eb394f221a8af5db9a2873d1b"><div class="ttname"><a href="singlylinkedlist_8c.html#a4989115eb394f221a8af5db9a2873d1b">singlylinkedlist_remove</a></div><div class="ttdeci">int singlylinkedlist_remove(SINGLYLINKEDLIST_HANDLE list, LIST_ITEM_HANDLE item)</div><div class="ttdef"><b>Definition:</b> <a href="singlylinkedlist_8c_source.html#l00102">singlylinkedlist.c:102</a></div></div>
<div class="ttc" id="asinglylinkedlist_8c_html_a42bf74145425439976828ec33f4642e9"><div class="ttname"><a href="singlylinkedlist_8c.html#a42bf74145425439976828ec33f4642e9">singlylinkedlist_add</a></div><div class="ttdeci">LIST_ITEM_HANDLE singlylinkedlist_add(SINGLYLINKEDLIST_HANDLE list, const void *item)</div><div class="ttdef"><b>Definition:</b> <a href="singlylinkedlist_8c_source.html#l00055">singlylinkedlist.c:55</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__INSTANCE__TAG_html_ac778ef2ee110489a4bb4972571684b68"><div class="ttname"><a href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ac778ef2ee110489a4bb4972571684b68">IOTHUB_CLIENT_INSTANCE_TAG::message_callback</a></div><div class="ttdeci">IOTHUB_CLIENT_MESSAGE_CALLBACK_ASYNC message_callback</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00042">iothub_client.c:42</a></div></div>
<div class="ttc" id="aiothub__client_8c_html_a6fb9f6dbb0fdf87d62ed457f2f285dac"><div class="ttname"><a href="iothub__client_8c.html#a6fb9f6dbb0fdf87d62ed457f2f285dac">IoTHubClient_SetConnectionStatusCallback</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubClient_SetConnectionStatusCallback(IOTHUB_CLIENT_HANDLE iotHubClientHandle, IOTHUB_CLIENT_CONNECTION_STATUS_CALLBACK connectionStatusCallback, void *userContextCallback)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l01177">iothub_client.c:1177</a></div></div>
<div class="ttc" id="astrings_8c_html_a14f1a6a01de229149d3810d4d06816a2"><div class="ttname"><a href="strings_8c.html#a14f1a6a01de229149d3810d4d06816a2">STRING_delete</a></div><div class="ttdeci">void STRING_delete(STRING_HANDLE handle)</div><div class="ttdef"><b>Definition:</b> <a href="strings_8c_source.html#l00654">strings.c:654</a></div></div>
<div class="ttc" id="athreadapi_8c_html_a9ce3ec671e3aa3ca28a3e93c514dac56"><div class="ttname"><a href="threadapi_8c.html#a9ce3ec671e3aa3ca28a3e93c514dac56">ThreadAPI_Sleep</a></div><div class="ttdeci">void ThreadAPI_Sleep(unsigned int milliseconds)</div><div class="ttdef"><b>Definition:</b> <a href="threadapi_8c_source.html#l00014">threadapi.c:14</a></div></div>
<div class="ttc" id="astructMETHOD__CALLBACK__INFO__TAG_html_af376724de938122fa0cff9d89286cb00"><div class="ttname"><a href="structMETHOD__CALLBACK__INFO__TAG.html#af376724de938122fa0cff9d89286cb00">METHOD_CALLBACK_INFO_TAG::payload</a></div><div class="ttdeci">BUFFER_HANDLE payload</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00102">iothub_client.c:102</a></div></div>
<div class="ttc" id="asinglylinkedlist_8h_html"><div class="ttname"><a href="singlylinkedlist_8h.html">singlylinkedlist.h</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__CONFIG__TAG_html_af33000861e1bb43af8e339dee3e689a0"><div class="ttname"><a href="structIOTHUB__CLIENT__CONFIG__TAG.html#af33000861e1bb43af8e339dee3e689a0">IOTHUB_CLIENT_CONFIG_TAG::deviceId</a></div><div class="ttdeci">const char * deviceId</div><div class="ttdoc">A string that identifies the device.</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8h_source.html#l00185">iothub_client_ll.h:185</a></div></div>
<div class="ttc" id="aiothub__client__ll_8h_html_a43072ecc913e5ca776108b1731553c30"><div class="ttname"><a href="iothub__client__ll_8h.html#a43072ecc913e5ca776108b1731553c30">IOTHUB_CLIENT_INBOUND_DEVICE_METHOD_CALLBACK</a></div><div class="ttdeci">int(* IOTHUB_CLIENT_INBOUND_DEVICE_METHOD_CALLBACK)(const char *method_name, const unsigned char *payload, size_t size, METHOD_HANDLE method_id, void *userContextCallback)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8h_source.html#l00173">iothub_client_ll.h:173</a></div></div>
<div class="ttc" id="acomponents_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c_html_afb603bc9590ad55494446761fd83f179"><div class="ttname"><a href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c.html#afb603bc9590ad55494446761fd83f179">VECTOR_push_back</a></div><div class="ttdeci">int VECTOR_push_back(VECTOR_HANDLE handle, const void *elements, size_t numElements)</div><div class="ttdef"><b>Definition:</b> <a href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c_source.html#l00089">vector.c:89</a></div></div>
<div class="ttc" id="aiothub__client__ll_8c_html_af8c8a00af8c2fac1ccf2111eb4e2016c"><div class="ttname"><a href="iothub__client__ll_8c.html#af8c8a00af8c2fac1ccf2111eb4e2016c">IoTHubClient_LL_SetMessageCallback</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubClient_LL_SetMessageCallback(IOTHUB_CLIENT_LL_HANDLE iotHubClientHandle, IOTHUB_CLIENT_MESSAGE_CALLBACK_ASYNC messageCallback, void *userContextCallback)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8c_source.html#l01063">iothub_client_ll.c:1063</a></div></div>
<div class="ttc" id="astructCONNECTION__STATUS__CALLBACK__INFO__TAG_html"><div class="ttname"><a href="structCONNECTION__STATUS__CALLBACK__INFO__TAG.html">CONNECTION_STATUS_CALLBACK_INFO_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00093">iothub_client.c:94</a></div></div>
<div class="ttc" id="acomponents_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2inc_2azure__c__shared__utility_2vector_8h_html"><div class="ttname"><a href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2inc_2azure__c__shared__utility_2vector_8h.html">vector.h</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__INSTANCE__TAG_html_a0b135b5f5e01f2e2dafe0e77229f0f19"><div class="ttname"><a href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a0b135b5f5e01f2e2dafe0e77229f0f19">IOTHUB_CLIENT_INSTANCE_TAG::device_method_callback</a></div><div class="ttdeci">IOTHUB_CLIENT_DEVICE_METHOD_CALLBACK_ASYNC device_method_callback</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00040">iothub_client.c:40</a></div></div>
<div class="ttc" id="aunionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK_html"><div class="ttname"><a href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html">USER_CALLBACK_INFO_TAG::IOTHUB_CALLBACK</a></div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00110">iothub_client.c:111</a></div></div>
<div class="ttc" id="astructIOTHUB__QUEUE__CONTEXT__TAG_html"><div class="ttname"><a href="structIOTHUB__QUEUE__CONTEXT__TAG.html">IOTHUB_QUEUE_CONTEXT_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00121">iothub_client.c:122</a></div></div>
<div class="ttc" id="adef_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="def_8h_source.html#l00071">def.h:70</a></div></div>
<div class="ttc" id="amacro__utils_8h_html_a9953147f17615533ea50ed383b0171c1"><div class="ttname"><a href="macro__utils_8h.html#a9953147f17615533ea50ed383b0171c1">DEFINE_ENUM_STRINGS</a></div><div class="ttdeci">#define DEFINE_ENUM_STRINGS(enumName,...)</div><div class="ttdef"><b>Definition:</b> <a href="macro__utils_8h_source.html#l12578">macro_utils.h:12577</a></div></div>
<div class="ttc" id="atimeb_8h_html_aa17c461cd5eca7fc12a66daa803c7fd7"><div class="ttname"><a href="timeb_8h.html#aa17c461cd5eca7fc12a66daa803c7fd7">time_t</a></div><div class="ttdeci">_TIME_T_ time_t</div><div class="ttdef"><b>Definition:</b> <a href="timeb_8h_source.html#l00021">timeb.h:21</a></div></div>
<div class="ttc" id="aunionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK_html_a995c2127121d749bc63ad2b7c2091f6a"><div class="ttname"><a href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a995c2127121d749bc63ad2b7c2091f6a">USER_CALLBACK_INFO_TAG::IOTHUB_CALLBACK::event_confirm_cb_info</a></div><div class="ttdeci">EVENT_CONFIRM_CALLBACK_INFO event_confirm_cb_info</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00113">iothub_client.c:113</a></div></div>
<div class="ttc" id="amacro__utils_8h_html_a25551e3ff0e5f7d2457ddf9c155a87c5"><div class="ttname"><a href="macro__utils_8h.html#a25551e3ff0e5f7d2457ddf9c155a87c5">ENUM_TO_STRING</a></div><div class="ttdeci">#define ENUM_TO_STRING(enumName, enumValue)</div><div class="ttdef"><b>Definition:</b> <a href="macro__utils_8h_source.html#l12629">macro_utils.h:12628</a></div></div>
<div class="ttc" id="aArduino-IRremote_2LICENSE_8txt_html_a3b083519fd2b41d83363afcfd5ebad9d"><div class="ttname"><a href="Arduino-IRremote_2LICENSE_8txt.html#a3b083519fd2b41d83363afcfd5ebad9d">void</a></div><div class="ttdeci">if the work is an executable linked with the with the complete machine readable work that uses the as object code and or source so that the user can modify the Library and then relink to produce a modified executable containing the modified rather than copying library functions into the if the user installs as long as the modified version is interface compatible with the version that the work was made with c Accompany the work with a written valid for at least three to give the same user the materials specified in for a charge no more than the cost of performing this distribution d If distribution of the work is made by offering access to copy from a designated offer equivalent access to copy the above specified materials from the same place e Verify that the user has already received a copy of these materials or that you have already sent this user a copy For an the required form of the work that uses the Library must include any data and utility programs needed for reproducing the executable from it as a special the materials to be distributed need not include anything that is normally and so on of the operating system on which the executable unless that component itself accompanies the executable It may happen that this requirement contradicts the license restrictions of other proprietary libraries that do not normally accompany the operating system Such a contradiction means you cannot use both them and the Library together in an executable that you distribute You may place library facilities that are a work based on the Library side by side in a single library together with other library facilities not covered by this and distribute such a combined provided that the separate distribution of the work based on the Library and of the other library facilities is otherwise and provided that you do these two uncombined with any other library facilities This must be distributed under the terms of the Sections above b Give prominent notice with the combined library of the fact that part of it is a work based on the and explaining where to find the accompanying uncombined form of the same work You may not link or distribute the Library except as expressly provided under this License Any attempt otherwise to link or distribute the Library is void</div><div class="ttdef"><b>Definition:</b> <a href="Arduino-IRremote_2LICENSE_8txt_source.html#l00353">LICENSE.txt:353</a></div></div>
<div class="ttc" id="asinglylinkedlist_8c_html_ae1a394b3f989a78faa77ce2aa11e1c67"><div class="ttname"><a href="singlylinkedlist_8c.html#ae1a394b3f989a78faa77ce2aa11e1c67">singlylinkedlist_item_get_value</a></div><div class="ttdeci">const void * singlylinkedlist_item_get_value(LIST_ITEM_HANDLE item_handle)</div><div class="ttdef"><b>Definition:</b> <a href="singlylinkedlist_8c_source.html#l00196">singlylinkedlist.c:196</a></div></div>
<div class="ttc" id="aiothub__client_8c_html_a190e08e1201046fda675517070d63e83"><div class="ttname"><a href="iothub__client_8c.html#a190e08e1201046fda675517070d63e83">IoTHubClient_CreateFromConnectionString</a></div><div class="ttdeci">IOTHUB_CLIENT_HANDLE IoTHubClient_CreateFromConnectionString(const char *connectionString, IOTHUB_CLIENT_TRANSPORT_PROVIDER protocol)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00788">iothub_client.c:788</a></div></div>
<div class="ttc" id="atools_2sdk_2include_2wpa__supplicant_2wpa_2list_8h_html_afd049f7ad59dbe455f460807475c2841"><div class="ttname"><a href="tools_2sdk_2include_2wpa__supplicant_2wpa_2list_8h.html#afd049f7ad59dbe455f460807475c2841">offsetof</a></div><div class="ttdeci">#define offsetof(type, member)</div><div class="ttdef"><b>Definition:</b> <a href="tools_2sdk_2include_2wpa__supplicant_2wpa_2list_8h_source.html#l00071">list.h:70</a></div></div>
<div class="ttc" id="astructUSER__CALLBACK__INFO__TAG_html_acc98d50b9ccd3892732e7627e73c0bf2"><div class="ttname"><a href="structUSER__CALLBACK__INFO__TAG.html#acc98d50b9ccd3892732e7627e73c0bf2">USER_CALLBACK_INFO_TAG::type</a></div><div class="ttdeci">USER_CALLBACK_TYPE type</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00108">iothub_client.c:108</a></div></div>
<div class="ttc" id="astructDEVICE__TWIN__CALLBACK__INFO__TAG_html_a6160cbc2ae0492baf707ef7d97808f8e"><div class="ttname"><a href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html#a6160cbc2ae0492baf707ef7d97808f8e">DEVICE_TWIN_CALLBACK_INFO_TAG::payLoad</a></div><div class="ttdeci">unsigned char * payLoad</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00079">iothub_client.c:79</a></div></div>
<div class="ttc" id="aiothubtransport_8c_html_a637b879b4ba2111c5c87037910fb6584"><div class="ttname"><a href="iothubtransport_8c.html#a637b879b4ba2111c5c87037910fb6584">IoTHubTransport_SignalEndWorkerThread</a></div><div class="ttdeci">bool IoTHubTransport_SignalEndWorkerThread(TRANSPORT_HANDLE transportHandle, IOTHUB_CLIENT_HANDLE clientHandle)</div><div class="ttdef"><b>Definition:</b> <a href="iothubtransport_8c_source.html#l00424">iothubtransport.c:424</a></div></div>
<div class="ttc" id="aunity__fixture__malloc__overrides_8h_html_acf143577800376dd931c059ecc61ba06"><div class="ttname"><a href="unity__fixture__malloc__overrides_8h.html#acf143577800376dd931c059ecc61ba06">malloc</a></div><div class="ttdeci">#define malloc</div><div class="ttdef"><b>Definition:</b> <a href="unity__fixture__malloc__overrides_8h_source.html#l00038">unity_fixture_malloc_overrides.h:37</a></div></div>
<div class="ttc" id="athreadapi_8c_html_aa80bce4748cbe10f4b726f2ea3168609"><div class="ttname"><a href="threadapi_8c.html#aa80bce4748cbe10f4b726f2ea3168609">ThreadAPI_Join</a></div><div class="ttdeci">THREADAPI_RESULT ThreadAPI_Join(THREAD_HANDLE threadHandle, int *res)</div><div class="ttdef"><b>Definition:</b> <a href="threadapi_8c_source.html#l00030">threadapi.c:30</a></div></div>
<div class="ttc" id="aiothub__client__ll_8c_html_a93d4fa3242a15429e6cf6e0d7c65da9e"><div class="ttname"><a href="iothub__client__ll_8c.html#a93d4fa3242a15429e6cf6e0d7c65da9e">IoTHubClient_LL_SetDeviceMethodCallback_Ex</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubClient_LL_SetDeviceMethodCallback_Ex(IOTHUB_CLIENT_LL_HANDLE iotHubClientHandle, IOTHUB_CLIENT_INBOUND_DEVICE_METHOD_CALLBACK inboundDeviceMethodCallback, void *userContextCallback)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8c_source.html#l01928">iothub_client_ll.c:1928</a></div></div>
<div class="ttc" id="aiothub__client__ll_8c_html_a0f2bcd060d35a9e1ccc19f4719635736"><div class="ttname"><a href="iothub__client__ll_8c.html#a0f2bcd060d35a9e1ccc19f4719635736">IoTHubClient_LL_SetMessageCallback_Ex</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubClient_LL_SetMessageCallback_Ex(IOTHUB_CLIENT_LL_HANDLE iotHubClientHandle, IOTHUB_CLIENT_MESSAGE_CALLBACK_ASYNC_EX messageCallback, void *userContextCallback)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8c_source.html#l01134">iothub_client_ll.c:1134</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__DEVICE__CONFIG__TAG_html_a0c8fbef5af29d3a701b3a8596511f2b6"><div class="ttname"><a href="structIOTHUB__CLIENT__DEVICE__CONFIG__TAG.html#a0c8fbef5af29d3a701b3a8596511f2b6">IOTHUB_CLIENT_DEVICE_CONFIG_TAG::deviceSasToken</a></div><div class="ttdeci">const char * deviceSasToken</div><div class="ttdoc">The device SAS Token used to authenticate the device in place of device key. x509 authentication is i...</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8h_source.html#l00225">iothub_client_ll.h:225</a></div></div>
<div class="ttc" id="alock_8c_html_a3683432285e999baa8c543f27633829c"><div class="ttname"><a href="lock_8c.html#a3683432285e999baa8c543f27633829c">Lock_Init</a></div><div class="ttdeci">LOCK_HANDLE Lock_Init(void)</div><div class="ttdef"><b>Definition:</b> <a href="lock_8c_source.html#l00011">lock.c:11</a></div></div>
<div class="ttc" id="aiothub__client__ll_8h_html_adf7097e8fc9e34f26dd9347d4eaa5f8d"><div class="ttname"><a href="iothub__client__ll_8h.html#adf7097e8fc9e34f26dd9347d4eaa5f8d">IOTHUB_CLIENT_MESSAGE_CALLBACK_ASYNC</a></div><div class="ttdeci">IOTHUBMESSAGE_DISPOSITION_RESULT(* IOTHUB_CLIENT_MESSAGE_CALLBACK_ASYNC)(IOTHUB_MESSAGE_HANDLE message, void *userContextCallback)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8h_source.html#l00167">iothub_client_ll.h:167</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__INSTANCE__TAG_html_a008f33c5da8e26a2cefab8be0f991744"><div class="ttname"><a href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a008f33c5da8e26a2cefab8be0f991744">IOTHUB_CLIENT_INSTANCE_TAG::ThreadHandle</a></div><div class="ttdeci">THREAD_HANDLE ThreadHandle</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00028">iothub_client.c:28</a></div></div>
<div class="ttc" id="asinglylinkedlist_8c_html_af882d0a8dedb9091e5e77df980e631ff"><div class="ttname"><a href="singlylinkedlist_8c.html#af882d0a8dedb9091e5e77df980e631ff">singlylinkedlist_destroy</a></div><div class="ttdeci">void singlylinkedlist_destroy(SINGLYLINKEDLIST_HANDLE list)</div><div class="ttdef"><b>Definition:</b> <a href="singlylinkedlist_8c_source.html#l00036">singlylinkedlist.c:36</a></div></div>
<div class="ttc" id="aiothub__client__ll_8c_html_af48d8760649bf7792d861874e89e6b66"><div class="ttname"><a href="iothub__client__ll_8c.html#af48d8760649bf7792d861874e89e6b66">IoTHubClient_LL_SendReportedState</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubClient_LL_SendReportedState(IOTHUB_CLIENT_LL_HANDLE iotHubClientHandle, const unsigned char *reportedState, size_t size, IOTHUB_CLIENT_REPORTED_STATE_CALLBACK reportedStateCallback, void *userContextCallback)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8c_source.html#l01809">iothub_client_ll.c:1809</a></div></div>
<div class="ttc" id="aiothub__client__ll_8c_html_aa7773cdda101288cfd805c34f726eb84"><div class="ttname"><a href="iothub__client__ll_8c.html#aa7773cdda101288cfd805c34f726eb84">IoTHubClient_LL_GetSendStatus</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubClient_LL_GetSendStatus(IOTHUB_CLIENT_LL_HANDLE iotHubClientHandle, IOTHUB_CLIENT_STATUS *iotHubClientStatus)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8c_source.html#l01304">iothub_client_ll.c:1304</a></div></div>
<div class="ttc" id="astructDEVICE__TWIN__CALLBACK__INFO__TAG_html"><div class="ttname"><a href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html">DEVICE_TWIN_CALLBACK_INFO_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00076">iothub_client.c:77</a></div></div>
<div class="ttc" id="aunionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK_html_a85bf3c7a28fb18221a0ad3b108aa648f"><div class="ttname"><a href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a85bf3c7a28fb18221a0ad3b108aa648f">USER_CALLBACK_INFO_TAG::IOTHUB_CALLBACK::reported_state_cb_info</a></div><div class="ttdeci">REPORTED_STATE_CALLBACK_INFO reported_state_cb_info</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00114">iothub_client.c:114</a></div></div>
<div class="ttc" id="aunionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK_html_ab8cc1695811d84be2d6d65dff4faa2be"><div class="ttname"><a href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ab8cc1695811d84be2d6d65dff4faa2be">USER_CALLBACK_INFO_TAG::IOTHUB_CALLBACK::connection_status_cb_info</a></div><div class="ttdeci">CONNECTION_STATUS_CALLBACK_INFO connection_status_cb_info</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00115">iothub_client.c:115</a></div></div>
<div class="ttc" id="athreadapi_8h_html"><div class="ttname"><a href="threadapi_8h.html">threadapi.h</a></div><div class="ttdoc">This module implements support for creating new threads, terminating threads and sleeping threads.</div></div>
<div class="ttc" id="astructLIST__ITEM__INSTANCE__TAG_html"><div class="ttname"><a href="structLIST__ITEM__INSTANCE__TAG.html">LIST_ITEM_INSTANCE_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="singlylinkedlist_8c_source.html#l00010">singlylinkedlist.c:11</a></div></div>
<div class="ttc" id="aiothub__client_8c_html_ac0a1c0eb5e56083337bbc742b0fe4abb"><div class="ttname"><a href="iothub__client_8c.html#ac0a1c0eb5e56083337bbc742b0fe4abb">IoTHubClient_DeviceMethodResponse</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubClient_DeviceMethodResponse(IOTHUB_CLIENT_HANDLE iotHubClientHandle, METHOD_HANDLE methodId, const unsigned char *response, size_t respSize, int statusCode)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l01732">iothub_client.c:1732</a></div></div>
<div class="ttc" id="astrings_8c_html_ad091a0c95f3dcf64d9f0c242744b464d"><div class="ttname"><a href="strings_8c.html#ad091a0c95f3dcf64d9f0c242744b464d">STRING_construct</a></div><div class="ttdeci">STRING_HANDLE STRING_construct(const char *psz)</div><div class="ttdef"><b>Definition:</b> <a href="strings_8c_source.html#l00087">strings.c:87</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__INSTANCE__TAG_html_a1ba5770cedc73357f700522f34948142"><div class="ttname"><a href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a1ba5770cedc73357f700522f34948142">IOTHUB_CLIENT_INSTANCE_TAG::created_with_transport_handle</a></div><div class="ttdeci">int created_with_transport_handle</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00034">iothub_client.c:34</a></div></div>
<div class="ttc" id="aiothub__client__ll_8h_html_a3020471f05025405840d9c43466122dc"><div class="ttname"><a href="iothub__client__ll_8h.html#a3020471f05025405840d9c43466122dc">IOTHUB_CLIENT_DEVICE_TWIN_CALLBACK</a></div><div class="ttdeci">void(* IOTHUB_CLIENT_DEVICE_TWIN_CALLBACK)(DEVICE_TWIN_UPDATE_STATE update_state, const unsigned char *payLoad, size_t size, void *userContextCallback)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8h_source.html#l00170">iothub_client_ll.h:170</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__INSTANCE__TAG_html_ab13e6a9fcb8fa8587c92e98122474b56"><div class="ttname"><a href="structIOTHUB__CLIENT__INSTANCE__TAG.html#ab13e6a9fcb8fa8587c92e98122474b56">IOTHUB_CLIENT_INSTANCE_TAG::event_confirm_callback</a></div><div class="ttdeci">IOTHUB_CLIENT_EVENT_CONFIRMATION_CALLBACK event_confirm_callback</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00037">iothub_client.c:37</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__INSTANCE__TAG_html_a58ae45dac433e034d7f8a394abd7ebfa"><div class="ttname"><a href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a58ae45dac433e034d7f8a394abd7ebfa">IOTHUB_CLIENT_INSTANCE_TAG::inbound_device_method_callback</a></div><div class="ttdeci">IOTHUB_CLIENT_INBOUND_DEVICE_METHOD_CALLBACK inbound_device_method_callback</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00041">iothub_client.c:41</a></div></div>
<div class="ttc" id="acJSON__Utils_8h_html_a0dff3c76a075649fa412b1c429ffe382"><div class="ttname"><a href="cJSON__Utils_8h.html#a0dff3c76a075649fa412b1c429ffe382">value</a></div><div class="ttdeci">const char *const const char *const const cJSON *const value</div><div class="ttdef"><b>Definition:</b> <a href="cJSON__Utils_8h_source.html#l00042">cJSON_Utils.h:42</a></div></div>
<div class="ttc" id="aiothub__client_8c_html_a90487572570a42c6c400ce72d6a861d2"><div class="ttname"><a href="iothub__client_8c.html#a90487572570a42c6c400ce72d6a861d2">IOTHUB_QUEUE_CONTEXT</a></div><div class="ttdeci">struct IOTHUB_QUEUE_CONTEXT_TAG IOTHUB_QUEUE_CONTEXT</div></div>
<div class="ttc" id="acrt__abstractions_8h_html"><div class="ttname"><a href="crt__abstractions_8h.html">crt_abstractions.h</a></div></div>
<div class="ttc" id="agballoc_8h_html"><div class="ttname"><a href="gballoc_8h.html">gballoc.h</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__INSTANCE__TAG_html_a2a7576c15a483424f846153e96c02f3f"><div class="ttname"><a href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a2a7576c15a483424f846153e96c02f3f">IOTHUB_CLIENT_INSTANCE_TAG::LockHandle</a></div><div class="ttdeci">LOCK_HANDLE LockHandle</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00029">iothub_client.c:29</a></div></div>
<div class="ttc" id="alibraries_2AzureIoT_2src_2az__iot_2c-utility_2inc_2azure__c__shared__utility_2lock_8h_html"><div class="ttname"><a href="libraries_2AzureIoT_2src_2az__iot_2c-utility_2inc_2azure__c__shared__utility_2lock_8h.html">lock.h</a></div><div class="ttdoc">A minimalistic platform agnostic lock abstraction for thread synchronization.</div></div>
<div class="ttc" id="astrings_8c_html_a351a84891e778e497c7eafa76bd02cd0"><div class="ttname"><a href="strings_8c.html#a351a84891e778e497c7eafa76bd02cd0">STRING_c_str</a></div><div class="ttdeci">const char * STRING_c_str(STRING_HANDLE handle)</div><div class="ttdef"><b>Definition:</b> <a href="strings_8c_source.html#l00667">strings.c:667</a></div></div>
<div class="ttc" id="aiothub__client_8c_html_a0e3a30fc453cb72d0aff8f9b70c82285"><div class="ttname"><a href="iothub__client_8c.html#a0e3a30fc453cb72d0aff8f9b70c82285">CONNECTION_STATUS_CALLBACK_INFO</a></div><div class="ttdeci">struct CONNECTION_STATUS_CALLBACK_INFO_TAG CONNECTION_STATUS_CALLBACK_INFO</div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__CONFIG__TAG_html"><div class="ttname"><a href="structIOTHUB__CLIENT__CONFIG__TAG.html">IOTHUB_CLIENT_CONFIG_TAG</a></div><div class="ttdoc">This struct captures IoTHub client configuration.</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8h_source.html#l00176">iothub_client_ll.h:177</a></div></div>
<div class="ttc" id="aiothub__client_8c_html_a7e36aa6fb9adeb1623eb9153c7453d2d"><div class="ttname"><a href="iothub__client_8c.html#a7e36aa6fb9adeb1623eb9153c7453d2d">IOTHUB_CLIENT_INSTANCE</a></div><div class="ttdeci">struct IOTHUB_CLIENT_INSTANCE_TAG IOTHUB_CLIENT_INSTANCE</div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__INSTANCE__TAG_html_af56890dbbf4752da02a880eda602a1b4"><div class="ttname"><a href="structIOTHUB__CLIENT__INSTANCE__TAG.html#af56890dbbf4752da02a880eda602a1b4">IOTHUB_CLIENT_INSTANCE_TAG::reported_state_callback</a></div><div class="ttdeci">IOTHUB_CLIENT_REPORTED_STATE_CALLBACK reported_state_callback</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00038">iothub_client.c:38</a></div></div>
<div class="ttc" id="axlogging_8h_html_aec0857f05ae0368bb1cb6efdc63cd420"><div class="ttname"><a href="xlogging_8h.html#aec0857f05ae0368bb1cb6efdc63cd420">LogError</a></div><div class="ttdeci">#define LogError(FORMAT,...)</div><div class="ttdef"><b>Definition:</b> <a href="xlogging_8h_source.html#l00164">xlogging.h:163</a></div></div>
<div class="ttc" id="alock_8c_html_a146c21d68c41777d20ef1f7e30518505"><div class="ttname"><a href="lock_8c.html#a146c21d68c41777d20ef1f7e30518505">Lock</a></div><div class="ttdeci">LOCK_RESULT Lock(LOCK_HANDLE handle)</div><div class="ttdef"><b>Definition:</b> <a href="lock_8c_source.html#l00055">lock.c:55</a></div></div>
<div class="ttc" id="axlogging_8h_html"><div class="ttname"><a href="xlogging_8h.html">xlogging.h</a></div></div>
<div class="ttc" id="abuffer_8c_html_a768b64763882b3bafe34f9b0c28726e2"><div class="ttname"><a href="buffer_8c.html#a768b64763882b3bafe34f9b0c28726e2">BUFFER_create</a></div><div class="ttdeci">BUFFER_HANDLE BUFFER_create(const unsigned char *source, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00056">buffer.c:56</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__DEVICE__CONFIG__TAG_html_a22d93e063002b89ffdd135d27cd7a9f4"><div class="ttname"><a href="structIOTHUB__CLIENT__DEVICE__CONFIG__TAG.html#a22d93e063002b89ffdd135d27cd7a9f4">IOTHUB_CLIENT_DEVICE_CONFIG_TAG::deviceId</a></div><div class="ttdeci">const char * deviceId</div><div class="ttdoc">A string that identifies the device.</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8h_source.html#l00217">iothub_client_ll.h:217</a></div></div>
<div class="ttc" id="acJSON_8h_html_ac76cea59d438ba893d2f82aabb367d14"><div class="ttname"><a href="cJSON_8h.html#ac76cea59d438ba893d2f82aabb367d14">item</a></div><div class="ttdeci">cJSON * item</div><div class="ttdef"><b>Definition:</b> <a href="cJSON_8h_source.html#l00218">cJSON.h:218</a></div></div>
<div class="ttc" id="aiothubtransport_8c_html_aec0323191dbe96fac49e8c3bae08ef60"><div class="ttname"><a href="iothubtransport_8c.html#aec0323191dbe96fac49e8c3bae08ef60">IoTHubTransport_GetLLTransport</a></div><div class="ttdeci">TRANSPORT_LL_HANDLE IoTHubTransport_GetLLTransport(TRANSPORT_HANDLE transportHandle)</div><div class="ttdef"><b>Definition:</b> <a href="iothubtransport_8c_source.html#l00375">iothubtransport.c:375</a></div></div>
<div class="ttc" id="atag__strings_8h_html_a2090a647eea4ba8be07c28e6d52e97de"><div class="ttname"><a href="tag__strings_8h.html#a2090a647eea4ba8be07c28e6d52e97de">source</a></div><div class="ttdeci">source</div><div class="ttdef"><b>Definition:</b> <a href="tag__strings_8h_source.html#l00082">tag_strings.h:82</a></div></div>
<div class="ttc" id="astructREPORTED__STATE__CALLBACK__INFO__TAG_html_a2d8e9706e26dbcb0fa8cfb727eec2c4b"><div class="ttname"><a href="structREPORTED__STATE__CALLBACK__INFO__TAG.html#a2d8e9706e26dbcb0fa8cfb727eec2c4b">REPORTED_STATE_CALLBACK_INFO_TAG::status_code</a></div><div class="ttdeci">int status_code</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00090">iothub_client.c:90</a></div></div>
<div class="ttc" id="astructUSER__CALLBACK__INFO__TAG_html_ac9ef9a196e06f36dfbd3bb7cc03e8979"><div class="ttname"><a href="structUSER__CALLBACK__INFO__TAG.html#ac9ef9a196e06f36dfbd3bb7cc03e8979">USER_CALLBACK_INFO_TAG::userContextCallback</a></div><div class="ttdeci">void * userContextCallback</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00109">iothub_client.c:109</a></div></div>
<div class="ttc" id="aiothub__client_8c_html_a692ed29a02e5842a60db1b3c0ce1b186"><div class="ttname"><a href="iothub__client_8c.html#a692ed29a02e5842a60db1b3c0ce1b186">IoTHubClient_GetSendStatus</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubClient_GetSendStatus(IOTHUB_CLIENT_HANDLE iotHubClientHandle, IOTHUB_CLIENT_STATUS *iotHubClientStatus)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l01058">iothub_client.c:1058</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__DEVICE__CONFIG__TAG_html_a5740ef18943a10a7ad1006a09715042a"><div class="ttname"><a href="structIOTHUB__CLIENT__DEVICE__CONFIG__TAG.html#a5740ef18943a10a7ad1006a09715042a">IOTHUB_CLIENT_DEVICE_CONFIG_TAG::transportHandle</a></div><div class="ttdeci">void * transportHandle</div><div class="ttdoc">a transport handle implementing the protocol</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8h_source.html#l00214">iothub_client_ll.h:214</a></div></div>
<div class="ttc" id="aiothub__client_8c_html_a4484e3db3c295c66d379b44fc53cfd79"><div class="ttname"><a href="iothub__client_8c.html#a4484e3db3c295c66d379b44fc53cfd79">IoTHubClient_GetLastMessageReceiveTime</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubClient_GetLastMessageReceiveTime(IOTHUB_CLIENT_HANDLE iotHubClientHandle, time_t *lastMessageReceiveTime)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l01338">iothub_client.c:1338</a></div></div>
<div class="ttc" id="aiothub__client_8c_html_a4d7cab2213f5f82aac7d60fca5e519bc"><div class="ttname"><a href="iothub__client_8c.html#a4d7cab2213f5f82aac7d60fca5e519bc">IoTHubClient_GetRetryPolicy</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubClient_GetRetryPolicy(IOTHUB_CLIENT_HANDLE iotHubClientHandle, IOTHUB_CLIENT_RETRY_POLICY *retryPolicy, size_t *retryTimeoutLimitInSeconds)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l01296">iothub_client.c:1296</a></div></div>
<div class="ttc" id="aiothub__client__ll_8c_html_ac7df62eaef41c0081af988467e45a0e4"><div class="ttname"><a href="iothub__client__ll_8c.html#ac7df62eaef41c0081af988467e45a0e4">IoTHubClient_LL_SetDeviceTwinCallback</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubClient_LL_SetDeviceTwinCallback(IOTHUB_CLIENT_LL_HANDLE iotHubClientHandle, IOTHUB_CLIENT_DEVICE_TWIN_CALLBACK deviceTwinCallback, void *userContextCallback)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8c_source.html#l01770">iothub_client_ll.c:1770</a></div></div>
<div class="ttc" id="astructIOTHUB__QUEUE__CONTEXT__TAG_html_a0c3e332401f120f3c28a97b9e5f9e584"><div class="ttname"><a href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a0c3e332401f120f3c28a97b9e5f9e584">IOTHUB_QUEUE_CONTEXT_TAG::iotHubClientHandle</a></div><div class="ttdeci">IOTHUB_CLIENT_INSTANCE * iotHubClientHandle</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00123">iothub_client.c:123</a></div></div>
<div class="ttc" id="acacheasm_8h_html_a296a4dfa224096b538c66a9bab58cb9e"><div class="ttname"><a href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a></div><div class="ttdeci">macro cache_index_all size</div><div class="ttdef"><b>Definition:</b> <a href="cacheasm_8h_source.html#l00158">cacheasm.h:158</a></div></div>
<div class="ttc" id="athreadapi_8c_html_a304fd6867f922d6321f36569d1769d04"><div class="ttname"><a href="threadapi_8c.html#a304fd6867f922d6321f36569d1769d04">ThreadAPI_Exit</a></div><div class="ttdeci">void ThreadAPI_Exit(int res)</div><div class="ttdef"><b>Definition:</b> <a href="threadapi_8c_source.html#l00039">threadapi.c:39</a></div></div>
<div class="ttc" id="aiothub__client_8c_html_a2eb95b5592c8c1c5e1fed5cef60ba0ff"><div class="ttname"><a href="iothub__client_8c.html#a2eb95b5592c8c1c5e1fed5cef60ba0ff">IoTHubClient_CreateWithTransport</a></div><div class="ttdeci">IOTHUB_CLIENT_HANDLE IoTHubClient_CreateWithTransport(TRANSPORT_HANDLE transportHandle, const IOTHUB_CLIENT_CONFIG *config)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00825">iothub_client.c:825</a></div></div>
<div class="ttc" id="aiothub__client__ll_8c_html_a6d0656a868fcbdaba0fba066fbe92bd9"><div class="ttname"><a href="iothub__client__ll_8c.html#a6d0656a868fcbdaba0fba066fbe92bd9">IoTHubClient_LL_SetConnectionStatusCallback</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubClient_LL_SetConnectionStatusCallback(IOTHUB_CLIENT_LL_HANDLE iotHubClientHandle, IOTHUB_CLIENT_CONNECTION_STATUS_CALLBACK connectionStatusCallback, void *userContextCallback)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8c_source.html#l01549">iothub_client_ll.c:1549</a></div></div>
<div class="ttc" id="astructCONNECTION__STATUS__CALLBACK__INFO__TAG_html_ac7a7e6f71125e22fe542bf756f853c47"><div class="ttname"><a href="structCONNECTION__STATUS__CALLBACK__INFO__TAG.html#ac7a7e6f71125e22fe542bf756f853c47">CONNECTION_STATUS_CALLBACK_INFO_TAG::connection_status</a></div><div class="ttdeci">IOTHUB_CLIENT_CONNECTION_STATUS connection_status</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00095">iothub_client.c:95</a></div></div>
<div class="ttc" id="alock_8c_html_aef3dd970e9edfc49b414aa6cb0f3ad84"><div class="ttname"><a href="lock_8c.html#aef3dd970e9edfc49b414aa6cb0f3ad84">Unlock</a></div><div class="ttdeci">LOCK_RESULT Unlock(LOCK_HANDLE handle)</div><div class="ttdef"><b>Definition:</b> <a href="lock_8c_source.html#l00084">lock.c:84</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__INSTANCE__TAG_html_a83429a62cb7730444f275464b09703c5"><div class="ttname"><a href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a83429a62cb7730444f275464b09703c5">IOTHUB_CLIENT_INSTANCE_TAG::StopThread</a></div><div class="ttdeci">sig_atomic_t StopThread</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00030">iothub_client.c:30</a></div></div>
<div class="ttc" id="aiothub__client_8h_html_a039d574a949c85ba9c183c88d4ce03bf"><div class="ttname"><a href="iothub__client_8h.html#a039d574a949c85ba9c183c88d4ce03bf">IOTHUB_CLIENT_FILE_UPLOAD_CALLBACK</a></div><div class="ttdeci">void(* IOTHUB_CLIENT_FILE_UPLOAD_CALLBACK)(IOTHUB_CLIENT_FILE_UPLOAD_RESULT result, void *userContextCallback)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8h_source.html#l00040">iothub_client.h:40</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__INSTANCE__TAG_html_a3c7b086b1b96eb49ae2a4a67530746f9"><div class="ttname"><a href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a3c7b086b1b96eb49ae2a4a67530746f9">IOTHUB_CLIENT_INSTANCE_TAG::saved_user_callback_list</a></div><div class="ttdeci">VECTOR_HANDLE saved_user_callback_list</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00035">iothub_client.c:35</a></div></div>
<div class="ttc" id="asinglylinkedlist_8c_html_ab0c5ab1106ca4f392541c044fe8a1f13"><div class="ttname"><a href="singlylinkedlist_8c.html#ab0c5ab1106ca4f392541c044fe8a1f13">singlylinkedlist_create</a></div><div class="ttdeci">SINGLYLINKEDLIST_HANDLE singlylinkedlist_create(void)</div><div class="ttdef"><b>Definition:</b> <a href="singlylinkedlist_8c_source.html#l00021">singlylinkedlist.c:21</a></div></div>
<div class="ttc" id="aiothub__client__ll_8c_html_acd507eebe67d0b08bf49838120d9d3db"><div class="ttname"><a href="iothub__client__ll_8c.html#acd507eebe67d0b08bf49838120d9d3db">IoTHubClient_LL_GetRetryPolicy</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubClient_LL_GetRetryPolicy(IOTHUB_CLIENT_LL_HANDLE iotHubClientHandle, IOTHUB_CLIENT_RETRY_POLICY *retryPolicy, size_t *retryTimeoutLimitInSeconds)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8c_source.html#l01608">iothub_client_ll.c:1608</a></div></div>
<div class="ttc" id="aiothub__client_8c_html_a447f057c69117c3c36c6b13de05e2001"><div class="ttname"><a href="iothub__client_8c.html#a447f057c69117c3c36c6b13de05e2001">IoTHubClient_SetDeviceTwinCallback</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubClient_SetDeviceTwinCallback(IOTHUB_CLIENT_HANDLE iotHubClientHandle, IOTHUB_CLIENT_DEVICE_TWIN_CALLBACK deviceTwinCallback, void *userContextCallback)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l01414">iothub_client.c:1414</a></div></div>
<div class="ttc" id="alock_8c_html_ac9743d97f19aac4a0bda808e57ef1249"><div class="ttname"><a href="lock_8c.html#ac9743d97f19aac4a0bda808e57ef1249">Lock_Deinit</a></div><div class="ttdeci">LOCK_RESULT Lock_Deinit(LOCK_HANDLE handle)</div><div class="ttdef"><b>Definition:</b> <a href="lock_8c_source.html#l00036">lock.c:36</a></div></div>
<div class="ttc" id="aunionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK_html_a22af3d3a1fb308e53e132f54f80a8a0e"><div class="ttname"><a href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#a22af3d3a1fb308e53e132f54f80a8a0e">USER_CALLBACK_INFO_TAG::IOTHUB_CALLBACK::dev_twin_cb_info</a></div><div class="ttdeci">DEVICE_TWIN_CALLBACK_INFO dev_twin_cb_info</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00112">iothub_client.c:112</a></div></div>
<div class="ttc" id="astructSINGLYLINKEDLIST__INSTANCE__TAG_html"><div class="ttname"><a href="structSINGLYLINKEDLIST__INSTANCE__TAG.html">SINGLYLINKEDLIST_INSTANCE_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="singlylinkedlist_8c_source.html#l00016">singlylinkedlist.c:17</a></div></div>
<div class="ttc" id="astructEVENT__CONFIRM__CALLBACK__INFO__TAG_html"><div class="ttname"><a href="structEVENT__CONFIRM__CALLBACK__INFO__TAG.html">EVENT_CONFIRM_CALLBACK_INFO_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00083">iothub_client.c:84</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__INSTANCE__TAG_html_af2e37951e6519740b732c39d24625b6c"><div class="ttname"><a href="structIOTHUB__CLIENT__INSTANCE__TAG.html#af2e37951e6519740b732c39d24625b6c">IOTHUB_CLIENT_INSTANCE_TAG::connection_status_callback</a></div><div class="ttdeci">IOTHUB_CLIENT_CONNECTION_STATUS_CALLBACK connection_status_callback</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00039">iothub_client.c:39</a></div></div>
<div class="ttc" id="astructDEVICE__TWIN__CALLBACK__INFO__TAG_html_a809aa23bb29e52a042b588d83428c7e1"><div class="ttname"><a href="structDEVICE__TWIN__CALLBACK__INFO__TAG.html#a809aa23bb29e52a042b588d83428c7e1">DEVICE_TWIN_CALLBACK_INFO_TAG::size</a></div><div class="ttdeci">size_t size</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00080">iothub_client.c:80</a></div></div>
<div class="ttc" id="aiothubtransport_8c_html_a65f09a05e5c207636fe3eb3b7b4eb18b"><div class="ttname"><a href="iothubtransport_8c.html#a65f09a05e5c207636fe3eb3b7b4eb18b">IoTHubTransport_StartWorkerThread</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubTransport_StartWorkerThread(TRANSPORT_HANDLE transportHandle, IOTHUB_CLIENT_HANDLE clientHandle, IOTHUB_CLIENT_MULTIPLEXED_DO_WORK muxDoWork)</div><div class="ttdef"><b>Definition:</b> <a href="iothubtransport_8c_source.html#l00392">iothubtransport.c:392</a></div></div>
<div class="ttc" id="aiothub__client_8c_html_a7589aa8e3bd524b7c3112dc95b90504b"><div class="ttname"><a href="iothub__client_8c.html#a7589aa8e3bd524b7c3112dc95b90504b">IoTHubClient_ThreadTerminationOffset</a></div><div class="ttdeci">const size_t IoTHubClient_ThreadTerminationOffset</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00128">iothub_client.c:128</a></div></div>
<div class="ttc" id="aiothub__client__ll_8c_html_afc3049dc24e311713ab4735873989a4a"><div class="ttname"><a href="iothub__client__ll_8c.html#afc3049dc24e311713ab4735873989a4a">IoTHubClient_LL_Destroy</a></div><div class="ttdeci">void IoTHubClient_LL_Destroy(IOTHUB_CLIENT_LL_HANDLE iotHubClientHandle)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8c_source.html#l00928">iothub_client_ll.c:928</a></div></div>
<div class="ttc" id="aiothub__client__ll_8c_html_ab47deec96944dd3f1bf0e747ab565277"><div class="ttname"><a href="iothub__client__ll_8c.html#ab47deec96944dd3f1bf0e747ab565277">IoTHubClient_LL_SendEventAsync</a></div><div class="ttdeci">IOTHUB_CLIENT_RESULT IoTHubClient_LL_SendEventAsync(IOTHUB_CLIENT_LL_HANDLE iotHubClientHandle, IOTHUB_MESSAGE_HANDLE eventMessageHandle, IOTHUB_CLIENT_EVENT_CONFIRMATION_CALLBACK eventConfirmationCallback, void *userContextCallback)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8c_source.html#l01006">iothub_client_ll.c:1006</a></div></div>
<div class="ttc" id="aiothub__client_8c_html_aa72981c770835e08964e70efe1a2756c"><div class="ttname"><a href="iothub__client_8c.html#aa72981c770835e08964e70efe1a2756c">REPORTED_STATE_CALLBACK_INFO</a></div><div class="ttdeci">struct REPORTED_STATE_CALLBACK_INFO_TAG REPORTED_STATE_CALLBACK_INFO</div></div>
<div class="ttc" id="astructIOTHUB__QUEUE__CONTEXT__TAG_html_a1684554928b9033a4b3a3df07809f77b"><div class="ttname"><a href="structIOTHUB__QUEUE__CONTEXT__TAG.html#a1684554928b9033a4b3a3df07809f77b">IOTHUB_QUEUE_CONTEXT_TAG::userContextCallback</a></div><div class="ttdeci">void * userContextCallback</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00124">iothub_client.c:124</a></div></div>
<div class="ttc" id="acomponents_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c_html_a43922d2256109b20be39b4702fc26209"><div class="ttname"><a href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c.html#a43922d2256109b20be39b4702fc26209">VECTOR_move</a></div><div class="ttdeci">VECTOR_HANDLE VECTOR_move(VECTOR_HANDLE handle)</div><div class="ttdef"><b>Definition:</b> <a href="components_2arduino-esp32_2libraries_2AzureIoT_2src_2az__iot_2c-utility_2src_2vector_8c_source.html#l00056">vector.c:56</a></div></div>
<div class="ttc" id="asinglylinkedlist_8c_html_a49c10339cc9944b7a7028c25b557f1ef"><div class="ttname"><a href="singlylinkedlist_8c.html#a49c10339cc9944b7a7028c25b557f1ef">singlylinkedlist_get_next_item</a></div><div class="ttdeci">LIST_ITEM_HANDLE singlylinkedlist_get_next_item(LIST_ITEM_HANDLE item_handle)</div><div class="ttdef"><b>Definition:</b> <a href="singlylinkedlist_8c_source.html#l00177">singlylinkedlist.c:177</a></div></div>
<div class="ttc" id="astructEVENT__CONFIRM__CALLBACK__INFO__TAG_html_a57334a5ffaa4e1863ab52fe1b2f8dcba"><div class="ttname"><a href="structEVENT__CONFIRM__CALLBACK__INFO__TAG.html#a57334a5ffaa4e1863ab52fe1b2f8dcba">EVENT_CONFIRM_CALLBACK_INFO_TAG::confirm_result</a></div><div class="ttdeci">IOTHUB_CLIENT_CONFIRMATION_RESULT confirm_result</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00085">iothub_client.c:85</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__INSTANCE__TAG_html"><div class="ttname"><a href="structIOTHUB__CLIENT__INSTANCE__TAG.html">IOTHUB_CLIENT_INSTANCE_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00024">iothub_client.c:25</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__INSTANCE__TAG_html_a7f8a1a6bc50a5e0371f2587f89c9b8fe"><div class="ttname"><a href="structIOTHUB__CLIENT__INSTANCE__TAG.html#a7f8a1a6bc50a5e0371f2587f89c9b8fe">IOTHUB_CLIENT_INSTANCE_TAG::TransportHandle</a></div><div class="ttdeci">TRANSPORT_HANDLE TransportHandle</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00027">iothub_client.c:27</a></div></div>
<div class="ttc" id="abuffer_8c_html_a298682f1e91e58ad5c8e8e50d9bf235d"><div class="ttname"><a href="buffer_8c.html#a298682f1e91e58ad5c8e8e50d9bf235d">BUFFER_delete</a></div><div class="ttdeci">void BUFFER_delete(BUFFER_HANDLE handle)</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00095">buffer.c:95</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__CONFIG__TAG_html_ad030712a97d1d08abb7d38841417fc2d"><div class="ttname"><a href="structIOTHUB__CLIENT__CONFIG__TAG.html#ad030712a97d1d08abb7d38841417fc2d">IOTHUB_CLIENT_CONFIG_TAG::deviceKey</a></div><div class="ttdeci">const char * deviceKey</div><div class="ttdoc">The device key used to authenticate the device. If neither deviceSasToken nor deviceKey is present th...</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8h_source.html#l00189">iothub_client_ll.h:189</a></div></div>
<div class="ttc" id="astructMESSAGE__CALLBACK__INFO__TAG_html_a236b601a4e8c04102c63c85317fde8de"><div class="ttname"><a href="structMESSAGE__CALLBACK__INFO__TAG.html#a236b601a4e8c04102c63c85317fde8de">MESSAGE_CALLBACK_INFO_TAG::messageHandle</a></div><div class="ttdeci">IOTHUB_MESSAGE_HANDLE messageHandle</div><div class="ttdef"><b>Definition:</b> <a href="iothub__transport__ll_8h_source.html#l00028">iothub_transport_ll.h:28</a></div></div>
<div class="ttc" id="aiothub__client__ll_8c_html_a5f2ea7dfbb5eeb2510e39a43c92fe61e"><div class="ttname"><a href="iothub__client__ll_8c.html#a5f2ea7dfbb5eeb2510e39a43c92fe61e">IoTHubClient_LL_CreateWithTransport</a></div><div class="ttdeci">IOTHUB_CLIENT_LL_HANDLE IoTHubClient_LL_CreateWithTransport(const IOTHUB_CLIENT_DEVICE_CONFIG *config)</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8c_source.html#l00906">iothub_client_ll.c:906</a></div></div>
<div class="ttc" id="astructIOTHUB__CLIENT__CONFIG__TAG_html_a54b2c744ca9f3dbe94d71753ea36d1dc"><div class="ttname"><a href="structIOTHUB__CLIENT__CONFIG__TAG.html#a54b2c744ca9f3dbe94d71753ea36d1dc">IOTHUB_CLIENT_CONFIG_TAG::deviceSasToken</a></div><div class="ttdeci">const char * deviceSasToken</div><div class="ttdoc">The device SAS Token used to authenticate the device in place of device key. If neither deviceSasToke...</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client__ll_8h_source.html#l00193">iothub_client_ll.h:193</a></div></div>
<div class="ttc" id="athreadapi_8c_html_aed50c815f4090261c06968bb90644b50"><div class="ttname"><a href="threadapi_8c.html#aed50c815f4090261c06968bb90644b50">ThreadAPI_Create</a></div><div class="ttdeci">THREADAPI_RESULT ThreadAPI_Create(THREAD_HANDLE *threadHandle, THREAD_START_FUNC func, void *arg)</div><div class="ttdef"><b>Definition:</b> <a href="threadapi_8c_source.html#l00020">threadapi.c:20</a></div></div>
<div class="ttc" id="aunionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK_html_ac76016558a82ef4f252e2f0b427e53df"><div class="ttname"><a href="unionUSER__CALLBACK__INFO__TAG_1_1IOTHUB__CALLBACK.html#ac76016558a82ef4f252e2f0b427e53df">USER_CALLBACK_INFO_TAG::IOTHUB_CALLBACK::method_cb_info</a></div><div class="ttdeci">METHOD_CALLBACK_INFO method_cb_info</div><div class="ttdef"><b>Definition:</b> <a href="iothub__client_8c_source.html#l00116">iothub_client.c:116</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
