<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>watch 2: components/arduino-esp32/libraries/HTTPUpdate/src/HTTPUpdate.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">watch 2
   </div>
   <div id="projectbrief">Firmwareforwatch2</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_409f97388efe006bc3438b95e9edef48.html">components</a></li><li class="navelem"><a class="el" href="dir_5eb99044ce905dee52e93bf33cea5db4.html">arduino-esp32</a></li><li class="navelem"><a class="el" href="dir_0b98385dcf64e929fcaa5e8c894594ea.html">libraries</a></li><li class="navelem"><a class="el" href="dir_89cb0c6a5737175c092101fc6176d300.html">HTTPUpdate</a></li><li class="navelem"><a class="el" href="dir_5b4365fe82934290a52459ba07b0e4e8.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">HTTPUpdate.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="HTTPUpdate_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="HTTPUpdate_8h.html">HTTPUpdate.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="StreamString_8h.html">StreamString.h</a>&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="esp__partition_8h.html">esp_partition.h</a>&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="esp__ota__ops_8h.html">esp_ota_ops.h</a>&gt;</span>                <span class="comment">// get running partition</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; </div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">// To do extern &quot;C&quot; uint32_t _SPIFFS_start;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">// To do extern &quot;C&quot; uint32_t _SPIFFS_end;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="classHTTPUpdate.html#a84982133c703b6254895ba8fc29e6b42">   35</a></span>&#160;<a class="code" href="classHTTPUpdate.html#a84982133c703b6254895ba8fc29e6b42">HTTPUpdate::HTTPUpdate</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        : _httpClientTimeout(8000), _ledPin(-1)</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;{</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;}</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="classHTTPUpdate.html#a8b1f082b28085a3921a5d69d0aa61c9c">   40</a></span>&#160;<a class="code" href="classHTTPUpdate.html#a84982133c703b6254895ba8fc29e6b42">HTTPUpdate::HTTPUpdate</a>(<span class="keywordtype">int</span> httpClientTimeout)</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        : _httpClientTimeout(httpClientTimeout), _ledPin(-1)</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;{</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;}</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="classHTTPUpdate.html#a21ab460b58dffc465a35ce7dda6a0162">   45</a></span>&#160;<a class="code" href="classHTTPUpdate.html#a21ab460b58dffc465a35ce7dda6a0162">HTTPUpdate::~HTTPUpdate</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;{</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;}</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="classHTTPUpdate.html#a97df57ab33e37eceab3e18f1d42a2b39">   49</a></span>&#160;<a class="code" href="HTTPUpdate_8h.html#a00cca2ff720cc327c896d4efdca3b49d">HTTPUpdateResult</a> <a class="code" href="classHTTPUpdate.html#a97df57ab33e37eceab3e18f1d42a2b39">HTTPUpdate::update</a>(<a class="code" href="classWiFiClient.html">WiFiClient</a>&amp; client, <span class="keyword">const</span> String&amp; <a class="code" href="BLEEddystoneURL_8h.html#ad62c324cbfcc92532598792c6d0f6494">url</a>, <span class="keyword">const</span> String&amp; currentVersion)</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;{</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <a class="code" href="classHTTPClient.html">HTTPClient</a> http;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keywordflow">if</span>(!http.<a class="code" href="classHTTPClient.html#ab81abfff03920373515bbb4f808e1259">begin</a>(client, <a class="code" href="BLEEddystoneURL_8h.html#ad62c324cbfcc92532598792c6d0f6494">url</a>))</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    {</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="HTTPUpdate_8h.html#a00cca2ff720cc327c896d4efdca3b49da46e41fc3639ce1562c2b522a62fc0102">HTTP_UPDATE_FAILED</a>;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    }</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classHTTPUpdate.html#af7b50fd6c85a9fc105484e5f1c9c9b60">handleUpdate</a>(http, currentVersion, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;}</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="classHTTPUpdate.html#a69ae685d9f3bd52320f5a6af738e5ade">   59</a></span>&#160;<a class="code" href="HTTPUpdate_8h.html#a00cca2ff720cc327c896d4efdca3b49d">HTTPUpdateResult</a> <a class="code" href="classHTTPUpdate.html#a69ae685d9f3bd52320f5a6af738e5ade">HTTPUpdate::updateSpiffs</a>(<a class="code" href="classWiFiClient.html">WiFiClient</a>&amp; client, <span class="keyword">const</span> String&amp; <a class="code" href="BLEEddystoneURL_8h.html#ad62c324cbfcc92532598792c6d0f6494">url</a>, <span class="keyword">const</span> String&amp; currentVersion)</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;{</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="classHTTPClient.html">HTTPClient</a> http;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordflow">if</span>(!http.<a class="code" href="classHTTPClient.html#ab81abfff03920373515bbb4f808e1259">begin</a>(client, <a class="code" href="BLEEddystoneURL_8h.html#ad62c324cbfcc92532598792c6d0f6494">url</a>))</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="HTTPUpdate_8h.html#a00cca2ff720cc327c896d4efdca3b49da46e41fc3639ce1562c2b522a62fc0102">HTTP_UPDATE_FAILED</a>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    }</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classHTTPUpdate.html#af7b50fd6c85a9fc105484e5f1c9c9b60">handleUpdate</a>(http, currentVersion, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;}</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="classHTTPUpdate.html#a42a0a807a80da886d8deacaf50160fe9">   69</a></span>&#160;<a class="code" href="HTTPUpdate_8h.html#a00cca2ff720cc327c896d4efdca3b49d">HTTPUpdateResult</a> <a class="code" href="classHTTPUpdate.html#a97df57ab33e37eceab3e18f1d42a2b39">HTTPUpdate::update</a>(<a class="code" href="classWiFiClient.html">WiFiClient</a>&amp; client, <span class="keyword">const</span> String&amp; host, <a class="code" href="stdint_8h.html#a281b4b5562236420969a830503b0ba19">uint16_t</a> port, <span class="keyword">const</span> String&amp; uri,</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="keyword">const</span> String&amp; currentVersion)</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;{</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="classHTTPClient.html">HTTPClient</a> http;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordflow">if</span>(!http.<a class="code" href="classHTTPClient.html#ab81abfff03920373515bbb4f808e1259">begin</a>(client, host, port, uri))</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="HTTPUpdate_8h.html#a00cca2ff720cc327c896d4efdca3b49da46e41fc3639ce1562c2b522a62fc0102">HTTP_UPDATE_FAILED</a>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classHTTPUpdate.html#af7b50fd6c85a9fc105484e5f1c9c9b60">handleUpdate</a>(http, currentVersion, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;}</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="classHTTPUpdate.html#ae6407a5c406c0a17857a915d7deb35cb">   84</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classHTTPUpdate.html#ae6407a5c406c0a17857a915d7deb35cb">HTTPUpdate::getLastError</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;{</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classHTTPUpdate.html#a3acee67dfc90439ad7f30e997d6cbcd9">_lastError</a>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;}</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="classHTTPUpdate.html#ace6c70de125e75f24ac161c06b057c6d">   93</a></span>&#160;String <a class="code" href="classHTTPUpdate.html#ace6c70de125e75f24ac161c06b057c6d">HTTPUpdate::getLastErrorString</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;{</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classHTTPUpdate.html#a3acee67dfc90439ad7f30e997d6cbcd9">_lastError</a> == 0) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordflow">return</span> String(); <span class="comment">// no error</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    }</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="comment">// error from Update class</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classHTTPUpdate.html#a3acee67dfc90439ad7f30e997d6cbcd9">_lastError</a> &gt; 0) {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <a class="code" href="classStreamString.html">StreamString</a> error;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <a class="code" href="Update_8h.html#a3d048750907dbe22cd9a9fc5998fac45">Update</a>.<a class="code" href="classUpdateClass.html#a4d5f8f3d3a2b2647ac6f562c0a9998a6">printError</a>(error);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        error.trim(); <span class="comment">// remove line ending</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keywordflow">return</span> String(<span class="stringliteral">&quot;Update error: &quot;</span>) + error;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">// error from http client</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classHTTPUpdate.html#a3acee67dfc90439ad7f30e997d6cbcd9">_lastError</a> &gt; -100) {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keywordflow">return</span> String(<span class="stringliteral">&quot;HTTP error: &quot;</span>) + <a class="code" href="classHTTPClient.html#a67b2ddb847583db02ab58968f1973d06">HTTPClient::errorToString</a>(<a class="code" href="classHTTPUpdate.html#a3acee67dfc90439ad7f30e997d6cbcd9">_lastError</a>);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">switch</span>(<a class="code" href="classHTTPUpdate.html#a3acee67dfc90439ad7f30e997d6cbcd9">_lastError</a>) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="HTTPUpdate_8h.html#aaf4d054af2c103e3c5219cac28b8a39d">HTTP_UE_TOO_LESS_SPACE</a>:</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;Not Enough space&quot;</span>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="HTTPUpdate_8h.html#aff24cd218d9ada5c10378b1868f2c4b9">HTTP_UE_SERVER_NOT_REPORT_SIZE</a>:</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;Server Did Not Report Size&quot;</span>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="HTTPUpdate_8h.html#a36d468741177ed355651a01849719447">HTTP_UE_SERVER_FILE_NOT_FOUND</a>:</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;File Not Found (404)&quot;</span>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="HTTPUpdate_8h.html#a92114f77c9620f98c4a29a433e92867c">HTTP_UE_SERVER_FORBIDDEN</a>:</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;Forbidden (403)&quot;</span>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="HTTPUpdate_8h.html#a7fa0e4c31e674f961ffc5902ffe69c45">HTTP_UE_SERVER_WRONG_HTTP_CODE</a>:</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;Wrong HTTP Code&quot;</span>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="HTTPUpdate_8h.html#a546907d1ede3277d672184238d2bf674">HTTP_UE_SERVER_FAULTY_MD5</a>:</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;Wrong MD5&quot;</span>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="HTTPUpdate_8h.html#a8e68e2dbdc3d8e5d8eb48f2ad20d1017">HTTP_UE_BIN_VERIFY_HEADER_FAILED</a>:</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;Verify Bin Header Failed&quot;</span>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="HTTPUpdate_8h.html#a1b2dc34ddb05b179c75303df74a3ba08">HTTP_UE_BIN_FOR_WRONG_FLASH</a>:</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;New Binary Does Not Fit Flash Size&quot;</span>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="HTTPUpdate_8h.html#a1bcd07612c4598f106477765cac52956">HTTP_UE_NO_PARTITION</a>:</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;Partition Could Not be Found&quot;</span>;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    }</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">return</span> String();</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;}</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="HTTPUpdate_8cpp.html#a184a1adc9a0e792cf83ae3ea07384222">  138</a></span>&#160;String <a class="code" href="HTTPUpdate_8cpp.html#a184a1adc9a0e792cf83ae3ea07384222">getSketchSHA256</a>() {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> HASH_LEN = 32; <span class="comment">// SHA-256 digest length</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <a class="code" href="stdint_8h.html#a2aff71146ab4942b2b38860c749c4074">uint8_t</a> sha_256[HASH_LEN] = { 0 };</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">// get sha256 digest for running partition</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="esp__partition_8h.html#a1f5be7f3fd4590e6b8c88e27daaf6ac8">esp_partition_get_sha256</a>(<a class="code" href="esp__ota__ops_8h.html#a6c7acddf42c3ae03cf51f79d74145318">esp_ota_get_running_partition</a>(), sha_256) == 0) {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordtype">char</span> <a class="code" href="structbuffer.html">buffer</a>[2 * HASH_LEN + 1];</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> <a class="code" href="cJSON_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = 0; <a class="code" href="cJSON_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &lt; HASH_LEN; <a class="code" href="cJSON_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>++) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <a class="code" href="stdint_8h.html#a2aff71146ab4942b2b38860c749c4074">uint8_t</a> nibble = (sha_256[<a class="code" href="cJSON_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>] &amp; 0xf0) &gt;&gt; 4;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <a class="code" href="structbuffer.html">buffer</a>[2 * <a class="code" href="cJSON_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>] = nibble &lt; 10 ? char(nibble + <span class="charliteral">&#39;0&#39;</span>) : char(nibble - 10 + <span class="charliteral">&#39;A&#39;</span>);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      nibble = sha_256[<a class="code" href="cJSON_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>] &amp; 0x0f;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      <a class="code" href="structbuffer.html">buffer</a>[2 * <a class="code" href="cJSON_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> + 1] = nibble &lt; 10 ? char(nibble + <span class="charliteral">&#39;0&#39;</span>) : char(nibble - 10 + <span class="charliteral">&#39;A&#39;</span>);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="structbuffer.html">buffer</a>[2 * HASH_LEN] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">return</span> String(<a class="code" href="structbuffer.html">buffer</a>);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordflow">return</span> String();</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;}</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="classHTTPUpdate.html#af7b50fd6c85a9fc105484e5f1c9c9b60">  170</a></span>&#160;<a class="code" href="HTTPUpdate_8h.html#a00cca2ff720cc327c896d4efdca3b49d">HTTPUpdateResult</a> <a class="code" href="classHTTPUpdate.html#af7b50fd6c85a9fc105484e5f1c9c9b60">HTTPUpdate::handleUpdate</a>(<a class="code" href="classHTTPClient.html">HTTPClient</a>&amp; http, <span class="keyword">const</span> String&amp; currentVersion, <span class="keywordtype">bool</span> spiffs)</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;{</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <a class="code" href="HTTPUpdate_8h.html#a00cca2ff720cc327c896d4efdca3b49d">HTTPUpdateResult</a> ret = <a class="code" href="HTTPUpdate_8h.html#a00cca2ff720cc327c896d4efdca3b49da46e41fc3639ce1562c2b522a62fc0102">HTTP_UPDATE_FAILED</a>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">// use HTTP/1.0 for update since the update handler not support any transfer Encoding</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    http.<a class="code" href="classHTTPClient.html#a9f3607dca940296fbaa533748ea00345">useHTTP10</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    http.<a class="code" href="classHTTPClient.html#aecf2796973d47ca97350b506ca7cfda2">setTimeout</a>(_httpClientTimeout);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    http.<a class="code" href="classHTTPClient.html#ac91e131aee8ef86f2e5a2dc07a268eda">setUserAgent</a>(<span class="stringliteral">&quot;ESP32-http-Update&quot;</span>);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    http.<a class="code" href="classHTTPClient.html#a2cc159b388bb1b7cd8655effac1646d2">addHeader</a>(<span class="stringliteral">&quot;Cache-Control&quot;</span>, <span class="stringliteral">&quot;no-cache&quot;</span>);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    http.<a class="code" href="classHTTPClient.html#a2cc159b388bb1b7cd8655effac1646d2">addHeader</a>(<span class="stringliteral">&quot;x-ESP32-STA-MAC&quot;</span>, <a class="code" href="WiFi_8cpp.html#a15ec5ec682c954456eb10166c1645f00">WiFi</a>.<a class="code" href="classWiFiSTAClass.html#ad5da7d2799629b1cc1b1b12d76743c5b">macAddress</a>());</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    http.<a class="code" href="classHTTPClient.html#a2cc159b388bb1b7cd8655effac1646d2">addHeader</a>(<span class="stringliteral">&quot;x-ESP32-AP-MAC&quot;</span>, <a class="code" href="WiFi_8cpp.html#a15ec5ec682c954456eb10166c1645f00">WiFi</a>.<a class="code" href="classWiFiAPClass.html#ae2206901511e19eaba6441e088249dab">softAPmacAddress</a>());</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    http.<a class="code" href="classHTTPClient.html#a2cc159b388bb1b7cd8655effac1646d2">addHeader</a>(<span class="stringliteral">&quot;x-ESP32-free-space&quot;</span>, String(<a class="code" href="Esp_8cpp.html#a60fb5642f274131d972a5fae09f4c2cd">ESP</a>.<a class="code" href="classEspClass.html#a0436083ec2e5e7b685711bb5b858c6a0">getFreeSketchSpace</a>()));</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    http.<a class="code" href="classHTTPClient.html#a2cc159b388bb1b7cd8655effac1646d2">addHeader</a>(<span class="stringliteral">&quot;x-ESP32-sketch-size&quot;</span>, String(<a class="code" href="Esp_8cpp.html#a60fb5642f274131d972a5fae09f4c2cd">ESP</a>.<a class="code" href="classEspClass.html#a038af80a7194f1094409d4e0908429bf">getSketchSize</a>()));</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    String sketchMD5 = <a class="code" href="Esp_8cpp.html#a60fb5642f274131d972a5fae09f4c2cd">ESP</a>.<a class="code" href="classEspClass.html#a226a6a230fc97be889373acffc333c6a">getSketchMD5</a>();</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">if</span>(sketchMD5.length() != 0) {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        http.<a class="code" href="classHTTPClient.html#a2cc159b388bb1b7cd8655effac1646d2">addHeader</a>(<span class="stringliteral">&quot;x-ESP32-sketch-md5&quot;</span>, sketchMD5);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">// Add also a SHA256</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    String sketchSHA256 = <a class="code" href="HTTPUpdate_8cpp.html#a184a1adc9a0e792cf83ae3ea07384222">getSketchSHA256</a>();</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span>(sketchSHA256.length() != 0) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      http.<a class="code" href="classHTTPClient.html#a2cc159b388bb1b7cd8655effac1646d2">addHeader</a>(<span class="stringliteral">&quot;x-ESP32-sketch-sha256&quot;</span>, sketchSHA256);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    http.<a class="code" href="classHTTPClient.html#a2cc159b388bb1b7cd8655effac1646d2">addHeader</a>(<span class="stringliteral">&quot;x-ESP32-chip-size&quot;</span>, String(<a class="code" href="Esp_8cpp.html#a60fb5642f274131d972a5fae09f4c2cd">ESP</a>.<a class="code" href="classEspClass.html#af5a98af9d4cf6ca17fe4050864da6e4c">getFlashChipSize</a>()));</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    http.<a class="code" href="classHTTPClient.html#a2cc159b388bb1b7cd8655effac1646d2">addHeader</a>(<span class="stringliteral">&quot;x-ESP32-sdk-version&quot;</span>, <a class="code" href="Esp_8cpp.html#a60fb5642f274131d972a5fae09f4c2cd">ESP</a>.<a class="code" href="classEspClass.html#a6a349f3a69f6b8e046ea45d6fca06cad">getSdkVersion</a>());</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">if</span>(spiffs) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        http.<a class="code" href="classHTTPClient.html#a2cc159b388bb1b7cd8655effac1646d2">addHeader</a>(<span class="stringliteral">&quot;x-ESP32-mode&quot;</span>, <span class="stringliteral">&quot;spiffs&quot;</span>);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        http.<a class="code" href="classHTTPClient.html#a2cc159b388bb1b7cd8655effac1646d2">addHeader</a>(<span class="stringliteral">&quot;x-ESP32-mode&quot;</span>, <span class="stringliteral">&quot;sketch&quot;</span>);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    }</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">if</span>(currentVersion &amp;&amp; currentVersion[0] != 0x00) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        http.<a class="code" href="classHTTPClient.html#a2cc159b388bb1b7cd8655effac1646d2">addHeader</a>(<span class="stringliteral">&quot;x-ESP32-version&quot;</span>, currentVersion);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> * headerkeys[] = { <span class="stringliteral">&quot;x-MD5&quot;</span> };</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordtype">size_t</span> headerkeyssize = <span class="keyword">sizeof</span>(headerkeys) / <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="comment">// track these headers</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    http.<a class="code" href="classHTTPClient.html#af5f763b142544649d657f54245755d62">collectHeaders</a>(headerkeys, headerkeyssize);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="tag__strings_8h.html#afa2765f9f647ea2e9c46055f93a44d41">code</a> = http.<a class="code" href="classHTTPClient.html#aee331934366e80758b190cdda7dcf556">GET</a>();</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordtype">int</span> len = http.<a class="code" href="classHTTPClient.html#aa15267cd69b0b03da7f5ccbc3424c04a">getSize</a>();</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="tag__strings_8h.html#afa2765f9f647ea2e9c46055f93a44d41">code</a> &lt;= 0) {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <a class="code" href="esp32-hal-log_8h.html#a202330fb3201c41b86ad5a4700e529df">log_e</a>(<span class="stringliteral">&quot;HTTP error: %s\n&quot;</span>, http.<a class="code" href="classHTTPClient.html#a67b2ddb847583db02ab58968f1973d06">errorToString</a>(<a class="code" href="tag__strings_8h.html#afa2765f9f647ea2e9c46055f93a44d41">code</a>).c_str());</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <a class="code" href="classHTTPUpdate.html#a3acee67dfc90439ad7f30e997d6cbcd9">_lastError</a> = <a class="code" href="tag__strings_8h.html#afa2765f9f647ea2e9c46055f93a44d41">code</a>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        http.<a class="code" href="classHTTPClient.html#ab2575ce8e970edf8613b47258cb5df41">end</a>();</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="HTTPUpdate_8h.html#a00cca2ff720cc327c896d4efdca3b49da46e41fc3639ce1562c2b522a62fc0102">HTTP_UPDATE_FAILED</a>;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <a class="code" href="esp32-hal-log_8h.html#a1de06c4fd79189513953309af5b5593a">log_d</a>(<span class="stringliteral">&quot;Header read fin.\n&quot;</span>);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <a class="code" href="esp32-hal-log_8h.html#a1de06c4fd79189513953309af5b5593a">log_d</a>(<span class="stringliteral">&quot;Server header:\n&quot;</span>);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <a class="code" href="esp32-hal-log_8h.html#a1de06c4fd79189513953309af5b5593a">log_d</a>(<span class="stringliteral">&quot; - code: %d\n&quot;</span>, <a class="code" href="tag__strings_8h.html#afa2765f9f647ea2e9c46055f93a44d41">code</a>);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <a class="code" href="esp32-hal-log_8h.html#a1de06c4fd79189513953309af5b5593a">log_d</a>(<span class="stringliteral">&quot; - len: %d\n&quot;</span>, len);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">if</span>(http.<a class="code" href="classHTTPClient.html#a971c1e8e56ea4c515165c82bd3b969d2">hasHeader</a>(<span class="stringliteral">&quot;x-MD5&quot;</span>)) {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <a class="code" href="esp32-hal-log_8h.html#a1de06c4fd79189513953309af5b5593a">log_d</a>(<span class="stringliteral">&quot; - MD5: %s\n&quot;</span>, http.<a class="code" href="classHTTPClient.html#a3d732e68ce2dba6bb49ad7bc1dbe1d64">header</a>(<span class="stringliteral">&quot;x-MD5&quot;</span>).c_str());</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <a class="code" href="esp32-hal-log_8h.html#a1de06c4fd79189513953309af5b5593a">log_d</a>(<span class="stringliteral">&quot;ESP32 info:\n&quot;</span>);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <a class="code" href="esp32-hal-log_8h.html#a1de06c4fd79189513953309af5b5593a">log_d</a>(<span class="stringliteral">&quot; - free Space: %d\n&quot;</span>, <a class="code" href="Esp_8cpp.html#a60fb5642f274131d972a5fae09f4c2cd">ESP</a>.<a class="code" href="classEspClass.html#a0436083ec2e5e7b685711bb5b858c6a0">getFreeSketchSpace</a>());</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <a class="code" href="esp32-hal-log_8h.html#a1de06c4fd79189513953309af5b5593a">log_d</a>(<span class="stringliteral">&quot; - current Sketch Size: %d\n&quot;</span>, <a class="code" href="Esp_8cpp.html#a60fb5642f274131d972a5fae09f4c2cd">ESP</a>.<a class="code" href="classEspClass.html#a038af80a7194f1094409d4e0908429bf">getSketchSize</a>());</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">if</span>(currentVersion &amp;&amp; currentVersion[0] != 0x00) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <a class="code" href="esp32-hal-log_8h.html#a1de06c4fd79189513953309af5b5593a">log_d</a>(<span class="stringliteral">&quot; - current version: %s\n&quot;</span>, currentVersion.c_str() );</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    }</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160; </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">switch</span>(<a class="code" href="tag__strings_8h.html#afa2765f9f647ea2e9c46055f93a44d41">code</a>) {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="HTTPClient_8h.html#a53ed6f87c106a4356147444b3ae4c56cae2595e750c322a682765ada8bcdcd059">HTTP_CODE_OK</a>:  </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="keywordflow">if</span>(len &gt; 0) {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <span class="keywordtype">bool</span> startUpdate = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            <span class="keywordflow">if</span>(spiffs) {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                <span class="keyword">const</span> <a class="code" href="structesp__partition__t.html">esp_partition_t</a>* _partition = <a class="code" href="esp__partition_8h.html#a7d77af6e5cb9311468e8bdd2a502ac15">esp_partition_find_first</a>(<a class="code" href="esp__partition_8h.html#aafc4f41a0b5bab81d1f89163cc950537a837281927c13d663ca535936a9fdf62e">ESP_PARTITION_TYPE_DATA</a>, <a class="code" href="esp__partition_8h.html#aff78bd7a13309ceefda89b36740da4b8aef73e9686eb0a3a611f077105d18e2a4">ESP_PARTITION_SUBTYPE_DATA_SPIFFS</a>, <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                <span class="keywordflow">if</span>(!_partition){</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                    <a class="code" href="classHTTPUpdate.html#a3acee67dfc90439ad7f30e997d6cbcd9">_lastError</a> = <a class="code" href="HTTPUpdate_8h.html#a1bcd07612c4598f106477765cac52956">HTTP_UE_NO_PARTITION</a>;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="HTTPUpdate_8h.html#a00cca2ff720cc327c896d4efdca3b49da46e41fc3639ce1562c2b522a62fc0102">HTTP_UPDATE_FAILED</a>;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160; </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                <span class="keywordflow">if</span>(len &gt; _partition-&gt;<a class="code" href="structesp__partition__t.html#a9c3481b9c4f6d6aede019d8719f87937">size</a>) {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                    <a class="code" href="esp32-hal-log_8h.html#a202330fb3201c41b86ad5a4700e529df">log_e</a>(<span class="stringliteral">&quot;spiffsSize to low (%d) needed: %d\n&quot;</span>, _partition-&gt;<a class="code" href="structesp__partition__t.html#a9c3481b9c4f6d6aede019d8719f87937">size</a>, len);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                    startUpdate = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                <span class="keywordtype">int</span> sketchFreeSpace = <a class="code" href="Esp_8cpp.html#a60fb5642f274131d972a5fae09f4c2cd">ESP</a>.<a class="code" href="classEspClass.html#a0436083ec2e5e7b685711bb5b858c6a0">getFreeSketchSpace</a>();</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                <span class="keywordflow">if</span>(!sketchFreeSpace){</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                    <a class="code" href="classHTTPUpdate.html#a3acee67dfc90439ad7f30e997d6cbcd9">_lastError</a> = <a class="code" href="HTTPUpdate_8h.html#a1bcd07612c4598f106477765cac52956">HTTP_UE_NO_PARTITION</a>;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="HTTPUpdate_8h.html#a00cca2ff720cc327c896d4efdca3b49da46e41fc3639ce1562c2b522a62fc0102">HTTP_UPDATE_FAILED</a>;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                <span class="keywordflow">if</span>(len &gt; sketchFreeSpace) {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                    <a class="code" href="esp32-hal-log_8h.html#a202330fb3201c41b86ad5a4700e529df">log_e</a>(<span class="stringliteral">&quot;FreeSketchSpace to low (%d) needed: %d\n&quot;</span>, sketchFreeSpace, len);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                    startUpdate = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            }</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <span class="keywordflow">if</span>(!startUpdate) {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                <a class="code" href="classHTTPUpdate.html#a3acee67dfc90439ad7f30e997d6cbcd9">_lastError</a> = <a class="code" href="HTTPUpdate_8h.html#aaf4d054af2c103e3c5219cac28b8a39d">HTTP_UE_TOO_LESS_SPACE</a>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                ret = <a class="code" href="HTTPUpdate_8h.html#a00cca2ff720cc327c896d4efdca3b49da46e41fc3639ce1562c2b522a62fc0102">HTTP_UPDATE_FAILED</a>;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                <a class="code" href="classWiFiClient.html">WiFiClient</a> * tcp = http.<a class="code" href="classHTTPClient.html#a9d583dc3d5f4f2f984e8c38f69d4960c">getStreamPtr</a>();</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">// To do?                WiFiUDP::stopAll();</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">// To do?                WiFiClient::stopAllExcept(tcp);</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                <a class="code" href="esp32-hal-misc_8c.html#a7f2dfce1046bdd2a2b753643726c2346">delay</a>(100);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                <span class="keywordtype">int</span> command;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                <span class="keywordflow">if</span>(spiffs) {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                    command = <a class="code" href="Update_8h.html#afb25ebf866d31d30e35e796cdea072da">U_SPIFFS</a>;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                    <a class="code" href="esp32-hal-log_8h.html#a1de06c4fd79189513953309af5b5593a">log_d</a>(<span class="stringliteral">&quot;runUpdate spiffs...\n&quot;</span>);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                    command = <a class="code" href="Update_8h.html#ad5f3fbea36839106464d46011abe2b2c">U_FLASH</a>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                    <a class="code" href="esp32-hal-log_8h.html#a1de06c4fd79189513953309af5b5593a">log_d</a>(<span class="stringliteral">&quot;runUpdate flash...\n&quot;</span>);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                }</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160; </div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                <span class="keywordflow">if</span>(!spiffs) {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">/* To do</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">                    uint8_t buf[4];</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">                    if(tcp-&gt;peekBytes(&amp;buf[0], 4) != 4) {</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">                        log_e(&quot;peekBytes magic header failed\n&quot;);</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">                        _lastError = HTTP_UE_BIN_VERIFY_HEADER_FAILED;</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">                        http.end();</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">                        return HTTP_UPDATE_FAILED;</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">                    }</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160; </div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                    <span class="comment">// check for valid first magic byte</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">//                    if(buf[0] != 0xE9) {</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                    <span class="keywordflow">if</span>(tcp-&gt;<a class="code" href="classWiFiClient.html#ab47076806232cb80dbabbaa832919d84">peek</a>() != 0xE9) {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                        <a class="code" href="esp32-hal-log_8h.html#a202330fb3201c41b86ad5a4700e529df">log_e</a>(<span class="stringliteral">&quot;Magic header does not start with 0xE9\n&quot;</span>);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                        <a class="code" href="classHTTPUpdate.html#a3acee67dfc90439ad7f30e997d6cbcd9">_lastError</a> = <a class="code" href="HTTPUpdate_8h.html#a8e68e2dbdc3d8e5d8eb48f2ad20d1017">HTTP_UE_BIN_VERIFY_HEADER_FAILED</a>;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                        http.<a class="code" href="classHTTPClient.html#ab2575ce8e970edf8613b47258cb5df41">end</a>();</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                        <span class="keywordflow">return</span> <a class="code" href="HTTPUpdate_8h.html#a00cca2ff720cc327c896d4efdca3b49da46e41fc3639ce1562c2b522a62fc0102">HTTP_UPDATE_FAILED</a>;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                    }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment">/* To do</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment">                    uint32_t bin_flash_size = ESP.magicFlashChipSize((buf[3] &amp; 0xf0) &gt;&gt; 4);</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment">                    // check if new bin fits to SPI flash</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">                    if(bin_flash_size &gt; ESP.getFlashChipRealSize()) {</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment">                        log_e(&quot;New binary does not fit SPI Flash size\n&quot;);</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">                        _lastError = HTTP_UE_BIN_FOR_WRONG_FLASH;</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment">                        http.end();</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment">                        return HTTP_UPDATE_FAILED;</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">                    }</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="classHTTPUpdate.html#a4d162d9773ed7260c4541634912b8990">runUpdate</a>(*tcp, len, http.<a class="code" href="classHTTPClient.html#a3d732e68ce2dba6bb49ad7bc1dbe1d64">header</a>(<span class="stringliteral">&quot;x-MD5&quot;</span>), command)) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                    ret = <a class="code" href="HTTPUpdate_8h.html#a00cca2ff720cc327c896d4efdca3b49da4269752946540f981e22890dd6d7ef19">HTTP_UPDATE_OK</a>;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                    <a class="code" href="esp32-hal-log_8h.html#a1de06c4fd79189513953309af5b5593a">log_d</a>(<span class="stringliteral">&quot;Update ok\n&quot;</span>);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                    http.<a class="code" href="classHTTPClient.html#ab2575ce8e970edf8613b47258cb5df41">end</a>();</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                    <span class="keywordflow">if</span>(<a class="code" href="classHTTPUpdate.html#a028e90699c351e63f3d967d4cdd2e931">_rebootOnUpdate</a> &amp;&amp; !spiffs) {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                        <a class="code" href="Esp_8cpp.html#a60fb5642f274131d972a5fae09f4c2cd">ESP</a>.<a class="code" href="classEspClass.html#a73ca2c0ca203650ada6c70a550f04a4f">restart</a>();</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                    }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                    ret = <a class="code" href="HTTPUpdate_8h.html#a00cca2ff720cc327c896d4efdca3b49da46e41fc3639ce1562c2b522a62fc0102">HTTP_UPDATE_FAILED</a>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                    <a class="code" href="esp32-hal-log_8h.html#a202330fb3201c41b86ad5a4700e529df">log_e</a>(<span class="stringliteral">&quot;Update failed\n&quot;</span>);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            <a class="code" href="classHTTPUpdate.html#a3acee67dfc90439ad7f30e997d6cbcd9">_lastError</a> = <a class="code" href="HTTPUpdate_8h.html#aff24cd218d9ada5c10378b1868f2c4b9">HTTP_UE_SERVER_NOT_REPORT_SIZE</a>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            ret = <a class="code" href="HTTPUpdate_8h.html#a00cca2ff720cc327c896d4efdca3b49da46e41fc3639ce1562c2b522a62fc0102">HTTP_UPDATE_FAILED</a>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            <a class="code" href="esp32-hal-log_8h.html#a202330fb3201c41b86ad5a4700e529df">log_e</a>(<span class="stringliteral">&quot;Content-Length was 0 or wasn&#39;t set by Server?!\n&quot;</span>);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="HTTPClient_8h.html#a53ed6f87c106a4356147444b3ae4c56cae64c13e0696f60544124cba6a00b10c6">HTTP_CODE_NOT_MODIFIED</a>:</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        ret = <a class="code" href="HTTPUpdate_8h.html#a00cca2ff720cc327c896d4efdca3b49dab17121a68ab34634ada3b4f860b2eb98">HTTP_UPDATE_NO_UPDATES</a>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="HTTPClient_8h.html#a53ed6f87c106a4356147444b3ae4c56ca545f35017b8227cf8fba324518c05f60">HTTP_CODE_NOT_FOUND</a>:</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <a class="code" href="classHTTPUpdate.html#a3acee67dfc90439ad7f30e997d6cbcd9">_lastError</a> = <a class="code" href="HTTPUpdate_8h.html#a36d468741177ed355651a01849719447">HTTP_UE_SERVER_FILE_NOT_FOUND</a>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        ret = <a class="code" href="HTTPUpdate_8h.html#a00cca2ff720cc327c896d4efdca3b49da46e41fc3639ce1562c2b522a62fc0102">HTTP_UPDATE_FAILED</a>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="HTTPClient_8h.html#a53ed6f87c106a4356147444b3ae4c56cab822a7deeae213c7cc25a2a19fa5eab7">HTTP_CODE_FORBIDDEN</a>:</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <a class="code" href="classHTTPUpdate.html#a3acee67dfc90439ad7f30e997d6cbcd9">_lastError</a> = <a class="code" href="HTTPUpdate_8h.html#a92114f77c9620f98c4a29a433e92867c">HTTP_UE_SERVER_FORBIDDEN</a>;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        ret = <a class="code" href="HTTPUpdate_8h.html#a00cca2ff720cc327c896d4efdca3b49da46e41fc3639ce1562c2b522a62fc0102">HTTP_UPDATE_FAILED</a>;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <a class="code" href="classHTTPUpdate.html#a3acee67dfc90439ad7f30e997d6cbcd9">_lastError</a> = <a class="code" href="HTTPUpdate_8h.html#a7fa0e4c31e674f961ffc5902ffe69c45">HTTP_UE_SERVER_WRONG_HTTP_CODE</a>;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        ret = <a class="code" href="HTTPUpdate_8h.html#a00cca2ff720cc327c896d4efdca3b49da46e41fc3639ce1562c2b522a62fc0102">HTTP_UPDATE_FAILED</a>;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <a class="code" href="esp32-hal-log_8h.html#a202330fb3201c41b86ad5a4700e529df">log_e</a>(<span class="stringliteral">&quot;HTTP Code is (%d)\n&quot;</span>, <a class="code" href="tag__strings_8h.html#afa2765f9f647ea2e9c46055f93a44d41">code</a>);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    }</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    http.<a class="code" href="classHTTPClient.html#ab2575ce8e970edf8613b47258cb5df41">end</a>();</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;}</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00373"></a><span class="lineno"><a class="line" href="classHTTPUpdate.html#a4d162d9773ed7260c4541634912b8990">  373</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classHTTPUpdate.html#a4d162d9773ed7260c4541634912b8990">HTTPUpdate::runUpdate</a>(<a class="code" href="classStream.html">Stream</a>&amp; <a class="code" href="RPSL_8txt.html#a41b63e2e1c5ed84534837a2f274db04d">in</a>, <a class="code" href="stdint_8h.html#a0238af00180b6d9278fa1c6aa790fdf4">uint32_t</a> <a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a>, String <a class="code" href="compat-1_83_8h.html#a0afe2b38aad3922dbc2d396b8af03d60">md5</a>, <span class="keywordtype">int</span> command)</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;{</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <a class="code" href="classStreamString.html">StreamString</a> error;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="Update_8h.html#a3d048750907dbe22cd9a9fc5998fac45">Update</a>.<a class="code" href="classUpdateClass.html#abe822ad7dae6ff298ba76d0e4efe1fb8">begin</a>(<a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a>, command, _ledPin, _ledOn)) {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <a class="code" href="classHTTPUpdate.html#a3acee67dfc90439ad7f30e997d6cbcd9">_lastError</a> = <a class="code" href="Update_8h.html#a3d048750907dbe22cd9a9fc5998fac45">Update</a>.<a class="code" href="classUpdateClass.html#a22564efdddc2ffd35a4e21bfcd1efc0e">getError</a>();</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <a class="code" href="Update_8h.html#a3d048750907dbe22cd9a9fc5998fac45">Update</a>.<a class="code" href="classUpdateClass.html#a4d5f8f3d3a2b2647ac6f562c0a9998a6">printError</a>(error);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        error.trim(); <span class="comment">// remove line ending</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <a class="code" href="esp32-hal-log_8h.html#a202330fb3201c41b86ad5a4700e529df">log_e</a>(<span class="stringliteral">&quot;Update.begin failed! (%s)\n&quot;</span>, error.c_str());</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160; </div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="compat-1_83_8h.html#a0afe2b38aad3922dbc2d396b8af03d60">md5</a>.length()) {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="Update_8h.html#a3d048750907dbe22cd9a9fc5998fac45">Update</a>.<a class="code" href="classUpdateClass.html#a9f98044e8088a10d0ab114b72b5db8c3">setMD5</a>(<a class="code" href="compat-1_83_8h.html#a0afe2b38aad3922dbc2d396b8af03d60">md5</a>.c_str())) {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            <a class="code" href="classHTTPUpdate.html#a3acee67dfc90439ad7f30e997d6cbcd9">_lastError</a> = <a class="code" href="HTTPUpdate_8h.html#a546907d1ede3277d672184238d2bf674">HTTP_UE_SERVER_FAULTY_MD5</a>;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <a class="code" href="esp32-hal-log_8h.html#a202330fb3201c41b86ad5a4700e529df">log_e</a>(<span class="stringliteral">&quot;Update.setMD5 failed! (%s)\n&quot;</span>, <a class="code" href="compat-1_83_8h.html#a0afe2b38aad3922dbc2d396b8af03d60">md5</a>.c_str());</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160; </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">// To do: the SHA256 could be checked if the server sends it</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="Update_8h.html#a3d048750907dbe22cd9a9fc5998fac45">Update</a>.<a class="code" href="classUpdateClass.html#ad182caea234cb07b49daca0bac7ee2e1">writeStream</a>(<a class="code" href="RPSL_8txt.html#a41b63e2e1c5ed84534837a2f274db04d">in</a>) != <a class="code" href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a>) {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <a class="code" href="classHTTPUpdate.html#a3acee67dfc90439ad7f30e997d6cbcd9">_lastError</a> = <a class="code" href="Update_8h.html#a3d048750907dbe22cd9a9fc5998fac45">Update</a>.<a class="code" href="classUpdateClass.html#a22564efdddc2ffd35a4e21bfcd1efc0e">getError</a>();</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <a class="code" href="Update_8h.html#a3d048750907dbe22cd9a9fc5998fac45">Update</a>.<a class="code" href="classUpdateClass.html#a4d5f8f3d3a2b2647ac6f562c0a9998a6">printError</a>(error);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        error.trim(); <span class="comment">// remove line ending</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <a class="code" href="esp32-hal-log_8h.html#a202330fb3201c41b86ad5a4700e529df">log_e</a>(<span class="stringliteral">&quot;Update.writeStream failed! (%s)\n&quot;</span>, error.c_str());</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="Update_8h.html#a3d048750907dbe22cd9a9fc5998fac45">Update</a>.<a class="code" href="classUpdateClass.html#ad5b66d6fb76933caf321ec1f3b55bce8">end</a>()) {</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <a class="code" href="classHTTPUpdate.html#a3acee67dfc90439ad7f30e997d6cbcd9">_lastError</a> = <a class="code" href="Update_8h.html#a3d048750907dbe22cd9a9fc5998fac45">Update</a>.<a class="code" href="classUpdateClass.html#a22564efdddc2ffd35a4e21bfcd1efc0e">getError</a>();</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <a class="code" href="Update_8h.html#a3d048750907dbe22cd9a9fc5998fac45">Update</a>.<a class="code" href="classUpdateClass.html#a4d5f8f3d3a2b2647ac6f562c0a9998a6">printError</a>(error);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        error.trim(); <span class="comment">// remove line ending</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <a class="code" href="esp32-hal-log_8h.html#a202330fb3201c41b86ad5a4700e529df">log_e</a>(<span class="stringliteral">&quot;Update.end failed! (%s)\n&quot;</span>, error.c_str());</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    }</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160; </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;}</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="preprocessor">#if !defined(NO_GLOBAL_INSTANCES) &amp;&amp; !defined(NO_GLOBAL_HTTPUPDATE)</span></div>
<div class="line"><a name="l00416"></a><span class="lineno"><a class="line" href="HTTPUpdate_8h.html#afdb32f3f9a570872f80b3ebf092b07f7">  416</a></span>&#160;<a class="code" href="classHTTPUpdate.html">HTTPUpdate</a> <a class="code" href="HTTPUpdate_8cpp.html#afdb32f3f9a570872f80b3ebf092b07f7">httpUpdate</a>;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="preprocessor">#endif</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassUpdateClass_html_ad5b66d6fb76933caf321ec1f3b55bce8"><div class="ttname"><a href="classUpdateClass.html#ad5b66d6fb76933caf321ec1f3b55bce8">UpdateClass::end</a></div><div class="ttdeci">bool end(bool evenIfRemaining=false)</div><div class="ttdef"><b>Definition:</b> <a href="Updater_8cpp_source.html#l00258">Updater.cpp:258</a></div></div>
<div class="ttc" id="aclassStream_html"><div class="ttname"><a href="classStream.html">Stream</a></div><div class="ttdef"><b>Definition:</b> <a href="Stream_8h_source.html#l00038">Stream.h:39</a></div></div>
<div class="ttc" id="aHTTPUpdate_8h_html_a36d468741177ed355651a01849719447"><div class="ttname"><a href="HTTPUpdate_8h.html#a36d468741177ed355651a01849719447">HTTP_UE_SERVER_FILE_NOT_FOUND</a></div><div class="ttdeci">#define HTTP_UE_SERVER_FILE_NOT_FOUND</div><div class="ttdef"><b>Definition:</b> <a href="HTTPUpdate_8h_source.html#l00040">HTTPUpdate.h:39</a></div></div>
<div class="ttc" id="aesp__ota__ops_8h_html"><div class="ttname"><a href="esp__ota__ops_8h.html">esp_ota_ops.h</a></div></div>
<div class="ttc" id="aclassHTTPUpdate_html_a84982133c703b6254895ba8fc29e6b42"><div class="ttname"><a href="classHTTPUpdate.html#a84982133c703b6254895ba8fc29e6b42">HTTPUpdate::HTTPUpdate</a></div><div class="ttdeci">HTTPUpdate(void)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPUpdate_8cpp_source.html#l00035">HTTPUpdate.cpp:35</a></div></div>
<div class="ttc" id="aclassHTTPUpdate_html"><div class="ttname"><a href="classHTTPUpdate.html">HTTPUpdate</a></div><div class="ttdef"><b>Definition:</b> <a href="HTTPUpdate_8h_source.html#l00055">HTTPUpdate.h:56</a></div></div>
<div class="ttc" id="aUpdate_8h_html_a3d048750907dbe22cd9a9fc5998fac45"><div class="ttname"><a href="Update_8h.html#a3d048750907dbe22cd9a9fc5998fac45">Update</a></div><div class="ttdeci">UpdateClass Update</div><div class="ttdef"><b>Definition:</b> <a href="Updater_8cpp_source.html#l00370">Updater.cpp:370</a></div></div>
<div class="ttc" id="aclassHTTPUpdate_html_ace6c70de125e75f24ac161c06b057c6d"><div class="ttname"><a href="classHTTPUpdate.html#ace6c70de125e75f24ac161c06b057c6d">HTTPUpdate::getLastErrorString</a></div><div class="ttdeci">String getLastErrorString(void)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPUpdate_8cpp_source.html#l00093">HTTPUpdate.cpp:93</a></div></div>
<div class="ttc" id="acompat-1_83_8h_html_a0afe2b38aad3922dbc2d396b8af03d60"><div class="ttname"><a href="compat-1_83_8h.html#a0afe2b38aad3922dbc2d396b8af03d60">md5</a></div><div class="ttdeci">#define md5</div><div class="ttdef"><b>Definition:</b> <a href="compat-1_83_8h_source.html#l02010">compat-1.3.h:2009</a></div></div>
<div class="ttc" id="aHTTPUpdate_8h_html_a00cca2ff720cc327c896d4efdca3b49da46e41fc3639ce1562c2b522a62fc0102"><div class="ttname"><a href="HTTPUpdate_8h.html#a00cca2ff720cc327c896d4efdca3b49da46e41fc3639ce1562c2b522a62fc0102">HTTP_UPDATE_FAILED</a></div><div class="ttdeci">@ HTTP_UPDATE_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="HTTPUpdate_8h_source.html#l00048">HTTPUpdate.h:48</a></div></div>
<div class="ttc" id="astructesp__partition__t_html_a9c3481b9c4f6d6aede019d8719f87937"><div class="ttname"><a href="structesp__partition__t.html#a9c3481b9c4f6d6aede019d8719f87937">esp_partition_t::size</a></div><div class="ttdeci">uint32_t size</div><div class="ttdef"><b>Definition:</b> <a href="esp__partition_8h_source.html#l00104">esp_partition.h:104</a></div></div>
<div class="ttc" id="astdint_8h_html_a281b4b5562236420969a830503b0ba19"><div class="ttname"><a href="stdint_8h.html#a281b4b5562236420969a830503b0ba19">uint16_t</a></div><div class="ttdeci">__uint16_t uint16_t</div><div class="ttdef"><b>Definition:</b> <a href="stdint_8h_source.html#l00033">stdint.h:33</a></div></div>
<div class="ttc" id="aclassHTTPClient_html_a9d583dc3d5f4f2f984e8c38f69d4960c"><div class="ttname"><a href="classHTTPClient.html#a9d583dc3d5f4f2f984e8c38f69d4960c">HTTPClient::getStreamPtr</a></div><div class="ttdeci">WiFiClient * getStreamPtr(void)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPClient_8cpp_source.html#l00743">HTTPClient.cpp:743</a></div></div>
<div class="ttc" id="aclassEspClass_html_a73ca2c0ca203650ada6c70a550f04a4f"><div class="ttname"><a href="classEspClass.html#a73ca2c0ca203650ada6c70a550f04a4f">EspClass::restart</a></div><div class="ttdeci">void restart()</div><div class="ttdef"><b>Definition:</b> <a href="Esp_8cpp_source.html#l00095">Esp.cpp:95</a></div></div>
<div class="ttc" id="aHTTPUpdate_8h_html_a546907d1ede3277d672184238d2bf674"><div class="ttname"><a href="HTTPUpdate_8h.html#a546907d1ede3277d672184238d2bf674">HTTP_UE_SERVER_FAULTY_MD5</a></div><div class="ttdeci">#define HTTP_UE_SERVER_FAULTY_MD5</div><div class="ttdef"><b>Definition:</b> <a href="HTTPUpdate_8h_source.html#l00043">HTTPUpdate.h:42</a></div></div>
<div class="ttc" id="aclassEspClass_html_a226a6a230fc97be889373acffc333c6a"><div class="ttname"><a href="classEspClass.html#a226a6a230fc97be889373acffc333c6a">EspClass::getSketchMD5</a></div><div class="ttdeci">String getSketchMD5()</div><div class="ttdef"><b>Definition:</b> <a href="Esp_8cpp_source.html#l00165">Esp.cpp:165</a></div></div>
<div class="ttc" id="aclassHTTPClient_html_af5f763b142544649d657f54245755d62"><div class="ttname"><a href="classHTTPClient.html#af5f763b142544649d657f54245755d62">HTTPClient::collectHeaders</a></div><div class="ttdeci">void collectHeaders(const char *headerKeys[], const size_t headerKeysCount)</div><div class="ttdoc">Response handling.</div><div class="ttdef"><b>Definition:</b> <a href="HTTPClient_8cpp_source.html#l00929">HTTPClient.cpp:929</a></div></div>
<div class="ttc" id="aesp__partition_8h_html_a7d77af6e5cb9311468e8bdd2a502ac15"><div class="ttname"><a href="esp__partition_8h.html#a7d77af6e5cb9311468e8bdd2a502ac15">esp_partition_find_first</a></div><div class="ttdeci">const esp_partition_t * esp_partition_find_first(esp_partition_type_t type, esp_partition_subtype_t subtype, const char *label)</div><div class="ttdoc">Find first partition based on one or more parameters.</div></div>
<div class="ttc" id="aclassUpdateClass_html_ad182caea234cb07b49daca0bac7ee2e1"><div class="ttname"><a href="classUpdateClass.html#ad182caea234cb07b49daca0bac7ee2e1">UpdateClass::writeStream</a></div><div class="ttdeci">size_t writeStream(Stream &amp;data)</div><div class="ttdef"><b>Definition:</b> <a href="Updater_8cpp_source.html#l00318">Updater.cpp:318</a></div></div>
<div class="ttc" id="aHTTPUpdate_8h_html_a00cca2ff720cc327c896d4efdca3b49dab17121a68ab34634ada3b4f860b2eb98"><div class="ttname"><a href="HTTPUpdate_8h.html#a00cca2ff720cc327c896d4efdca3b49dab17121a68ab34634ada3b4f860b2eb98">HTTP_UPDATE_NO_UPDATES</a></div><div class="ttdeci">@ HTTP_UPDATE_NO_UPDATES</div><div class="ttdef"><b>Definition:</b> <a href="HTTPUpdate_8h_source.html#l00049">HTTPUpdate.h:49</a></div></div>
<div class="ttc" id="aclassEspClass_html_a038af80a7194f1094409d4e0908429bf"><div class="ttname"><a href="classEspClass.html#a038af80a7194f1094409d4e0908429bf">EspClass::getSketchSize</a></div><div class="ttdeci">uint32_t getSketchSize()</div><div class="ttdef"><b>Definition:</b> <a href="Esp_8cpp_source.html#l00161">Esp.cpp:161</a></div></div>
<div class="ttc" id="aclassHTTPUpdate_html_ae6407a5c406c0a17857a915d7deb35cb"><div class="ttname"><a href="classHTTPUpdate.html#ae6407a5c406c0a17857a915d7deb35cb">HTTPUpdate::getLastError</a></div><div class="ttdeci">int getLastError(void)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPUpdate_8cpp_source.html#l00084">HTTPUpdate.cpp:84</a></div></div>
<div class="ttc" id="aclassHTTPClient_html_ab2575ce8e970edf8613b47258cb5df41"><div class="ttname"><a href="classHTTPClient.html#ab2575ce8e970edf8613b47258cb5df41">HTTPClient::end</a></div><div class="ttdeci">void end(void)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPClient_8cpp_source.html#l00345">HTTPClient.cpp:345</a></div></div>
<div class="ttc" id="aclassUpdateClass_html_a9f98044e8088a10d0ab114b72b5db8c3"><div class="ttname"><a href="classUpdateClass.html#a9f98044e8088a10d0ab114b72b5db8c3">UpdateClass::setMD5</a></div><div class="ttdeci">bool setMD5(const char *expected_md5)</div><div class="ttdef"><b>Definition:</b> <a href="Updater_8cpp_source.html#l00249">Updater.cpp:249</a></div></div>
<div class="ttc" id="aesp__partition_8h_html_aafc4f41a0b5bab81d1f89163cc950537a837281927c13d663ca535936a9fdf62e"><div class="ttname"><a href="esp__partition_8h.html#aafc4f41a0b5bab81d1f89163cc950537a837281927c13d663ca535936a9fdf62e">ESP_PARTITION_TYPE_DATA</a></div><div class="ttdeci">@ ESP_PARTITION_TYPE_DATA</div><div class="ttdoc">Data partition type.</div><div class="ttdef"><b>Definition:</b> <a href="esp__partition_8h_source.html#l00040">esp_partition.h:40</a></div></div>
<div class="ttc" id="aclassUpdateClass_html_a4d5f8f3d3a2b2647ac6f562c0a9998a6"><div class="ttname"><a href="classUpdateClass.html#a4d5f8f3d3a2b2647ac6f562c0a9998a6">UpdateClass::printError</a></div><div class="ttdeci">void printError(Stream &amp;out)</div><div class="ttdef"><b>Definition:</b> <a href="Updater_8cpp_source.html#l00362">Updater.cpp:362</a></div></div>
<div class="ttc" id="aclassHTTPClient_html_a67b2ddb847583db02ab58968f1973d06"><div class="ttname"><a href="classHTTPClient.html#a67b2ddb847583db02ab58968f1973d06">HTTPClient::errorToString</a></div><div class="ttdeci">static String errorToString(int error)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPClient_8cpp_source.html#l00864">HTTPClient.cpp:864</a></div></div>
<div class="ttc" id="aHTTPUpdate_8h_html_a92114f77c9620f98c4a29a433e92867c"><div class="ttname"><a href="HTTPUpdate_8h.html#a92114f77c9620f98c4a29a433e92867c">HTTP_UE_SERVER_FORBIDDEN</a></div><div class="ttdeci">#define HTTP_UE_SERVER_FORBIDDEN</div><div class="ttdef"><b>Definition:</b> <a href="HTTPUpdate_8h_source.html#l00041">HTTPUpdate.h:40</a></div></div>
<div class="ttc" id="aesp32-hal-log_8h_html_a1de06c4fd79189513953309af5b5593a"><div class="ttname"><a href="esp32-hal-log_8h.html#a1de06c4fd79189513953309af5b5593a">log_d</a></div><div class="ttdeci">#define log_d(format,...)</div><div class="ttdef"><b>Definition:</b> <a href="esp32-hal-log_8h_source.html#l00093">esp32-hal-log.h:92</a></div></div>
<div class="ttc" id="aclassHTTPClient_html_a971c1e8e56ea4c515165c82bd3b969d2"><div class="ttname"><a href="classHTTPClient.html#a971c1e8e56ea4c515165c82bd3b969d2">HTTPClient::hasHeader</a></div><div class="ttdeci">bool hasHeader(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPClient_8cpp_source.html#l00972">HTTPClient.cpp:972</a></div></div>
<div class="ttc" id="aclassHTTPClient_html_ac91e131aee8ef86f2e5a2dc07a268eda"><div class="ttname"><a href="classHTTPClient.html#ac91e131aee8ef86f2e5a2dc07a268eda">HTTPClient::setUserAgent</a></div><div class="ttdeci">void setUserAgent(const String &amp;userAgent)</div><div class="ttdoc">keep-alive</div><div class="ttdef"><b>Definition:</b> <a href="HTTPClient_8cpp_source.html#l00414">HTTPClient.cpp:414</a></div></div>
<div class="ttc" id="aclassHTTPClient_html"><div class="ttname"><a href="classHTTPClient.html">HTTPClient</a></div><div class="ttdef"><b>Definition:</b> <a href="HTTPClient_8h_source.html#l00127">HTTPClient.h:128</a></div></div>
<div class="ttc" id="acJSON_8h_html_a750b5d744c39a06bfb13e6eb010e35d0"><div class="ttname"><a href="cJSON_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition:</b> <a href="cJSON_8h_source.html#l00168">cJSON.h:168</a></div></div>
<div class="ttc" id="aclassHTTPUpdate_html_a69ae685d9f3bd52320f5a6af738e5ade"><div class="ttname"><a href="classHTTPUpdate.html#a69ae685d9f3bd52320f5a6af738e5ade">HTTPUpdate::updateSpiffs</a></div><div class="ttdeci">t_httpUpdate_return updateSpiffs(WiFiClient &amp;client, const String &amp;url, const String &amp;currentVersion=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPUpdate_8cpp_source.html#l00059">HTTPUpdate.cpp:59</a></div></div>
<div class="ttc" id="aclassHTTPUpdate_html_a3acee67dfc90439ad7f30e997d6cbcd9"><div class="ttname"><a href="classHTTPUpdate.html#a3acee67dfc90439ad7f30e997d6cbcd9">HTTPUpdate::_lastError</a></div><div class="ttdeci">int _lastError</div><div class="ttdef"><b>Definition:</b> <a href="HTTPUpdate_8h_source.html#l00088">HTTPUpdate.h:88</a></div></div>
<div class="ttc" id="aHTTPUpdate_8h_html_a1bcd07612c4598f106477765cac52956"><div class="ttname"><a href="HTTPUpdate_8h.html#a1bcd07612c4598f106477765cac52956">HTTP_UE_NO_PARTITION</a></div><div class="ttdeci">#define HTTP_UE_NO_PARTITION</div><div class="ttdef"><b>Definition:</b> <a href="HTTPUpdate_8h_source.html#l00046">HTTPUpdate.h:45</a></div></div>
<div class="ttc" id="aclassWiFiAPClass_html_ae2206901511e19eaba6441e088249dab"><div class="ttname"><a href="classWiFiAPClass.html#ae2206901511e19eaba6441e088249dab">WiFiAPClass::softAPmacAddress</a></div><div class="ttdeci">uint8_t * softAPmacAddress(uint8_t *mac)</div><div class="ttdef"><b>Definition:</b> <a href="WiFiAP_8cpp_source.html#l00285">WiFiAP.cpp:285</a></div></div>
<div class="ttc" id="aclassHTTPClient_html_a2cc159b388bb1b7cd8655effac1646d2"><div class="ttname"><a href="classHTTPClient.html#a2cc159b388bb1b7cd8655effac1646d2">HTTPClient::addHeader</a></div><div class="ttdeci">void addHeader(const String &amp;name, const String &amp;value, bool first=false, bool replace=true)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPClient_8cpp_source.html#l00900">HTTPClient.cpp:900</a></div></div>
<div class="ttc" id="aUpdate_8h_html_afb25ebf866d31d30e35e796cdea072da"><div class="ttname"><a href="Update_8h.html#afb25ebf866d31d30e35e796cdea072da">U_SPIFFS</a></div><div class="ttdeci">#define U_SPIFFS</div><div class="ttdef"><b>Definition:</b> <a href="Update_8h_source.html#l00027">Update.h:26</a></div></div>
<div class="ttc" id="aHTTPUpdate_8h_html_a00cca2ff720cc327c896d4efdca3b49da4269752946540f981e22890dd6d7ef19"><div class="ttname"><a href="HTTPUpdate_8h.html#a00cca2ff720cc327c896d4efdca3b49da4269752946540f981e22890dd6d7ef19">HTTP_UPDATE_OK</a></div><div class="ttdeci">@ HTTP_UPDATE_OK</div><div class="ttdef"><b>Definition:</b> <a href="HTTPUpdate_8h_source.html#l00051">HTTPUpdate.h:50</a></div></div>
<div class="ttc" id="aBLEEddystoneURL_8h_html_ad62c324cbfcc92532598792c6d0f6494"><div class="ttname"><a href="BLEEddystoneURL_8h.html#ad62c324cbfcc92532598792c6d0f6494">url</a></div><div class="ttdeci">uint8_t url[16]</div><div class="ttdef"><b>Definition:</b> <a href="BLEEddystoneURL_8h_source.html#l00002">BLEEddystoneURL.h:2</a></div></div>
<div class="ttc" id="aHTTPUpdate_8h_html_a7fa0e4c31e674f961ffc5902ffe69c45"><div class="ttname"><a href="HTTPUpdate_8h.html#a7fa0e4c31e674f961ffc5902ffe69c45">HTTP_UE_SERVER_WRONG_HTTP_CODE</a></div><div class="ttdeci">#define HTTP_UE_SERVER_WRONG_HTTP_CODE</div><div class="ttdef"><b>Definition:</b> <a href="HTTPUpdate_8h_source.html#l00042">HTTPUpdate.h:41</a></div></div>
<div class="ttc" id="aclassHTTPClient_html_aee331934366e80758b190cdda7dcf556"><div class="ttname"><a href="classHTTPClient.html#aee331934366e80758b190cdda7dcf556">HTTPClient::GET</a></div><div class="ttdeci">int GET()</div><div class="ttdoc">request handling</div><div class="ttdef"><b>Definition:</b> <a href="HTTPClient_8cpp_source.html#l00480">HTTPClient.cpp:480</a></div></div>
<div class="ttc" id="aclassHTTPClient_html_aecf2796973d47ca97350b506ca7cfda2"><div class="ttname"><a href="classHTTPClient.html#aecf2796973d47ca97350b506ca7cfda2">HTTPClient::setTimeout</a></div><div class="ttdeci">void setTimeout(uint16_t timeout)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPClient_8cpp_source.html#l00458">HTTPClient.cpp:458</a></div></div>
<div class="ttc" id="aclassWiFiClient_html"><div class="ttname"><a href="classWiFiClient.html">WiFiClient</a></div><div class="ttdef"><b>Definition:</b> <a href="WiFiClient_8h_source.html#l00039">WiFiClient.h:40</a></div></div>
<div class="ttc" id="aStreamString_8h_html"><div class="ttname"><a href="StreamString_8h.html">StreamString.h</a></div></div>
<div class="ttc" id="aesp__partition_8h_html"><div class="ttname"><a href="esp__partition_8h.html">esp_partition.h</a></div><div class="ttdoc">Support functions for flash encryption features.</div></div>
<div class="ttc" id="aclassWiFiSTAClass_html_ad5da7d2799629b1cc1b1b12d76743c5b"><div class="ttname"><a href="classWiFiSTAClass.html#ad5da7d2799629b1cc1b1b12d76743c5b">WiFiSTAClass::macAddress</a></div><div class="ttdeci">uint8_t * macAddress(uint8_t *mac)</div><div class="ttdef"><b>Definition:</b> <a href="WiFiSTA_8cpp_source.html#l00424">WiFiSTA.cpp:424</a></div></div>
<div class="ttc" id="aHTTPClient_8h_html_a53ed6f87c106a4356147444b3ae4c56cae2595e750c322a682765ada8bcdcd059"><div class="ttname"><a href="HTTPClient_8h.html#a53ed6f87c106a4356147444b3ae4c56cae2595e750c322a682765ada8bcdcd059">HTTP_CODE_OK</a></div><div class="ttdeci">@ HTTP_CODE_OK</div><div class="ttdef"><b>Definition:</b> <a href="HTTPClient_8h_source.html#l00060">HTTPClient.h:60</a></div></div>
<div class="ttc" id="aclassWiFiClient_html_ab47076806232cb80dbabbaa832919d84"><div class="ttname"><a href="classWiFiClient.html#ab47076806232cb80dbabbaa832919d84">WiFiClient::peek</a></div><div class="ttdeci">int peek()</div><div class="ttdef"><b>Definition:</b> <a href="WiFiClient_8cpp_source.html#l00442">WiFiClient.cpp:442</a></div></div>
<div class="ttc" id="aclassHTTPClient_html_ab81abfff03920373515bbb4f808e1259"><div class="ttname"><a href="classHTTPClient.html#ab81abfff03920373515bbb4f808e1259">HTTPClient::begin</a></div><div class="ttdeci">bool begin(WiFiClient &amp;client, String url)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPClient_8cpp_source.html#l00125">HTTPClient.cpp:125</a></div></div>
<div class="ttc" id="aHTTPUpdate_8h_html_a1b2dc34ddb05b179c75303df74a3ba08"><div class="ttname"><a href="HTTPUpdate_8h.html#a1b2dc34ddb05b179c75303df74a3ba08">HTTP_UE_BIN_FOR_WRONG_FLASH</a></div><div class="ttdeci">#define HTTP_UE_BIN_FOR_WRONG_FLASH</div><div class="ttdef"><b>Definition:</b> <a href="HTTPUpdate_8h_source.html#l00045">HTTPUpdate.h:44</a></div></div>
<div class="ttc" id="aclassUpdateClass_html_a22564efdddc2ffd35a4e21bfcd1efc0e"><div class="ttname"><a href="classUpdateClass.html#a22564efdddc2ffd35a4e21bfcd1efc0e">UpdateClass::getError</a></div><div class="ttdeci">uint8_t getError()</div><div class="ttdef"><b>Definition:</b> <a href="Update_8h_source.html#l00101">Update.h:101</a></div></div>
<div class="ttc" id="aHTTPClient_8h_html_a53ed6f87c106a4356147444b3ae4c56cab822a7deeae213c7cc25a2a19fa5eab7"><div class="ttname"><a href="HTTPClient_8h.html#a53ed6f87c106a4356147444b3ae4c56cab822a7deeae213c7cc25a2a19fa5eab7">HTTP_CODE_FORBIDDEN</a></div><div class="ttdeci">@ HTTP_CODE_FORBIDDEN</div><div class="ttdef"><b>Definition:</b> <a href="HTTPClient_8h_source.html#l00081">HTTPClient.h:81</a></div></div>
<div class="ttc" id="astructesp__partition__t_html"><div class="ttname"><a href="structesp__partition__t.html">esp_partition_t</a></div><div class="ttdoc">partition information structure</div><div class="ttdef"><b>Definition:</b> <a href="esp__partition_8h_source.html#l00100">esp_partition.h:100</a></div></div>
<div class="ttc" id="aclassHTTPUpdate_html_a028e90699c351e63f3d967d4cdd2e931"><div class="ttname"><a href="classHTTPUpdate.html#a028e90699c351e63f3d967d4cdd2e931">HTTPUpdate::_rebootOnUpdate</a></div><div class="ttdeci">bool _rebootOnUpdate</div><div class="ttdef"><b>Definition:</b> <a href="HTTPUpdate_8h_source.html#l00089">HTTPUpdate.h:89</a></div></div>
<div class="ttc" id="aclassEspClass_html_a0436083ec2e5e7b685711bb5b858c6a0"><div class="ttname"><a href="classEspClass.html#a0436083ec2e5e7b685711bb5b858c6a0">EspClass::getFreeSketchSpace</a></div><div class="ttdeci">uint32_t getFreeSketchSpace()</div><div class="ttdef"><b>Definition:</b> <a href="Esp_8cpp_source.html#l00205">Esp.cpp:205</a></div></div>
<div class="ttc" id="aesp__partition_8h_html_aff78bd7a13309ceefda89b36740da4b8aef73e9686eb0a3a611f077105d18e2a4"><div class="ttname"><a href="esp__partition_8h.html#aff78bd7a13309ceefda89b36740da4b8aef73e9686eb0a3a611f077105d18e2a4">ESP_PARTITION_SUBTYPE_DATA_SPIFFS</a></div><div class="ttdeci">@ ESP_PARTITION_SUBTYPE_DATA_SPIFFS</div><div class="ttdoc">SPIFFS partition.</div><div class="ttdef"><b>Definition:</b> <a href="esp__partition_8h_source.html#l00078">esp_partition.h:78</a></div></div>
<div class="ttc" id="aRPSL_8txt_html_a41b63e2e1c5ed84534837a2f274db04d"><div class="ttname"><a href="RPSL_8txt.html#a41b63e2e1c5ed84534837a2f274db04d">in</a></div><div class="ttdeci">Construction Failure by Licensor or any Contributor to enforce any provision of this License will not be deemed a waiver of future enforcement of that or any other provision Any law or regulation which provides that the language of a contract shall be construed against the drafter will not apply to this License or portion to be that provision of the License will be enforced to the maximum extent permissible so as to effect the economic benefits and intent of the and the remainder of this License will continue in full force and if applicable law prohibits or restricts You from fully and or specifically complying with Sections and or or prevents the enforceability of either of those this License will immediately terminate and You must immediately discontinue any use of the Covered Code and destroy all copies of it that are in your possession or control Dispute Resolution Any litigation or other dispute resolution between You and Licensor relating to this License shall take place in the and You and Licensor hereby consent to the personal jurisdiction and venue in</div><div class="ttdef"><b>Definition:</b> <a href="RPSL_8txt_source.html#l00400">RPSL.txt:400</a></div></div>
<div class="ttc" id="adef_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="def_8h_source.html#l00071">def.h:70</a></div></div>
<div class="ttc" id="aclassHTTPUpdate_html_af7b50fd6c85a9fc105484e5f1c9c9b60"><div class="ttname"><a href="classHTTPUpdate.html#af7b50fd6c85a9fc105484e5f1c9c9b60">HTTPUpdate::handleUpdate</a></div><div class="ttdeci">t_httpUpdate_return handleUpdate(HTTPClient &amp;http, const String &amp;currentVersion, bool spiffs=false)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPUpdate_8cpp_source.html#l00170">HTTPUpdate.cpp:170</a></div></div>
<div class="ttc" id="astructbuffer_html"><div class="ttname"><a href="structbuffer.html">buffer</a></div><div class="ttdef"><b>Definition:</b> <a href="zconf_8lex_8c_source.html#l01095">zconf.lex.c:1095</a></div></div>
<div class="ttc" id="aWiFi_8cpp_html_a15ec5ec682c954456eb10166c1645f00"><div class="ttname"><a href="WiFi_8cpp.html#a15ec5ec682c954456eb10166c1645f00">WiFi</a></div><div class="ttdeci">WiFiClass WiFi</div><div class="ttdef"><b>Definition:</b> <a href="WiFi_8cpp_source.html#l00091">WiFi.cpp:91</a></div></div>
<div class="ttc" id="aclassHTTPClient_html_a9f3607dca940296fbaa533748ea00345"><div class="ttname"><a href="classHTTPClient.html#a9f3607dca940296fbaa533748ea00345">HTTPClient::useHTTP10</a></div><div class="ttdeci">void useHTTP10(bool usehttp10=true)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPClient_8cpp_source.html#l00470">HTTPClient.cpp:470</a></div></div>
<div class="ttc" id="aHTTPUpdate_8cpp_html_a184a1adc9a0e792cf83ae3ea07384222"><div class="ttname"><a href="HTTPUpdate_8cpp.html#a184a1adc9a0e792cf83ae3ea07384222">getSketchSHA256</a></div><div class="ttdeci">String getSketchSHA256()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPUpdate_8cpp_source.html#l00138">HTTPUpdate.cpp:138</a></div></div>
<div class="ttc" id="aEsp_8cpp_html_a60fb5642f274131d972a5fae09f4c2cd"><div class="ttname"><a href="Esp_8cpp.html#a60fb5642f274131d972a5fae09f4c2cd">ESP</a></div><div class="ttdeci">EspClass ESP</div><div class="ttdef"><b>Definition:</b> <a href="Esp_8cpp_source.html#l00088">Esp.cpp:88</a></div></div>
<div class="ttc" id="aHTTPClient_8h_html_a53ed6f87c106a4356147444b3ae4c56ca545f35017b8227cf8fba324518c05f60"><div class="ttname"><a href="HTTPClient_8h.html#a53ed6f87c106a4356147444b3ae4c56ca545f35017b8227cf8fba324518c05f60">HTTP_CODE_NOT_FOUND</a></div><div class="ttdeci">@ HTTP_CODE_NOT_FOUND</div><div class="ttdef"><b>Definition:</b> <a href="HTTPClient_8h_source.html#l00082">HTTPClient.h:82</a></div></div>
<div class="ttc" id="aclassEspClass_html_a6a349f3a69f6b8e046ea45d6fca06cad"><div class="ttname"><a href="classEspClass.html#a6a349f3a69f6b8e046ea45d6fca06cad">EspClass::getSdkVersion</a></div><div class="ttdeci">const char * getSdkVersion()</div><div class="ttdef"><b>Definition:</b> <a href="Esp_8cpp_source.html#l00221">Esp.cpp:221</a></div></div>
<div class="ttc" id="aclassHTTPUpdate_html_a21ab460b58dffc465a35ce7dda6a0162"><div class="ttname"><a href="classHTTPUpdate.html#a21ab460b58dffc465a35ce7dda6a0162">HTTPUpdate::~HTTPUpdate</a></div><div class="ttdeci">~HTTPUpdate(void)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPUpdate_8cpp_source.html#l00045">HTTPUpdate.cpp:45</a></div></div>
<div class="ttc" id="aclassEspClass_html_af5a98af9d4cf6ca17fe4050864da6e4c"><div class="ttname"><a href="classEspClass.html#af5a98af9d4cf6ca17fe4050864da6e4c">EspClass::getFlashChipSize</a></div><div class="ttdeci">uint32_t getFlashChipSize()</div><div class="ttdef"><b>Definition:</b> <a href="Esp_8cpp_source.html#l00226">Esp.cpp:226</a></div></div>
<div class="ttc" id="aclassHTTPUpdate_html_a97df57ab33e37eceab3e18f1d42a2b39"><div class="ttname"><a href="classHTTPUpdate.html#a97df57ab33e37eceab3e18f1d42a2b39">HTTPUpdate::update</a></div><div class="ttdeci">t_httpUpdate_return update(WiFiClient &amp;client, const String &amp;url, const String &amp;currentVersion=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPUpdate_8cpp_source.html#l00049">HTTPUpdate.cpp:49</a></div></div>
<div class="ttc" id="aclassStreamString_html"><div class="ttname"><a href="classStreamString.html">StreamString</a></div><div class="ttdef"><b>Definition:</b> <a href="StreamString_8h_source.html#l00026">StreamString.h:27</a></div></div>
<div class="ttc" id="aesp32-hal-misc_8c_html_a7f2dfce1046bdd2a2b753643726c2346"><div class="ttname"><a href="esp32-hal-misc_8c.html#a7f2dfce1046bdd2a2b753643726c2346">delay</a></div><div class="ttdeci">void delay(uint32_t ms)</div><div class="ttdef"><b>Definition:</b> <a href="esp32-hal-misc_8c_source.html#l00144">esp32-hal-misc.c:144</a></div></div>
<div class="ttc" id="aclassHTTPClient_html_aa15267cd69b0b03da7f5ccbc3424c04a"><div class="ttname"><a href="classHTTPClient.html#aa15267cd69b0b03da7f5ccbc3424c04a">HTTPClient::getSize</a></div><div class="ttdeci">int getSize(void)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPClient_8cpp_source.html#l00719">HTTPClient.cpp:719</a></div></div>
<div class="ttc" id="astdint_8h_html_a0238af00180b6d9278fa1c6aa790fdf4"><div class="ttname"><a href="stdint_8h.html#a0238af00180b6d9278fa1c6aa790fdf4">uint32_t</a></div><div class="ttdeci">__uint32_t uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="stdint_8h_source.html#l00045">stdint.h:45</a></div></div>
<div class="ttc" id="aUpdate_8h_html_ad5f3fbea36839106464d46011abe2b2c"><div class="ttname"><a href="Update_8h.html#ad5f3fbea36839106464d46011abe2b2c">U_FLASH</a></div><div class="ttdeci">#define U_FLASH</div><div class="ttdef"><b>Definition:</b> <a href="Update_8h_source.html#l00026">Update.h:25</a></div></div>
<div class="ttc" id="aHTTPUpdate_8h_html_aff24cd218d9ada5c10378b1868f2c4b9"><div class="ttname"><a href="HTTPUpdate_8h.html#aff24cd218d9ada5c10378b1868f2c4b9">HTTP_UE_SERVER_NOT_REPORT_SIZE</a></div><div class="ttdeci">#define HTTP_UE_SERVER_NOT_REPORT_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="HTTPUpdate_8h_source.html#l00039">HTTPUpdate.h:38</a></div></div>
<div class="ttc" id="aHTTPClient_8h_html_a53ed6f87c106a4356147444b3ae4c56cae64c13e0696f60544124cba6a00b10c6"><div class="ttname"><a href="HTTPClient_8h.html#a53ed6f87c106a4356147444b3ae4c56cae64c13e0696f60544124cba6a00b10c6">HTTP_CODE_NOT_MODIFIED</a></div><div class="ttdeci">@ HTTP_CODE_NOT_MODIFIED</div><div class="ttdef"><b>Definition:</b> <a href="HTTPClient_8h_source.html#l00074">HTTPClient.h:74</a></div></div>
<div class="ttc" id="aHTTPUpdate_8h_html"><div class="ttname"><a href="HTTPUpdate_8h.html">HTTPUpdate.h</a></div></div>
<div class="ttc" id="aclassHTTPClient_html_a3d732e68ce2dba6bb49ad7bc1dbe1d64"><div class="ttname"><a href="classHTTPClient.html#a3d732e68ce2dba6bb49ad7bc1dbe1d64">HTTPClient::header</a></div><div class="ttdeci">String header(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPClient_8cpp_source.html#l00941">HTTPClient.cpp:941</a></div></div>
<div class="ttc" id="aclassUpdateClass_html_abe822ad7dae6ff298ba76d0e4efe1fb8"><div class="ttname"><a href="classUpdateClass.html#abe822ad7dae6ff298ba76d0e4efe1fb8">UpdateClass::begin</a></div><div class="ttdeci">bool begin(size_t size=UPDATE_SIZE_UNKNOWN, int command=U_FLASH, int ledPin=-1, uint8_t ledOn=LOW)</div><div class="ttdef"><b>Definition:</b> <a href="Updater_8cpp_source.html#l00113">Updater.cpp:113</a></div></div>
<div class="ttc" id="aHTTPUpdate_8h_html_a00cca2ff720cc327c896d4efdca3b49d"><div class="ttname"><a href="HTTPUpdate_8h.html#a00cca2ff720cc327c896d4efdca3b49d">HTTPUpdateResult</a></div><div class="ttdeci">HTTPUpdateResult</div><div class="ttdef"><b>Definition:</b> <a href="HTTPUpdate_8h_source.html#l00047">HTTPUpdate.h:47</a></div></div>
<div class="ttc" id="aesp__ota__ops_8h_html_a6c7acddf42c3ae03cf51f79d74145318"><div class="ttname"><a href="esp__ota__ops_8h.html#a6c7acddf42c3ae03cf51f79d74145318">esp_ota_get_running_partition</a></div><div class="ttdeci">const esp_partition_t * esp_ota_get_running_partition(void)</div><div class="ttdoc">Get partition info of currently running app.</div></div>
<div class="ttc" id="acacheasm_8h_html_a296a4dfa224096b538c66a9bab58cb9e"><div class="ttname"><a href="cacheasm_8h.html#a296a4dfa224096b538c66a9bab58cb9e">size</a></div><div class="ttdeci">macro cache_index_all size</div><div class="ttdef"><b>Definition:</b> <a href="cacheasm_8h_source.html#l00158">cacheasm.h:158</a></div></div>
<div class="ttc" id="atag__strings_8h_html_afa2765f9f647ea2e9c46055f93a44d41"><div class="ttname"><a href="tag__strings_8h.html#afa2765f9f647ea2e9c46055f93a44d41">code</a></div><div class="ttdeci">code</div><div class="ttdef"><b>Definition:</b> <a href="tag__strings_8h_source.html#l00054">tag_strings.h:54</a></div></div>
<div class="ttc" id="aesp32-hal-log_8h_html_a202330fb3201c41b86ad5a4700e529df"><div class="ttname"><a href="esp32-hal-log_8h.html#a202330fb3201c41b86ad5a4700e529df">log_e</a></div><div class="ttdeci">#define log_e(format,...)</div><div class="ttdef"><b>Definition:</b> <a href="esp32-hal-log_8h_source.html#l00117">esp32-hal-log.h:116</a></div></div>
<div class="ttc" id="aHTTPUpdate_8h_html_a8e68e2dbdc3d8e5d8eb48f2ad20d1017"><div class="ttname"><a href="HTTPUpdate_8h.html#a8e68e2dbdc3d8e5d8eb48f2ad20d1017">HTTP_UE_BIN_VERIFY_HEADER_FAILED</a></div><div class="ttdeci">#define HTTP_UE_BIN_VERIFY_HEADER_FAILED</div><div class="ttdef"><b>Definition:</b> <a href="HTTPUpdate_8h_source.html#l00044">HTTPUpdate.h:43</a></div></div>
<div class="ttc" id="astdint_8h_html_a2aff71146ab4942b2b38860c749c4074"><div class="ttname"><a href="stdint_8h.html#a2aff71146ab4942b2b38860c749c4074">uint8_t</a></div><div class="ttdeci">__uint8_t uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="stdint_8h_source.html#l00021">stdint.h:21</a></div></div>
<div class="ttc" id="aHTTPUpdate_8cpp_html_afdb32f3f9a570872f80b3ebf092b07f7"><div class="ttname"><a href="HTTPUpdate_8cpp.html#afdb32f3f9a570872f80b3ebf092b07f7">httpUpdate</a></div><div class="ttdeci">HTTPUpdate httpUpdate</div><div class="ttdef"><b>Definition:</b> <a href="HTTPUpdate_8cpp_source.html#l00416">HTTPUpdate.cpp:416</a></div></div>
<div class="ttc" id="aclassHTTPUpdate_html_a4d162d9773ed7260c4541634912b8990"><div class="ttname"><a href="classHTTPUpdate.html#a4d162d9773ed7260c4541634912b8990">HTTPUpdate::runUpdate</a></div><div class="ttdeci">bool runUpdate(Stream &amp;in, uint32_t size, String md5, int command=U_FLASH)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPUpdate_8cpp_source.html#l00373">HTTPUpdate.cpp:373</a></div></div>
<div class="ttc" id="aesp__partition_8h_html_a1f5be7f3fd4590e6b8c88e27daaf6ac8"><div class="ttname"><a href="esp__partition_8h.html#a1f5be7f3fd4590e6b8c88e27daaf6ac8">esp_partition_get_sha256</a></div><div class="ttdeci">esp_err_t esp_partition_get_sha256(const esp_partition_t *partition, uint8_t *sha_256)</div><div class="ttdoc">Get SHA-256 digest for required partition.</div></div>
<div class="ttc" id="aHTTPUpdate_8h_html_aaf4d054af2c103e3c5219cac28b8a39d"><div class="ttname"><a href="HTTPUpdate_8h.html#aaf4d054af2c103e3c5219cac28b8a39d">HTTP_UE_TOO_LESS_SPACE</a></div><div class="ttdeci">#define HTTP_UE_TOO_LESS_SPACE</div><div class="ttdoc">note we use HTTP client errors too so we start at 100</div><div class="ttdef"><b>Definition:</b> <a href="HTTPUpdate_8h_source.html#l00038">HTTPUpdate.h:37</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
