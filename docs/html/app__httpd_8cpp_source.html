<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>watch 2: components/arduino-esp32/libraries/ESP32/examples/Camera/CameraWebServer/app_httpd.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">watch 2
   </div>
   <div id="projectbrief">Firmwareforwatch2</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_409f97388efe006bc3438b95e9edef48.html">components</a></li><li class="navelem"><a class="el" href="dir_5eb99044ce905dee52e93bf33cea5db4.html">arduino-esp32</a></li><li class="navelem"><a class="el" href="dir_0b98385dcf64e929fcaa5e8c894594ea.html">libraries</a></li><li class="navelem"><a class="el" href="dir_915c8ae63cb118595f7d1a55a47487dd.html">ESP32</a></li><li class="navelem"><a class="el" href="dir_8aa8be960596d6d787922f0af9cca92c.html">examples</a></li><li class="navelem"><a class="el" href="dir_46d810bdd558b0729bb362674968ff19.html">Camera</a></li><li class="navelem"><a class="el" href="dir_016591e0b7efcbf27213088aaed0c261.html">CameraWebServer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">app_httpd.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="app__httpd_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2015-2016 Espressif Systems (Shanghai) PTE LTD</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// you may not use this file except in compliance with the License.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// You may obtain a copy of the License at</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//     http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// See the License for the specific language governing permissions and</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// limitations under the License.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="esp__http__server_8h.html">esp_http_server.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="esp__timer_8h.html">esp_timer.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="esp__camera_8h.html">esp_camera.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="img__converters_8h.html">img_converters.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="camera__index_8h.html">camera_index.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Arduino_8h.html">Arduino.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="fb__gfx_8h.html">fb_gfx.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="fd__forward_8h.html">fd_forward.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="fr__forward_8h.html">fr_forward.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#define ENROLL_CONFIRM_TIMES 5</span></div>
<div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="app__httpd_8cpp.html#a170cfa2e84c67699d42967673b01c6d3">   26</a></span>&#160;<span class="preprocessor">#define FACE_ID_SAVE_NUMBER 7</span></div>
<div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="app__httpd_8cpp.html#ab28c27ee7095c6a3266c0bf7cdd70f4c">   27</a></span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#define FACE_COLOR_WHITE  0x00FFFFFF</span></div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="app__httpd_8cpp.html#a2db88fbbf8fb02d7e84d5a8fa3388e66">   29</a></span>&#160;<span class="preprocessor">#define FACE_COLOR_BLACK  0x00000000</span></div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="app__httpd_8cpp.html#a8ecdb1a837dd7e777eed1654a99547b8">   30</a></span>&#160;<span class="preprocessor">#define FACE_COLOR_RED    0x000000FF</span></div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="app__httpd_8cpp.html#afa6b55a66c5b733e36a480522265fa2c">   31</a></span>&#160;<span class="preprocessor">#define FACE_COLOR_GREEN  0x0000FF00</span></div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="app__httpd_8cpp.html#a75746f07d879f351a0e4f53a0536d3a4">   32</a></span>&#160;<span class="preprocessor">#define FACE_COLOR_BLUE   0x00FF0000</span></div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="app__httpd_8cpp.html#a4008bcea96ef431371b6fdd2ae77dbbf">   33</a></span>&#160;<span class="preprocessor">#define FACE_COLOR_YELLOW (FACE_COLOR_RED | FACE_COLOR_GREEN)</span></div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="app__httpd_8cpp.html#a6e6ff511ff346705d4f5f56380163b7b">   34</a></span>&#160;<span class="preprocessor">#define FACE_COLOR_CYAN   (FACE_COLOR_BLUE | FACE_COLOR_GREEN)</span></div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="app__httpd_8cpp.html#a71471dbc5fc5910306e8d533dcff7b34">   35</a></span>&#160;<span class="preprocessor">#define FACE_COLOR_PURPLE (FACE_COLOR_BLUE | FACE_COLOR_RED)</span></div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="app__httpd_8cpp.html#a4a25c64f5cb36d29d4abcaa343c00135">   36</a></span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="structra__filter__t.html">   37</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="structra__filter__t.html#a532136c12f8d9d7aae3e57727723c66b">   38</a></span>&#160;        <span class="keywordtype">size_t</span> <a class="code" href="structra__filter__t.html#a532136c12f8d9d7aae3e57727723c66b">size</a>; <span class="comment">//number of values used for filtering</span></div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="structra__filter__t.html#a30f745fdcb9c9809c07aa5c9c052d1db">   39</a></span>&#160;        <span class="keywordtype">size_t</span> <a class="code" href="structra__filter__t.html#a30f745fdcb9c9809c07aa5c9c052d1db">index</a>; <span class="comment">//current value index</span></div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="structra__filter__t.html#a52a2c027b178f79de1e7e9bfe6d7da71">   40</a></span>&#160;        <span class="keywordtype">size_t</span> <a class="code" href="structra__filter__t.html#a52a2c027b178f79de1e7e9bfe6d7da71">count</a>; <span class="comment">//value count</span></div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="structra__filter__t.html#a7d4803bb44d3bfd6eb7396e340050063">   41</a></span>&#160;        <span class="keywordtype">int</span> <a class="code" href="structra__filter__t.html#a7d4803bb44d3bfd6eb7396e340050063">sum</a>;</div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="structra__filter__t.html#a113b49800f79f5e75bdcf40d20662891">   42</a></span>&#160;        <span class="keywordtype">int</span> * <a class="code" href="structra__filter__t.html#a113b49800f79f5e75bdcf40d20662891">values</a>; <span class="comment">//array to be filled with values</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;} <a class="code" href="structra__filter__t.html">ra_filter_t</a>;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="structjpg__chunking__t.html">   45</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="structjpg__chunking__t.html#aa6b081bff731346bab0bfed6eddd7e30">   46</a></span>&#160;        <a class="code" href="structhttpd__req.html">httpd_req_t</a> *<a class="code" href="structjpg__chunking__t.html#aa6b081bff731346bab0bfed6eddd7e30">req</a>;</div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="structjpg__chunking__t.html#a95c1a5852d0fb5859f182e89f52e0f06">   47</a></span>&#160;        <span class="keywordtype">size_t</span> <a class="code" href="structjpg__chunking__t.html#a95c1a5852d0fb5859f182e89f52e0f06">len</a>;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;} <a class="code" href="structjpg__chunking__t.html">jpg_chunking_t</a>;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#define PART_BOUNDARY &quot;123456789000000000000987654321&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="app__httpd_8cpp.html#a239c9dd1a6a35545c8b546fd2dc3975b">   51</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* _STREAM_CONTENT_TYPE = <span class="stringliteral">&quot;multipart/x-mixed-replace;boundary=&quot;</span> <a class="code" href="app__httpd_8cpp.html#a239c9dd1a6a35545c8b546fd2dc3975b">PART_BOUNDARY</a>;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* _STREAM_BOUNDARY = <span class="stringliteral">&quot;\r\n--&quot;</span> <a class="code" href="app__httpd_8cpp.html#a239c9dd1a6a35545c8b546fd2dc3975b">PART_BOUNDARY</a> <span class="stringliteral">&quot;\r\n&quot;</span>;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* _STREAM_PART = <span class="stringliteral">&quot;Content-Type: image/jpeg\r\nContent-Length: %u\r\n\r\n&quot;</span>;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="keyword">static</span> <a class="code" href="structra__filter__t.html">ra_filter_t</a> ra_filter;</div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="app__httpd_8cpp.html#aeadb1986dc285585c4d295e7b317d4d0">   56</a></span>&#160;<a class="code" href="esp__http__server_8h.html#a660bc64ded0fb1c7ad498180fc22a7a7">httpd_handle_t</a> <a class="code" href="app__httpd_8cpp.html#aeadb1986dc285585c4d295e7b317d4d0">stream_httpd</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="app__httpd_8cpp.html#a1ef7f093f774940aabc872bc891be564">   57</a></span>&#160;<a class="code" href="esp__http__server_8h.html#a660bc64ded0fb1c7ad498180fc22a7a7">httpd_handle_t</a> <a class="code" href="app__httpd_8cpp.html#a1ef7f093f774940aabc872bc891be564">camera_httpd</a> = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="keyword">static</span> <a class="code" href="structmtmn__config__t.html">mtmn_config_t</a> mtmn_config = {0};</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="keyword">static</span> <a class="code" href="stdint_8h.html#a06ffba8acf5d133104191f183e67ac8c">int8_t</a> detection_enabled = 0;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="keyword">static</span> <a class="code" href="stdint_8h.html#a06ffba8acf5d133104191f183e67ac8c">int8_t</a> recognition_enabled = 0;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="keyword">static</span> <a class="code" href="stdint_8h.html#a06ffba8acf5d133104191f183e67ac8c">int8_t</a> is_enrolling = 0;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="keyword">static</span> <a class="code" href="structface__id__list.html">face_id_list</a> id_list = {0};</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="keyword">static</span> <a class="code" href="structra__filter__t.html">ra_filter_t</a> * ra_filter_init(<a class="code" href="structra__filter__t.html">ra_filter_t</a> * filter, <span class="keywordtype">size_t</span> sample_size){</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    memset(filter, 0, <span class="keyword">sizeof</span>(<a class="code" href="structra__filter__t.html">ra_filter_t</a>));</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    filter-&gt;<a class="code" href="structra__filter__t.html#a113b49800f79f5e75bdcf40d20662891">values</a> = (<span class="keywordtype">int</span> *)<a class="code" href="unity__fixture__malloc__overrides_8h.html#acf143577800376dd931c059ecc61ba06">malloc</a>(sample_size * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">if</span>(!filter-&gt;<a class="code" href="structra__filter__t.html#a113b49800f79f5e75bdcf40d20662891">values</a>){</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    }</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    memset(filter-&gt;<a class="code" href="structra__filter__t.html#a113b49800f79f5e75bdcf40d20662891">values</a>, 0, sample_size * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    filter-&gt;<a class="code" href="structra__filter__t.html#a532136c12f8d9d7aae3e57727723c66b">size</a> = sample_size;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordflow">return</span> filter;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;}</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> ra_filter_run(<a class="code" href="structra__filter__t.html">ra_filter_t</a> * filter, <span class="keywordtype">int</span> <a class="code" href="cJSON__Utils_8h.html#a0dff3c76a075649fa412b1c429ffe382">value</a>){</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">if</span>(!filter-&gt;<a class="code" href="structra__filter__t.html#a113b49800f79f5e75bdcf40d20662891">values</a>){</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="cJSON__Utils_8h.html#a0dff3c76a075649fa412b1c429ffe382">value</a>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    }</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    filter-&gt;<a class="code" href="structra__filter__t.html#a7d4803bb44d3bfd6eb7396e340050063">sum</a> -= filter-&gt;<a class="code" href="structra__filter__t.html#a113b49800f79f5e75bdcf40d20662891">values</a>[filter-&gt;<a class="code" href="structra__filter__t.html#a30f745fdcb9c9809c07aa5c9c052d1db">index</a>];</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    filter-&gt;<a class="code" href="structra__filter__t.html#a113b49800f79f5e75bdcf40d20662891">values</a>[filter-&gt;<a class="code" href="structra__filter__t.html#a30f745fdcb9c9809c07aa5c9c052d1db">index</a>] = <a class="code" href="cJSON__Utils_8h.html#a0dff3c76a075649fa412b1c429ffe382">value</a>;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    filter-&gt;<a class="code" href="structra__filter__t.html#a7d4803bb44d3bfd6eb7396e340050063">sum</a> += filter-&gt;<a class="code" href="structra__filter__t.html#a113b49800f79f5e75bdcf40d20662891">values</a>[filter-&gt;<a class="code" href="structra__filter__t.html#a30f745fdcb9c9809c07aa5c9c052d1db">index</a>];</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    filter-&gt;<a class="code" href="structra__filter__t.html#a30f745fdcb9c9809c07aa5c9c052d1db">index</a>++;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    filter-&gt;<a class="code" href="structra__filter__t.html#a30f745fdcb9c9809c07aa5c9c052d1db">index</a> = filter-&gt;<a class="code" href="structra__filter__t.html#a30f745fdcb9c9809c07aa5c9c052d1db">index</a> % filter-&gt;<a class="code" href="structra__filter__t.html#a532136c12f8d9d7aae3e57727723c66b">size</a>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">if</span> (filter-&gt;<a class="code" href="structra__filter__t.html#a52a2c027b178f79de1e7e9bfe6d7da71">count</a> &lt; filter-&gt;<a class="code" href="structra__filter__t.html#a532136c12f8d9d7aae3e57727723c66b">size</a>) {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        filter-&gt;<a class="code" href="structra__filter__t.html#a52a2c027b178f79de1e7e9bfe6d7da71">count</a>++;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    }</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">return</span> filter-&gt;<a class="code" href="structra__filter__t.html#a7d4803bb44d3bfd6eb7396e340050063">sum</a> / filter-&gt;<a class="code" href="structra__filter__t.html#a52a2c027b178f79de1e7e9bfe6d7da71">count</a>;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;}</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> rgb_print(<a class="code" href="structdl__matrix3du__t.html">dl_matrix3du_t</a> *image_matrix, <a class="code" href="stdint_8h.html#a0238af00180b6d9278fa1c6aa790fdf4">uint32_t</a> color, <span class="keyword">const</span> <span class="keywordtype">char</span> * <a class="code" href="structstr.html">str</a>){</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <a class="code" href="structfb__data__t.html">fb_data_t</a> fb;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    fb.<a class="code" href="structfb__data__t.html#a5540cf63765218e5a6bd49812f21f993">width</a> = image_matrix-&gt;<a class="code" href="structdl__matrix3du__t.html#ae2f610578bd83ca809473e55d8b65ef4">w</a>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    fb.<a class="code" href="structfb__data__t.html#a7c8e25faac19301d251fec141b0bf7eb">height</a> = image_matrix-&gt;<a class="code" href="structdl__matrix3du__t.html#ac0de84feb578bd57356617e553017988">h</a>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    fb.<a class="code" href="structfb__data__t.html#ad7ec5df83b0142e1a1b59449c3baeced">data</a> = image_matrix-&gt;<a class="code" href="structdl__matrix3du__t.html#a5abbe164b8de24c82d3f9462f677fa6c">item</a>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    fb.<a class="code" href="structfb__data__t.html#a32bfa23bbd3f6a6e886d5c2c2840e270">bytes_per_pixel</a> = 3;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    fb.<a class="code" href="structfb__data__t.html#adf4e84b5efeb87f4bfeeff2fadb9ca52">format</a> = <a class="code" href="fb__gfx_8h.html#a394706dc706d4059b70d5b19cffd7853a56d8be83a128c86028ffc3b72ab63e72">FB_BGR888</a>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="fb__gfx_8h.html#a4fe7e25d4fda5d18811c9b48cef02f52">fb_gfx_print</a>(&amp;fb, (fb.<a class="code" href="structfb__data__t.html#a5540cf63765218e5a6bd49812f21f993">width</a> - (strlen(<a class="code" href="structstr.html">str</a>) * 14)) / 2, 10, color, <a class="code" href="structstr.html">str</a>);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;}</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> rgb_printf(<a class="code" href="structdl__matrix3du__t.html">dl_matrix3du_t</a> *image_matrix, <a class="code" href="stdint_8h.html#a0238af00180b6d9278fa1c6aa790fdf4">uint32_t</a> color, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="cJSON_8h.html#adb411a44855a4c49231d72a0fc9a3b3b">format</a>, ...){</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordtype">char</span> loc_buf[64];</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordtype">char</span> * <a class="code" href="BLEEddystoneTLM_8h.html#a36142ddde297ed1d5577c81230997301">temp</a> = loc_buf;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordtype">int</span> len;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    va_list arg;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    va_list <a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a0ff3051eb9cb79426196331363674fa7">copy</a>;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    va_start(arg, <a class="code" href="cJSON_8h.html#adb411a44855a4c49231d72a0fc9a3b3b">format</a>);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    va_copy(<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a0ff3051eb9cb79426196331363674fa7">copy</a>, arg);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    len = vsnprintf(loc_buf, <span class="keyword">sizeof</span>(loc_buf), <a class="code" href="cJSON_8h.html#adb411a44855a4c49231d72a0fc9a3b3b">format</a>, arg);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    va_end(<a class="code" href="Arduino-IRremote_2LICENSE_8txt.html#a0ff3051eb9cb79426196331363674fa7">copy</a>);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">if</span>(len &gt;= <span class="keyword">sizeof</span>(loc_buf)){</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <a class="code" href="BLEEddystoneTLM_8h.html#a36142ddde297ed1d5577c81230997301">temp</a> = (<span class="keywordtype">char</span>*)<a class="code" href="unity__fixture__malloc__overrides_8h.html#acf143577800376dd931c059ecc61ba06">malloc</a>(len+1);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="BLEEddystoneTLM_8h.html#a36142ddde297ed1d5577c81230997301">temp</a> == <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    }</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    vsnprintf(<a class="code" href="BLEEddystoneTLM_8h.html#a36142ddde297ed1d5577c81230997301">temp</a>, len+1, <a class="code" href="cJSON_8h.html#adb411a44855a4c49231d72a0fc9a3b3b">format</a>, arg);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    va_end(arg);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    rgb_print(image_matrix, color, <a class="code" href="BLEEddystoneTLM_8h.html#a36142ddde297ed1d5577c81230997301">temp</a>);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">if</span>(len &gt; 64){</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(<a class="code" href="BLEEddystoneTLM_8h.html#a36142ddde297ed1d5577c81230997301">temp</a>);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">return</span> len;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;}</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> draw_face_boxes(<a class="code" href="structdl__matrix3du__t.html">dl_matrix3du_t</a> *image_matrix, <a class="code" href="structtag__box__list.html">box_array_t</a> *boxes, <span class="keywordtype">int</span> face_id){</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordtype">int</span> x, y, w, h, <a class="code" href="zconf_8lex_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <a class="code" href="stdint_8h.html#a0238af00180b6d9278fa1c6aa790fdf4">uint32_t</a> color = <a class="code" href="app__httpd_8cpp.html#a6e6ff511ff346705d4f5f56380163b7b">FACE_COLOR_YELLOW</a>;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordflow">if</span>(face_id &lt; 0){</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        color = <a class="code" href="app__httpd_8cpp.html#afa6b55a66c5b733e36a480522265fa2c">FACE_COLOR_RED</a>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(face_id &gt; 0){</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        color = <a class="code" href="app__httpd_8cpp.html#a75746f07d879f351a0e4f53a0536d3a4">FACE_COLOR_GREEN</a>;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    }</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <a class="code" href="structfb__data__t.html">fb_data_t</a> fb;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    fb.<a class="code" href="structfb__data__t.html#a5540cf63765218e5a6bd49812f21f993">width</a> = image_matrix-&gt;<a class="code" href="structdl__matrix3du__t.html#ae2f610578bd83ca809473e55d8b65ef4">w</a>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    fb.<a class="code" href="structfb__data__t.html#a7c8e25faac19301d251fec141b0bf7eb">height</a> = image_matrix-&gt;<a class="code" href="structdl__matrix3du__t.html#ac0de84feb578bd57356617e553017988">h</a>;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    fb.<a class="code" href="structfb__data__t.html#ad7ec5df83b0142e1a1b59449c3baeced">data</a> = image_matrix-&gt;<a class="code" href="structdl__matrix3du__t.html#a5abbe164b8de24c82d3f9462f677fa6c">item</a>;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    fb.<a class="code" href="structfb__data__t.html#a32bfa23bbd3f6a6e886d5c2c2840e270">bytes_per_pixel</a> = 3;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    fb.<a class="code" href="structfb__data__t.html#adf4e84b5efeb87f4bfeeff2fadb9ca52">format</a> = <a class="code" href="fb__gfx_8h.html#a394706dc706d4059b70d5b19cffd7853a56d8be83a128c86028ffc3b72ab63e72">FB_BGR888</a>;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="zconf_8lex_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="zconf_8lex_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; boxes-&gt;<a class="code" href="structtag__box__list.html#a74a848a667470ddc91b38a25dad84492">len</a>; <a class="code" href="zconf_8lex_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++){</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="comment">// rectangle box</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        x = (int)boxes-&gt;<a class="code" href="structtag__box__list.html#a4e437a34b8cdb3a691ffbe5a394aec19">box</a>[<a class="code" href="zconf_8lex_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="structbox__t.html#a5459c2b4c6f6ac2c8a712981931737c8">box_p</a>[0];</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        y = (<span class="keywordtype">int</span>)boxes-&gt;<a class="code" href="structtag__box__list.html#a4e437a34b8cdb3a691ffbe5a394aec19">box</a>[<a class="code" href="zconf_8lex_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="structbox__t.html#a5459c2b4c6f6ac2c8a712981931737c8">box_p</a>[1];</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        w = (int)boxes-&gt;<a class="code" href="structtag__box__list.html#a4e437a34b8cdb3a691ffbe5a394aec19">box</a>[<a class="code" href="zconf_8lex_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="structbox__t.html#a5459c2b4c6f6ac2c8a712981931737c8">box_p</a>[2] - x + 1;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        h = (<span class="keywordtype">int</span>)boxes-&gt;<a class="code" href="structtag__box__list.html#a4e437a34b8cdb3a691ffbe5a394aec19">box</a>[<a class="code" href="zconf_8lex_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="structbox__t.html#a5459c2b4c6f6ac2c8a712981931737c8">box_p</a>[3] - y + 1;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <a class="code" href="fb__gfx_8h.html#aaa18d2b1ec4d3a8865fa34940b2ec1b0">fb_gfx_drawFastHLine</a>(&amp;fb, x, y, w, color);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <a class="code" href="fb__gfx_8h.html#aaa18d2b1ec4d3a8865fa34940b2ec1b0">fb_gfx_drawFastHLine</a>(&amp;fb, x, y+h-1, w, color);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <a class="code" href="fb__gfx_8h.html#a3fdff720dece105de6f1f8fe741ce13b">fb_gfx_drawFastVLine</a>(&amp;fb, x, y, h, color);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <a class="code" href="fb__gfx_8h.html#a3fdff720dece105de6f1f8fe741ce13b">fb_gfx_drawFastVLine</a>(&amp;fb, x+w-1, y, h, color);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="comment">// landmark</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keywordtype">int</span> x0, y0, j;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; 10; j+=2) {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            x0 = (int)boxes-&gt;<a class="code" href="structtag__box__list.html#a57e231efbf6860f68aa4771c979209a5">landmark</a>[<a class="code" href="zconf_8lex_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="structlandmark__t.html#af91b341f70509d409d169435cf4511b6">landmark_p</a>[j];</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            y0 = (<span class="keywordtype">int</span>)boxes-&gt;<a class="code" href="structtag__box__list.html#a57e231efbf6860f68aa4771c979209a5">landmark</a>[<a class="code" href="zconf_8lex_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="structlandmark__t.html#af91b341f70509d409d169435cf4511b6">landmark_p</a>[j+1];</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <a class="code" href="fb__gfx_8h.html#af97a81e437d251e9648e3f9595cdb801">fb_gfx_fillRect</a>(&amp;fb, x0, y0, 3, 3, color);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;}</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> run_face_recognition(<a class="code" href="structdl__matrix3du__t.html">dl_matrix3du_t</a> *image_matrix, <a class="code" href="structtag__box__list.html">box_array_t</a> *net_boxes){</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <a class="code" href="structdl__matrix3du__t.html">dl_matrix3du_t</a> *aligned_face = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordtype">int</span> matched_id = 0;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    aligned_face = dl_matrix3du_alloc(1, <a class="code" href="fr__forward_8h.html#a1aaf4002f77b5308e94b18468fe17df1">FACE_WIDTH</a>, <a class="code" href="fr__forward_8h.html#af8604502b9c2b373b8c053effd261de8">FACE_HEIGHT</a>, 3);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">if</span>(!aligned_face){</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <a class="code" href="HardwareSerial_8cpp.html#a6486f9b363134cf53e917447a063ac0c">Serial</a>.<a class="code" href="classPrint.html#a4fd286b325d3b1a786cfa35072a8ef52">println</a>(<span class="stringliteral">&quot;Could not allocate face recognition buffer&quot;</span>);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keywordflow">return</span> matched_id;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="fr__forward_8h.html#a75e0311e61ee390e15a4c3bd4766035a">align_face</a>(net_boxes, image_matrix, aligned_face) == <a class="code" href="esp__err_8h.html#abdbffa06442bc1fe3d65dbb8d17656d1">ESP_OK</a>){</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordflow">if</span> (is_enrolling == 1){</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            <a class="code" href="stdint_8h.html#a06ffba8acf5d133104191f183e67ac8c">int8_t</a> left_sample_face = <a class="code" href="fr__forward_8h.html#a2d9c6be0f6bb06094d03019da23542c1">enroll_face</a>(&amp;id_list, aligned_face);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            <span class="keywordflow">if</span>(left_sample_face == (<a class="code" href="app__httpd_8cpp.html#a170cfa2e84c67699d42967673b01c6d3">ENROLL_CONFIRM_TIMES</a> - 1)){</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                <a class="code" href="HardwareSerial_8cpp.html#a6486f9b363134cf53e917447a063ac0c">Serial</a>.<a class="code" href="classPrint.html#aeaa1520ee061ba4206c28cb550e6bf44">printf</a>(<span class="stringliteral">&quot;Enrolling Face ID: %d\n&quot;</span>, id_list.<a class="code" href="structface__id__list.html#ab0e672cfe36ae0c4f6625ff062a4ab58">tail</a>);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            <a class="code" href="HardwareSerial_8cpp.html#a6486f9b363134cf53e917447a063ac0c">Serial</a>.<a class="code" href="classPrint.html#aeaa1520ee061ba4206c28cb550e6bf44">printf</a>(<span class="stringliteral">&quot;Enrolling Face ID: %d sample %d\n&quot;</span>, id_list.<a class="code" href="structface__id__list.html#ab0e672cfe36ae0c4f6625ff062a4ab58">tail</a>, <a class="code" href="app__httpd_8cpp.html#a170cfa2e84c67699d42967673b01c6d3">ENROLL_CONFIRM_TIMES</a> - left_sample_face);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            rgb_printf(image_matrix, <a class="code" href="app__httpd_8cpp.html#a71471dbc5fc5910306e8d533dcff7b34">FACE_COLOR_CYAN</a>, <span class="stringliteral">&quot;ID[%u] Sample[%u]&quot;</span>, id_list.<a class="code" href="structface__id__list.html#ab0e672cfe36ae0c4f6625ff062a4ab58">tail</a>, <a class="code" href="app__httpd_8cpp.html#a170cfa2e84c67699d42967673b01c6d3">ENROLL_CONFIRM_TIMES</a> - left_sample_face);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            <span class="keywordflow">if</span> (left_sample_face == 0){</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                is_enrolling = 0;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                <a class="code" href="HardwareSerial_8cpp.html#a6486f9b363134cf53e917447a063ac0c">Serial</a>.<a class="code" href="classPrint.html#aeaa1520ee061ba4206c28cb550e6bf44">printf</a>(<span class="stringliteral">&quot;Enrolled Face ID: %d\n&quot;</span>, id_list.<a class="code" href="structface__id__list.html#ab0e672cfe36ae0c4f6625ff062a4ab58">tail</a>);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            matched_id = <a class="code" href="fr__forward_8h.html#a0bd86a87f2f5966229b861a341124cd6">recognize_face</a>(&amp;id_list, aligned_face);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            <span class="keywordflow">if</span> (matched_id &gt;= 0) {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                <a class="code" href="HardwareSerial_8cpp.html#a6486f9b363134cf53e917447a063ac0c">Serial</a>.<a class="code" href="classPrint.html#aeaa1520ee061ba4206c28cb550e6bf44">printf</a>(<span class="stringliteral">&quot;Match Face ID: %u\n&quot;</span>, matched_id);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                rgb_printf(image_matrix, <a class="code" href="app__httpd_8cpp.html#a75746f07d879f351a0e4f53a0536d3a4">FACE_COLOR_GREEN</a>, <span class="stringliteral">&quot;Hello Subject %u&quot;</span>, matched_id);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                <a class="code" href="HardwareSerial_8cpp.html#a6486f9b363134cf53e917447a063ac0c">Serial</a>.<a class="code" href="classPrint.html#a4fd286b325d3b1a786cfa35072a8ef52">println</a>(<span class="stringliteral">&quot;No Match Found&quot;</span>);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                rgb_print(image_matrix, <a class="code" href="app__httpd_8cpp.html#afa6b55a66c5b733e36a480522265fa2c">FACE_COLOR_RED</a>, <span class="stringliteral">&quot;Intruder Alert!&quot;</span>);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                matched_id = -1;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <a class="code" href="HardwareSerial_8cpp.html#a6486f9b363134cf53e917447a063ac0c">Serial</a>.<a class="code" href="classPrint.html#a4fd286b325d3b1a786cfa35072a8ef52">println</a>(<span class="stringliteral">&quot;Face Not Aligned&quot;</span>);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="comment">//rgb_print(image_matrix, FACE_COLOR_YELLOW, &quot;Human Detected&quot;);</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    }</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    dl_matrix3du_free(aligned_face);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">return</span> matched_id;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;}</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> jpg_encode_stream(<span class="keywordtype">void</span> * arg, <span class="keywordtype">size_t</span> <a class="code" href="cJSON_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, <span class="keyword">const</span> <span class="keywordtype">void</span>* <a class="code" href="namespaceudp__server.html#ade67d79c46c11d44cd799213c5a772ca">data</a>, <span class="keywordtype">size_t</span> len){</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <a class="code" href="structjpg__chunking__t.html">jpg_chunking_t</a> *j = (<a class="code" href="structjpg__chunking__t.html">jpg_chunking_t</a> *)arg;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="cJSON_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>){</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        j-&gt;<a class="code" href="structjpg__chunking__t.html#a95c1a5852d0fb5859f182e89f52e0f06">len</a> = 0;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="esp__http__server_8h.html#a4c6e0465b3c09f5a997043b46ec99186">httpd_resp_send_chunk</a>(j-&gt;<a class="code" href="structjpg__chunking__t.html#aa6b081bff731346bab0bfed6eddd7e30">req</a>, (<span class="keyword">const</span> <span class="keywordtype">char</span> *)<a class="code" href="namespaceudp__server.html#ade67d79c46c11d44cd799213c5a772ca">data</a>, len) != <a class="code" href="esp__err_8h.html#abdbffa06442bc1fe3d65dbb8d17656d1">ESP_OK</a>){</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    }</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    j-&gt;<a class="code" href="structjpg__chunking__t.html#a95c1a5852d0fb5859f182e89f52e0f06">len</a> += len;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">return</span> len;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;}</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="keyword">static</span> <a class="code" href="esp__err_8h.html#ae535f6066003e82408b58e12f6950868">esp_err_t</a> capture_handler(<a class="code" href="structhttpd__req.html">httpd_req_t</a> *req){</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <a class="code" href="structcamera__fb__t.html">camera_fb_t</a> * fb = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <a class="code" href="esp__err_8h.html#ae535f6066003e82408b58e12f6950868">esp_err_t</a> res = <a class="code" href="esp__err_8h.html#abdbffa06442bc1fe3d65dbb8d17656d1">ESP_OK</a>;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <a class="code" href="stdint_8h.html#a96411d49619f50e635418ee57651b95d">int64_t</a> fr_start = <a class="code" href="esp__timer_8h.html#ad06d49f60aa7a28faead62981faa2370">esp_timer_get_time</a>();</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    fb = <a class="code" href="esp__camera_8h.html#ae3dba4491c2295a649f02566bf0bf547">esp_camera_fb_get</a>();</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">if</span> (!fb) {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <a class="code" href="HardwareSerial_8cpp.html#a6486f9b363134cf53e917447a063ac0c">Serial</a>.<a class="code" href="classPrint.html#a4fd286b325d3b1a786cfa35072a8ef52">println</a>(<span class="stringliteral">&quot;Camera capture failed&quot;</span>);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        httpd_resp_send_500(req);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="esp__err_8h.html#a3792b0d09c0170e4a3b5bb9b6f6fa72b">ESP_FAIL</a>;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <a class="code" href="esp__http__server_8h.html#afe6f7650c67454ccbe85bb470f166de2">httpd_resp_set_type</a>(req, <span class="stringliteral">&quot;image/jpeg&quot;</span>);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <a class="code" href="esp__http__server_8h.html#af9fe08829da872bed237cb17b577b1bb">httpd_resp_set_hdr</a>(req, <span class="stringliteral">&quot;Content-Disposition&quot;</span>, <span class="stringliteral">&quot;inline; filename=capture.jpg&quot;</span>);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <a class="code" href="esp__http__server_8h.html#af9fe08829da872bed237cb17b577b1bb">httpd_resp_set_hdr</a>(req, <span class="stringliteral">&quot;Access-Control-Allow-Origin&quot;</span>, <span class="stringliteral">&quot;*&quot;</span>);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordtype">size_t</span> out_len, out_width, out_height;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <a class="code" href="stdint_8h.html#a2aff71146ab4942b2b38860c749c4074">uint8_t</a> * out_buf;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordtype">bool</span> detected = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordtype">int</span> face_id = 0;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">if</span>(!detection_enabled || fb-&gt;<a class="code" href="structcamera__fb__t.html#a1566e3abab5198e6204e6aa2a0184d58">width</a> &gt; 400){</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keywordtype">size_t</span> fb_len = 0;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="keywordflow">if</span>(fb-&gt;<a class="code" href="structcamera__fb__t.html#abbb7740812781c9166938c037124f348">format</a> == <a class="code" href="sensor_8h.html#a3390f04bc7e74f40fe645c69177ce34cae89138c0356c2d13564556ca339489bd">PIXFORMAT_JPEG</a>){</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            fb_len = fb-&gt;<a class="code" href="structcamera__fb__t.html#a35665a966e2547144e5a05be882af6f5">len</a>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            res = <a class="code" href="esp__http__server_8h.html#a67aa037d44f178a47f3fadca5ac34c1a">httpd_resp_send</a>(req, (<span class="keyword">const</span> <span class="keywordtype">char</span> *)fb-&gt;<a class="code" href="structcamera__fb__t.html#ab981c458342c57459bec8ac80a01871b">buf</a>, fb-&gt;<a class="code" href="structcamera__fb__t.html#a35665a966e2547144e5a05be882af6f5">len</a>);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            <a class="code" href="structjpg__chunking__t.html">jpg_chunking_t</a> jchunk = {req, 0};</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            res = <a class="code" href="img__converters_8h.html#a97adf86e01030cfdf3a21e788e357b66">frame2jpg_cb</a>(fb, 80, jpg_encode_stream, &amp;jchunk)?<a class="code" href="esp__err_8h.html#abdbffa06442bc1fe3d65dbb8d17656d1">ESP_OK</a>:<a class="code" href="esp__err_8h.html#a3792b0d09c0170e4a3b5bb9b6f6fa72b">ESP_FAIL</a>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <a class="code" href="esp__http__server_8h.html#a4c6e0465b3c09f5a997043b46ec99186">httpd_resp_send_chunk</a>(req, <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            fb_len = jchunk.<a class="code" href="structjpg__chunking__t.html#a95c1a5852d0fb5859f182e89f52e0f06">len</a>;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <a class="code" href="esp__camera_8h.html#adc988b687b20d3caa8ec0d95649de3d0">esp_camera_fb_return</a>(fb);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <a class="code" href="stdint_8h.html#a96411d49619f50e635418ee57651b95d">int64_t</a> fr_end = <a class="code" href="esp__timer_8h.html#ad06d49f60aa7a28faead62981faa2370">esp_timer_get_time</a>();</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <a class="code" href="HardwareSerial_8cpp.html#a6486f9b363134cf53e917447a063ac0c">Serial</a>.<a class="code" href="classPrint.html#aeaa1520ee061ba4206c28cb550e6bf44">printf</a>(<span class="stringliteral">&quot;JPG: %uB %ums\n&quot;</span>, (<a class="code" href="stdint_8h.html#a0238af00180b6d9278fa1c6aa790fdf4">uint32_t</a>)(fb_len), (<a class="code" href="stdint_8h.html#a0238af00180b6d9278fa1c6aa790fdf4">uint32_t</a>)((fr_end - fr_start)/1000));</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <a class="code" href="structdl__matrix3du__t.html">dl_matrix3du_t</a> *image_matrix = dl_matrix3du_alloc(1, fb-&gt;<a class="code" href="structcamera__fb__t.html#a1566e3abab5198e6204e6aa2a0184d58">width</a>, fb-&gt;<a class="code" href="structcamera__fb__t.html#a848537e7778745c568897348afb48d0e">height</a>, 3);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">if</span> (!image_matrix) {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <a class="code" href="esp__camera_8h.html#adc988b687b20d3caa8ec0d95649de3d0">esp_camera_fb_return</a>(fb);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <a class="code" href="HardwareSerial_8cpp.html#a6486f9b363134cf53e917447a063ac0c">Serial</a>.<a class="code" href="classPrint.html#a4fd286b325d3b1a786cfa35072a8ef52">println</a>(<span class="stringliteral">&quot;dl_matrix3du_alloc failed&quot;</span>);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        httpd_resp_send_500(req);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="esp__err_8h.html#a3792b0d09c0170e4a3b5bb9b6f6fa72b">ESP_FAIL</a>;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    out_buf = image_matrix-&gt;<a class="code" href="structdl__matrix3du__t.html#a5abbe164b8de24c82d3f9462f677fa6c">item</a>;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    out_len = fb-&gt;<a class="code" href="structcamera__fb__t.html#a1566e3abab5198e6204e6aa2a0184d58">width</a> * fb-&gt;<a class="code" href="structcamera__fb__t.html#a848537e7778745c568897348afb48d0e">height</a> * 3;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    out_width = fb-&gt;<a class="code" href="structcamera__fb__t.html#a1566e3abab5198e6204e6aa2a0184d58">width</a>;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    out_height = fb-&gt;<a class="code" href="structcamera__fb__t.html#a848537e7778745c568897348afb48d0e">height</a>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a> = <a class="code" href="img__converters_8h.html#ab73f1dfbadc0dd7a0c00f0660db99bcd">fmt2rgb888</a>(fb-&gt;<a class="code" href="structcamera__fb__t.html#ab981c458342c57459bec8ac80a01871b">buf</a>, fb-&gt;<a class="code" href="structcamera__fb__t.html#a35665a966e2547144e5a05be882af6f5">len</a>, fb-&gt;<a class="code" href="structcamera__fb__t.html#abbb7740812781c9166938c037124f348">format</a>, out_buf);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <a class="code" href="esp__camera_8h.html#adc988b687b20d3caa8ec0d95649de3d0">esp_camera_fb_return</a>(fb);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>){</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        dl_matrix3du_free(image_matrix);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <a class="code" href="HardwareSerial_8cpp.html#a6486f9b363134cf53e917447a063ac0c">Serial</a>.<a class="code" href="classPrint.html#a4fd286b325d3b1a786cfa35072a8ef52">println</a>(<span class="stringliteral">&quot;to rgb888 failed&quot;</span>);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        httpd_resp_send_500(req);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="esp__err_8h.html#a3792b0d09c0170e4a3b5bb9b6f6fa72b">ESP_FAIL</a>;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <a class="code" href="structtag__box__list.html">box_array_t</a> *net_boxes = <a class="code" href="fd__forward_8h.html#a4a6259b5a5f0b3437b26727784628f4e">face_detect</a>(image_matrix, &amp;mtmn_config);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">if</span> (net_boxes){</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        detected = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="keywordflow">if</span>(recognition_enabled){</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            face_id = run_face_recognition(image_matrix, net_boxes);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        draw_face_boxes(image_matrix, net_boxes, face_id);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(net_boxes-&gt;<a class="code" href="structtag__box__list.html#a998af69f8cb372b1d7cc278825b529b2">score</a>);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(net_boxes-&gt;<a class="code" href="structtag__box__list.html#a4e437a34b8cdb3a691ffbe5a394aec19">box</a>);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(net_boxes-&gt;<a class="code" href="structtag__box__list.html#a57e231efbf6860f68aa4771c979209a5">landmark</a>);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(net_boxes);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    }</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <a class="code" href="structjpg__chunking__t.html">jpg_chunking_t</a> jchunk = {req, 0};</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a> = <a class="code" href="img__converters_8h.html#a62b6b9331025ccb1659ac08901d0e26a">fmt2jpg_cb</a>(out_buf, out_len, out_width, out_height, <a class="code" href="sensor_8h.html#a3390f04bc7e74f40fe645c69177ce34ca1c692246162255f93e4c3c40961294fc">PIXFORMAT_RGB888</a>, 90, jpg_encode_stream, &amp;jchunk);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    dl_matrix3du_free(image_matrix);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>){</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <a class="code" href="HardwareSerial_8cpp.html#a6486f9b363134cf53e917447a063ac0c">Serial</a>.<a class="code" href="classPrint.html#a4fd286b325d3b1a786cfa35072a8ef52">println</a>(<span class="stringliteral">&quot;JPEG compression failed&quot;</span>);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="esp__err_8h.html#a3792b0d09c0170e4a3b5bb9b6f6fa72b">ESP_FAIL</a>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <a class="code" href="stdint_8h.html#a96411d49619f50e635418ee57651b95d">int64_t</a> fr_end = <a class="code" href="esp__timer_8h.html#ad06d49f60aa7a28faead62981faa2370">esp_timer_get_time</a>();</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <a class="code" href="HardwareSerial_8cpp.html#a6486f9b363134cf53e917447a063ac0c">Serial</a>.<a class="code" href="classPrint.html#aeaa1520ee061ba4206c28cb550e6bf44">printf</a>(<span class="stringliteral">&quot;FACE: %uB %ums %s%d\n&quot;</span>, (<a class="code" href="stdint_8h.html#a0238af00180b6d9278fa1c6aa790fdf4">uint32_t</a>)(jchunk.<a class="code" href="structjpg__chunking__t.html#a95c1a5852d0fb5859f182e89f52e0f06">len</a>), (<a class="code" href="stdint_8h.html#a0238af00180b6d9278fa1c6aa790fdf4">uint32_t</a>)((fr_end - fr_start)/1000), detected?<span class="stringliteral">&quot;DETECTED &quot;</span>:<span class="stringliteral">&quot;&quot;</span>, face_id);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;}</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="keyword">static</span> <a class="code" href="esp__err_8h.html#ae535f6066003e82408b58e12f6950868">esp_err_t</a> stream_handler(<a class="code" href="structhttpd__req.html">httpd_req_t</a> *req){</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="structcamera__fb__t.html">camera_fb_t</a> * fb = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <a class="code" href="esp__err_8h.html#ae535f6066003e82408b58e12f6950868">esp_err_t</a> res = <a class="code" href="esp__err_8h.html#abdbffa06442bc1fe3d65dbb8d17656d1">ESP_OK</a>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordtype">size_t</span> _jpg_buf_len = 0;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <a class="code" href="stdint_8h.html#a2aff71146ab4942b2b38860c749c4074">uint8_t</a> * _jpg_buf = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordtype">char</span> * part_buf[64];</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="structdl__matrix3du__t.html">dl_matrix3du_t</a> *image_matrix = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordtype">bool</span> detected = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordtype">int</span> face_id = 0;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <a class="code" href="stdint_8h.html#a96411d49619f50e635418ee57651b95d">int64_t</a> fr_start = 0;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <a class="code" href="stdint_8h.html#a96411d49619f50e635418ee57651b95d">int64_t</a> fr_ready = 0;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <a class="code" href="stdint_8h.html#a96411d49619f50e635418ee57651b95d">int64_t</a> fr_face = 0;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <a class="code" href="stdint_8h.html#a96411d49619f50e635418ee57651b95d">int64_t</a> fr_recognize = 0;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <a class="code" href="stdint_8h.html#a96411d49619f50e635418ee57651b95d">int64_t</a> fr_encode = 0;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keyword">static</span> <a class="code" href="stdint_8h.html#a96411d49619f50e635418ee57651b95d">int64_t</a> last_frame = 0;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">if</span>(!last_frame) {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        last_frame = <a class="code" href="esp__timer_8h.html#ad06d49f60aa7a28faead62981faa2370">esp_timer_get_time</a>();</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    res = <a class="code" href="esp__http__server_8h.html#afe6f7650c67454ccbe85bb470f166de2">httpd_resp_set_type</a>(req, _STREAM_CONTENT_TYPE);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordflow">if</span>(res != <a class="code" href="esp__err_8h.html#abdbffa06442bc1fe3d65dbb8d17656d1">ESP_OK</a>){</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <a class="code" href="esp__http__server_8h.html#af9fe08829da872bed237cb17b577b1bb">httpd_resp_set_hdr</a>(req, <span class="stringliteral">&quot;Access-Control-Allow-Origin&quot;</span>, <span class="stringliteral">&quot;*&quot;</span>);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordflow">while</span>(<span class="keyword">true</span>){</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        detected = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        face_id = 0;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        fb = <a class="code" href="esp__camera_8h.html#ae3dba4491c2295a649f02566bf0bf547">esp_camera_fb_get</a>();</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="keywordflow">if</span> (!fb) {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            <a class="code" href="HardwareSerial_8cpp.html#a6486f9b363134cf53e917447a063ac0c">Serial</a>.<a class="code" href="classPrint.html#a4fd286b325d3b1a786cfa35072a8ef52">println</a>(<span class="stringliteral">&quot;Camera capture failed&quot;</span>);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            res = <a class="code" href="esp__err_8h.html#a3792b0d09c0170e4a3b5bb9b6f6fa72b">ESP_FAIL</a>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            fr_start = <a class="code" href="esp__timer_8h.html#ad06d49f60aa7a28faead62981faa2370">esp_timer_get_time</a>();</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            fr_ready = fr_start;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            fr_face = fr_start;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            fr_encode = fr_start;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            fr_recognize = fr_start;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            <span class="keywordflow">if</span>(!detection_enabled || fb-&gt;<a class="code" href="structcamera__fb__t.html#a1566e3abab5198e6204e6aa2a0184d58">width</a> &gt; 400){</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                <span class="keywordflow">if</span>(fb-&gt;<a class="code" href="structcamera__fb__t.html#abbb7740812781c9166938c037124f348">format</a> != <a class="code" href="sensor_8h.html#a3390f04bc7e74f40fe645c69177ce34cae89138c0356c2d13564556ca339489bd">PIXFORMAT_JPEG</a>){</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                    <span class="keywordtype">bool</span> jpeg_converted = <a class="code" href="img__converters_8h.html#a16e5406dfff3cb636aaa8ce8eb25ec9a">frame2jpg</a>(fb, 80, &amp;_jpg_buf, &amp;_jpg_buf_len);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                    <a class="code" href="esp__camera_8h.html#adc988b687b20d3caa8ec0d95649de3d0">esp_camera_fb_return</a>(fb);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                    fb = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                    <span class="keywordflow">if</span>(!jpeg_converted){</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                        <a class="code" href="HardwareSerial_8cpp.html#a6486f9b363134cf53e917447a063ac0c">Serial</a>.<a class="code" href="classPrint.html#a4fd286b325d3b1a786cfa35072a8ef52">println</a>(<span class="stringliteral">&quot;JPEG compression failed&quot;</span>);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                        res = <a class="code" href="esp__err_8h.html#a3792b0d09c0170e4a3b5bb9b6f6fa72b">ESP_FAIL</a>;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                    }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                    _jpg_buf_len = fb-&gt;<a class="code" href="structcamera__fb__t.html#a35665a966e2547144e5a05be882af6f5">len</a>;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                    _jpg_buf = fb-&gt;<a class="code" href="structcamera__fb__t.html#ab981c458342c57459bec8ac80a01871b">buf</a>;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                }</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                image_matrix = dl_matrix3du_alloc(1, fb-&gt;<a class="code" href="structcamera__fb__t.html#a1566e3abab5198e6204e6aa2a0184d58">width</a>, fb-&gt;<a class="code" href="structcamera__fb__t.html#a848537e7778745c568897348afb48d0e">height</a>, 3);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                <span class="keywordflow">if</span> (!image_matrix) {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                    <a class="code" href="HardwareSerial_8cpp.html#a6486f9b363134cf53e917447a063ac0c">Serial</a>.<a class="code" href="classPrint.html#a4fd286b325d3b1a786cfa35072a8ef52">println</a>(<span class="stringliteral">&quot;dl_matrix3du_alloc failed&quot;</span>);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                    res = <a class="code" href="esp__err_8h.html#a3792b0d09c0170e4a3b5bb9b6f6fa72b">ESP_FAIL</a>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                    <span class="keywordflow">if</span>(!<a class="code" href="img__converters_8h.html#ab73f1dfbadc0dd7a0c00f0660db99bcd">fmt2rgb888</a>(fb-&gt;<a class="code" href="structcamera__fb__t.html#ab981c458342c57459bec8ac80a01871b">buf</a>, fb-&gt;<a class="code" href="structcamera__fb__t.html#a35665a966e2547144e5a05be882af6f5">len</a>, fb-&gt;<a class="code" href="structcamera__fb__t.html#abbb7740812781c9166938c037124f348">format</a>, image_matrix-&gt;<a class="code" href="structdl__matrix3du__t.html#a5abbe164b8de24c82d3f9462f677fa6c">item</a>)){</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                        <a class="code" href="HardwareSerial_8cpp.html#a6486f9b363134cf53e917447a063ac0c">Serial</a>.<a class="code" href="classPrint.html#a4fd286b325d3b1a786cfa35072a8ef52">println</a>(<span class="stringliteral">&quot;fmt2rgb888 failed&quot;</span>);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                        res = <a class="code" href="esp__err_8h.html#a3792b0d09c0170e4a3b5bb9b6f6fa72b">ESP_FAIL</a>;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                        fr_ready = <a class="code" href="esp__timer_8h.html#ad06d49f60aa7a28faead62981faa2370">esp_timer_get_time</a>();</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                        <a class="code" href="structtag__box__list.html">box_array_t</a> *net_boxes = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                        <span class="keywordflow">if</span>(detection_enabled){</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                            net_boxes = <a class="code" href="fd__forward_8h.html#a4a6259b5a5f0b3437b26727784628f4e">face_detect</a>(image_matrix, &amp;mtmn_config);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                        }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                        fr_face = <a class="code" href="esp__timer_8h.html#ad06d49f60aa7a28faead62981faa2370">esp_timer_get_time</a>();</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                        fr_recognize = fr_face;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                        <span class="keywordflow">if</span> (net_boxes || fb-&gt;<a class="code" href="structcamera__fb__t.html#abbb7740812781c9166938c037124f348">format</a> != <a class="code" href="sensor_8h.html#a3390f04bc7e74f40fe645c69177ce34cae89138c0356c2d13564556ca339489bd">PIXFORMAT_JPEG</a>){</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                            <span class="keywordflow">if</span>(net_boxes){</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                                detected = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                                <span class="keywordflow">if</span>(recognition_enabled){</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                                    face_id = run_face_recognition(image_matrix, net_boxes);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                                }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                                fr_recognize = <a class="code" href="esp__timer_8h.html#ad06d49f60aa7a28faead62981faa2370">esp_timer_get_time</a>();</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                                draw_face_boxes(image_matrix, net_boxes, face_id);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                                <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(net_boxes-&gt;<a class="code" href="structtag__box__list.html#a998af69f8cb372b1d7cc278825b529b2">score</a>);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                                <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(net_boxes-&gt;<a class="code" href="structtag__box__list.html#a4e437a34b8cdb3a691ffbe5a394aec19">box</a>);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                                <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(net_boxes-&gt;<a class="code" href="structtag__box__list.html#a57e231efbf6860f68aa4771c979209a5">landmark</a>);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                                <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(net_boxes);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                            }</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                            <span class="keywordflow">if</span>(!<a class="code" href="img__converters_8h.html#a31ff92ac6e9d70205ff14813743b007f">fmt2jpg</a>(image_matrix-&gt;<a class="code" href="structdl__matrix3du__t.html#a5abbe164b8de24c82d3f9462f677fa6c">item</a>, fb-&gt;<a class="code" href="structcamera__fb__t.html#a1566e3abab5198e6204e6aa2a0184d58">width</a>*fb-&gt;<a class="code" href="structcamera__fb__t.html#a848537e7778745c568897348afb48d0e">height</a>*3, fb-&gt;<a class="code" href="structcamera__fb__t.html#a1566e3abab5198e6204e6aa2a0184d58">width</a>, fb-&gt;<a class="code" href="structcamera__fb__t.html#a848537e7778745c568897348afb48d0e">height</a>, <a class="code" href="sensor_8h.html#a3390f04bc7e74f40fe645c69177ce34ca1c692246162255f93e4c3c40961294fc">PIXFORMAT_RGB888</a>, 90, &amp;_jpg_buf, &amp;_jpg_buf_len)){</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                                <a class="code" href="HardwareSerial_8cpp.html#a6486f9b363134cf53e917447a063ac0c">Serial</a>.<a class="code" href="classPrint.html#a4fd286b325d3b1a786cfa35072a8ef52">println</a>(<span class="stringliteral">&quot;fmt2jpg failed&quot;</span>);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                                res = <a class="code" href="esp__err_8h.html#a3792b0d09c0170e4a3b5bb9b6f6fa72b">ESP_FAIL</a>;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                            }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                            <a class="code" href="esp__camera_8h.html#adc988b687b20d3caa8ec0d95649de3d0">esp_camera_fb_return</a>(fb);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                            fb = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                            _jpg_buf = fb-&gt;<a class="code" href="structcamera__fb__t.html#ab981c458342c57459bec8ac80a01871b">buf</a>;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                            _jpg_buf_len = fb-&gt;<a class="code" href="structcamera__fb__t.html#a35665a966e2547144e5a05be882af6f5">len</a>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                        }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                        fr_encode = <a class="code" href="esp__timer_8h.html#ad06d49f60aa7a28faead62981faa2370">esp_timer_get_time</a>();</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                    }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                    dl_matrix3du_free(image_matrix);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <span class="keywordflow">if</span>(res == <a class="code" href="esp__err_8h.html#abdbffa06442bc1fe3d65dbb8d17656d1">ESP_OK</a>){</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            res = <a class="code" href="esp__http__server_8h.html#a4c6e0465b3c09f5a997043b46ec99186">httpd_resp_send_chunk</a>(req, _STREAM_BOUNDARY, strlen(_STREAM_BOUNDARY));</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        }</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="keywordflow">if</span>(res == <a class="code" href="esp__err_8h.html#abdbffa06442bc1fe3d65dbb8d17656d1">ESP_OK</a>){</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            <span class="keywordtype">size_t</span> hlen = snprintf((<span class="keywordtype">char</span> *)part_buf, 64, _STREAM_PART, _jpg_buf_len);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            res = <a class="code" href="esp__http__server_8h.html#a4c6e0465b3c09f5a997043b46ec99186">httpd_resp_send_chunk</a>(req, (<span class="keyword">const</span> <span class="keywordtype">char</span> *)part_buf, hlen);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        }</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="keywordflow">if</span>(res == <a class="code" href="esp__err_8h.html#abdbffa06442bc1fe3d65dbb8d17656d1">ESP_OK</a>){</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            res = <a class="code" href="esp__http__server_8h.html#a4c6e0465b3c09f5a997043b46ec99186">httpd_resp_send_chunk</a>(req, (<span class="keyword">const</span> <span class="keywordtype">char</span> *)_jpg_buf, _jpg_buf_len);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        }</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="keywordflow">if</span>(fb){</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            <a class="code" href="esp__camera_8h.html#adc988b687b20d3caa8ec0d95649de3d0">esp_camera_fb_return</a>(fb);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            fb = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            _jpg_buf = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(_jpg_buf){</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(_jpg_buf);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            _jpg_buf = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        }</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <span class="keywordflow">if</span>(res != <a class="code" href="esp__err_8h.html#abdbffa06442bc1fe3d65dbb8d17656d1">ESP_OK</a>){</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        }</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <a class="code" href="stdint_8h.html#a96411d49619f50e635418ee57651b95d">int64_t</a> fr_end = <a class="code" href="esp__timer_8h.html#ad06d49f60aa7a28faead62981faa2370">esp_timer_get_time</a>();</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160; </div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <a class="code" href="stdint_8h.html#a96411d49619f50e635418ee57651b95d">int64_t</a> ready_time = (fr_ready - fr_start)/1000;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <a class="code" href="stdint_8h.html#a96411d49619f50e635418ee57651b95d">int64_t</a> face_time = (fr_face - fr_ready)/1000;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <a class="code" href="stdint_8h.html#a96411d49619f50e635418ee57651b95d">int64_t</a> recognize_time = (fr_recognize - fr_face)/1000;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <a class="code" href="stdint_8h.html#a96411d49619f50e635418ee57651b95d">int64_t</a> encode_time = (fr_encode - fr_recognize)/1000;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <a class="code" href="stdint_8h.html#a96411d49619f50e635418ee57651b95d">int64_t</a> process_time = (fr_encode - fr_start)/1000;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <a class="code" href="stdint_8h.html#a96411d49619f50e635418ee57651b95d">int64_t</a> frame_time = fr_end - last_frame;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        last_frame = fr_end;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        frame_time /= 1000;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <a class="code" href="stdint_8h.html#a0238af00180b6d9278fa1c6aa790fdf4">uint32_t</a> avg_frame_time = ra_filter_run(&amp;ra_filter, frame_time);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <a class="code" href="HardwareSerial_8cpp.html#a6486f9b363134cf53e917447a063ac0c">Serial</a>.<a class="code" href="classPrint.html#aeaa1520ee061ba4206c28cb550e6bf44">printf</a>(<span class="stringliteral">&quot;MJPG: %uB %ums (%.1ffps), AVG: %ums (%.1ffps), %u+%u+%u+%u=%u %s%d\n&quot;</span>,</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            (<a class="code" href="stdint_8h.html#a0238af00180b6d9278fa1c6aa790fdf4">uint32_t</a>)(_jpg_buf_len),</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            (<a class="code" href="stdint_8h.html#a0238af00180b6d9278fa1c6aa790fdf4">uint32_t</a>)frame_time, 1000.0 / (<a class="code" href="stdint_8h.html#a0238af00180b6d9278fa1c6aa790fdf4">uint32_t</a>)frame_time,</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            avg_frame_time, 1000.0 / avg_frame_time,</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            (<a class="code" href="stdint_8h.html#a0238af00180b6d9278fa1c6aa790fdf4">uint32_t</a>)ready_time, (<a class="code" href="stdint_8h.html#a0238af00180b6d9278fa1c6aa790fdf4">uint32_t</a>)face_time, (<a class="code" href="stdint_8h.html#a0238af00180b6d9278fa1c6aa790fdf4">uint32_t</a>)recognize_time, (<a class="code" href="stdint_8h.html#a0238af00180b6d9278fa1c6aa790fdf4">uint32_t</a>)encode_time, (<a class="code" href="stdint_8h.html#a0238af00180b6d9278fa1c6aa790fdf4">uint32_t</a>)process_time,</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            (detected)?<span class="stringliteral">&quot;DETECTED &quot;</span>:<span class="stringliteral">&quot;&quot;</span>, face_id</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        );</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160; </div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    last_frame = 0;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;}</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="keyword">static</span> <a class="code" href="esp__err_8h.html#ae535f6066003e82408b58e12f6950868">esp_err_t</a> cmd_handler(<a class="code" href="structhttpd__req.html">httpd_req_t</a> *req){</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keywordtype">char</span>*  <a class="code" href="namespaceasio_1_1detail_1_1descriptor__ops.html#ad10e658a754ff775cdcc3b3decd3c8c9">buf</a>;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordtype">size_t</span> buf_len;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keywordtype">char</span> variable[32] = {0,};</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordtype">char</span> <a class="code" href="cJSON__Utils_8h.html#a0dff3c76a075649fa412b1c429ffe382">value</a>[32] = {0,};</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160; </div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    buf_len = <a class="code" href="esp__http__server_8h.html#aefda761de0e657b96247964ce738d5c0">httpd_req_get_url_query_len</a>(req) + 1;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="keywordflow">if</span> (buf_len &gt; 1) {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <a class="code" href="namespaceasio_1_1detail_1_1descriptor__ops.html#ad10e658a754ff775cdcc3b3decd3c8c9">buf</a> = (<span class="keywordtype">char</span>*)<a class="code" href="unity__fixture__malloc__overrides_8h.html#acf143577800376dd931c059ecc61ba06">malloc</a>(buf_len);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="namespaceasio_1_1detail_1_1descriptor__ops.html#ad10e658a754ff775cdcc3b3decd3c8c9">buf</a>){</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            httpd_resp_send_500(req);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="esp__err_8h.html#a3792b0d09c0170e4a3b5bb9b6f6fa72b">ESP_FAIL</a>;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        }</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="esp__http__server_8h.html#a9bc4e30aee549df5519de6a13829c264">httpd_req_get_url_query_str</a>(req, <a class="code" href="namespaceasio_1_1detail_1_1descriptor__ops.html#ad10e658a754ff775cdcc3b3decd3c8c9">buf</a>, buf_len) == <a class="code" href="esp__err_8h.html#abdbffa06442bc1fe3d65dbb8d17656d1">ESP_OK</a>) {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="esp__http__server_8h.html#a843cd2cb098fdfd374c20e784a994670">httpd_query_key_value</a>(<a class="code" href="namespaceasio_1_1detail_1_1descriptor__ops.html#ad10e658a754ff775cdcc3b3decd3c8c9">buf</a>, <span class="stringliteral">&quot;var&quot;</span>, variable, <span class="keyword">sizeof</span>(variable)) == <a class="code" href="esp__err_8h.html#abdbffa06442bc1fe3d65dbb8d17656d1">ESP_OK</a> &amp;&amp;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                <a class="code" href="esp__http__server_8h.html#a843cd2cb098fdfd374c20e784a994670">httpd_query_key_value</a>(<a class="code" href="namespaceasio_1_1detail_1_1descriptor__ops.html#ad10e658a754ff775cdcc3b3decd3c8c9">buf</a>, <span class="stringliteral">&quot;val&quot;</span>, <a class="code" href="cJSON__Utils_8h.html#a0dff3c76a075649fa412b1c429ffe382">value</a>, <span class="keyword">sizeof</span>(<a class="code" href="cJSON__Utils_8h.html#a0dff3c76a075649fa412b1c429ffe382">value</a>)) == <a class="code" href="esp__err_8h.html#abdbffa06442bc1fe3d65dbb8d17656d1">ESP_OK</a>) {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(<a class="code" href="namespaceasio_1_1detail_1_1descriptor__ops.html#ad10e658a754ff775cdcc3b3decd3c8c9">buf</a>);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                httpd_resp_send_404(req);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="esp__err_8h.html#a3792b0d09c0170e4a3b5bb9b6f6fa72b">ESP_FAIL</a>;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            }</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(<a class="code" href="namespaceasio_1_1detail_1_1descriptor__ops.html#ad10e658a754ff775cdcc3b3decd3c8c9">buf</a>);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            httpd_resp_send_404(req);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="esp__err_8h.html#a3792b0d09c0170e4a3b5bb9b6f6fa72b">ESP_FAIL</a>;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <a class="code" href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a>(<a class="code" href="namespaceasio_1_1detail_1_1descriptor__ops.html#ad10e658a754ff775cdcc3b3decd3c8c9">buf</a>);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        httpd_resp_send_404(req);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="esp__err_8h.html#a3792b0d09c0170e4a3b5bb9b6f6fa72b">ESP_FAIL</a>;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    }</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160; </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordtype">int</span> val = <a class="code" href="stdlib__noniso_8h.html#a30670a60464f77af17dfb353353d6df8">atoi</a>(<a class="code" href="cJSON__Utils_8h.html#a0dff3c76a075649fa412b1c429ffe382">value</a>);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <a class="code" href="struct__sensor.html">sensor_t</a> * <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a> = <a class="code" href="esp__camera_8h.html#ac0dc2e859a218a5fcef50ef1b339220f">esp_camera_sensor_get</a>();</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordtype">int</span> res = 0;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">if</span>(!strcmp(variable, <span class="stringliteral">&quot;framesize&quot;</span>)) {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;pixformat == <a class="code" href="sensor_8h.html#a3390f04bc7e74f40fe645c69177ce34cae89138c0356c2d13564556ca339489bd">PIXFORMAT_JPEG</a>) res = <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;set_framesize(<a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>, (<a class="code" href="sensor_8h.html#a79bc85e5282a183d6c06edc6eb77a69e">framesize_t</a>)val);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    }</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(variable, <span class="stringliteral">&quot;quality&quot;</span>)) res = <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;set_quality(<a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>, val);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(variable, <span class="stringliteral">&quot;contrast&quot;</span>)) res = <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;set_contrast(<a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>, val);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(variable, <span class="stringliteral">&quot;brightness&quot;</span>)) res = <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;set_brightness(<a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>, val);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(variable, <span class="stringliteral">&quot;saturation&quot;</span>)) res = <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;set_saturation(<a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>, val);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(variable, <span class="stringliteral">&quot;gainceiling&quot;</span>)) res = <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;set_gainceiling(<a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>, (<a class="code" href="sensor_8h.html#a9da4a126b14503ef5474dee7630fb9ca">gainceiling_t</a>)val);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(variable, <span class="stringliteral">&quot;colorbar&quot;</span>)) res = <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;set_colorbar(<a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>, val);</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(variable, <span class="stringliteral">&quot;awb&quot;</span>)) res = <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;set_whitebal(<a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>, val);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(variable, <span class="stringliteral">&quot;agc&quot;</span>)) res = <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;set_gain_ctrl(<a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>, val);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(variable, <span class="stringliteral">&quot;aec&quot;</span>)) res = <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;set_exposure_ctrl(<a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>, val);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(variable, <span class="stringliteral">&quot;hmirror&quot;</span>)) res = <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;set_hmirror(<a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>, val);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(variable, <span class="stringliteral">&quot;vflip&quot;</span>)) res = <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;set_vflip(<a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>, val);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(variable, <span class="stringliteral">&quot;awb_gain&quot;</span>)) res = <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;set_awb_gain(<a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>, val);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(variable, <span class="stringliteral">&quot;agc_gain&quot;</span>)) res = <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;set_agc_gain(<a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>, val);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(variable, <span class="stringliteral">&quot;aec_value&quot;</span>)) res = <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;set_aec_value(<a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>, val);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(variable, <span class="stringliteral">&quot;aec2&quot;</span>)) res = <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;set_aec2(<a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>, val);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(variable, <span class="stringliteral">&quot;dcw&quot;</span>)) res = <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;set_dcw(<a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>, val);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(variable, <span class="stringliteral">&quot;bpc&quot;</span>)) res = <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;set_bpc(<a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>, val);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(variable, <span class="stringliteral">&quot;wpc&quot;</span>)) res = <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;set_wpc(<a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>, val);</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(variable, <span class="stringliteral">&quot;raw_gma&quot;</span>)) res = <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;set_raw_gma(<a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>, val);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(variable, <span class="stringliteral">&quot;lenc&quot;</span>)) res = <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;set_lenc(<a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>, val);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(variable, <span class="stringliteral">&quot;special_effect&quot;</span>)) res = <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;set_special_effect(<a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>, val);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(variable, <span class="stringliteral">&quot;wb_mode&quot;</span>)) res = <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;set_wb_mode(<a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>, val);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(variable, <span class="stringliteral">&quot;ae_level&quot;</span>)) res = <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;set_ae_level(<a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>, val);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(variable, <span class="stringliteral">&quot;face_detect&quot;</span>)) {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        detection_enabled = val;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="keywordflow">if</span>(!detection_enabled) {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            recognition_enabled = 0;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        }</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    }</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(variable, <span class="stringliteral">&quot;face_enroll&quot;</span>)) is_enrolling = val;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(variable, <span class="stringliteral">&quot;face_recognize&quot;</span>)) {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        recognition_enabled = val;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <span class="keywordflow">if</span>(recognition_enabled){</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            detection_enabled = val;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        }</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    }</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        res = -1;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    }</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160; </div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordflow">if</span>(res){</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        <span class="keywordflow">return</span> httpd_resp_send_500(req);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    }</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160; </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <a class="code" href="esp__http__server_8h.html#af9fe08829da872bed237cb17b577b1bb">httpd_resp_set_hdr</a>(req, <span class="stringliteral">&quot;Access-Control-Allow-Origin&quot;</span>, <span class="stringliteral">&quot;*&quot;</span>);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="esp__http__server_8h.html#a67aa037d44f178a47f3fadca5ac34c1a">httpd_resp_send</a>(req, <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;}</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160; </div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="keyword">static</span> <a class="code" href="esp__err_8h.html#ae535f6066003e82408b58e12f6950868">esp_err_t</a> status_handler(<a class="code" href="structhttpd__req.html">httpd_req_t</a> *req){</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> json_response[1024];</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <a class="code" href="struct__sensor.html">sensor_t</a> * <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a> = <a class="code" href="esp__camera_8h.html#ac0dc2e859a218a5fcef50ef1b339220f">esp_camera_sensor_get</a>();</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordtype">char</span> * <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = json_response;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    *<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>++ = <span class="charliteral">&#39;{&#39;</span>;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160; </div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>+=sprintf(<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, <span class="stringliteral">&quot;\&quot;framesize\&quot;:%u,&quot;</span>, <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;status.framesize);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>+=sprintf(<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, <span class="stringliteral">&quot;\&quot;quality\&quot;:%u,&quot;</span>, <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;status.quality);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>+=sprintf(<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, <span class="stringliteral">&quot;\&quot;brightness\&quot;:%d,&quot;</span>, <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;status.brightness);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>+=sprintf(<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, <span class="stringliteral">&quot;\&quot;contrast\&quot;:%d,&quot;</span>, <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;status.contrast);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>+=sprintf(<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, <span class="stringliteral">&quot;\&quot;saturation\&quot;:%d,&quot;</span>, <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;status.saturation);</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>+=sprintf(<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, <span class="stringliteral">&quot;\&quot;sharpness\&quot;:%d,&quot;</span>, <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;status.sharpness);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>+=sprintf(<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, <span class="stringliteral">&quot;\&quot;special_effect\&quot;:%u,&quot;</span>, <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;status.special_effect);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>+=sprintf(<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, <span class="stringliteral">&quot;\&quot;wb_mode\&quot;:%u,&quot;</span>, <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;status.wb_mode);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>+=sprintf(<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, <span class="stringliteral">&quot;\&quot;awb\&quot;:%u,&quot;</span>, <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;status.awb);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>+=sprintf(<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, <span class="stringliteral">&quot;\&quot;awb_gain\&quot;:%u,&quot;</span>, <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;status.awb_gain);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>+=sprintf(<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, <span class="stringliteral">&quot;\&quot;aec\&quot;:%u,&quot;</span>, <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;status.aec);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>+=sprintf(<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, <span class="stringliteral">&quot;\&quot;aec2\&quot;:%u,&quot;</span>, <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;status.aec2);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>+=sprintf(<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, <span class="stringliteral">&quot;\&quot;ae_level\&quot;:%d,&quot;</span>, <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;status.ae_level);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>+=sprintf(<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, <span class="stringliteral">&quot;\&quot;aec_value\&quot;:%u,&quot;</span>, <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;status.aec_value);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>+=sprintf(<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, <span class="stringliteral">&quot;\&quot;agc\&quot;:%u,&quot;</span>, <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;status.agc);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>+=sprintf(<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, <span class="stringliteral">&quot;\&quot;agc_gain\&quot;:%u,&quot;</span>, <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;status.agc_gain);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>+=sprintf(<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, <span class="stringliteral">&quot;\&quot;gainceiling\&quot;:%u,&quot;</span>, <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;status.gainceiling);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>+=sprintf(<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, <span class="stringliteral">&quot;\&quot;bpc\&quot;:%u,&quot;</span>, <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;status.bpc);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>+=sprintf(<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, <span class="stringliteral">&quot;\&quot;wpc\&quot;:%u,&quot;</span>, <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;status.wpc);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>+=sprintf(<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, <span class="stringliteral">&quot;\&quot;raw_gma\&quot;:%u,&quot;</span>, <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;status.raw_gma);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>+=sprintf(<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, <span class="stringliteral">&quot;\&quot;lenc\&quot;:%u,&quot;</span>, <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;status.lenc);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>+=sprintf(<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, <span class="stringliteral">&quot;\&quot;vflip\&quot;:%u,&quot;</span>, <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;status.vflip);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>+=sprintf(<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, <span class="stringliteral">&quot;\&quot;hmirror\&quot;:%u,&quot;</span>, <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;status.hmirror);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>+=sprintf(<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, <span class="stringliteral">&quot;\&quot;dcw\&quot;:%u,&quot;</span>, <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;status.dcw);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>+=sprintf(<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, <span class="stringliteral">&quot;\&quot;colorbar\&quot;:%u,&quot;</span>, <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;status.colorbar);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>+=sprintf(<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, <span class="stringliteral">&quot;\&quot;face_detect\&quot;:%u,&quot;</span>, detection_enabled);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>+=sprintf(<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, <span class="stringliteral">&quot;\&quot;face_enroll\&quot;:%u,&quot;</span>, is_enrolling);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>+=sprintf(<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, <span class="stringliteral">&quot;\&quot;face_recognize\&quot;:%u&quot;</span>, recognition_enabled);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    *<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>++ = <span class="charliteral">&#39;}&#39;</span>;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    *<a class="code" href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>++ = 0;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <a class="code" href="esp__http__server_8h.html#afe6f7650c67454ccbe85bb470f166de2">httpd_resp_set_type</a>(req, <span class="stringliteral">&quot;application/json&quot;</span>);</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <a class="code" href="esp__http__server_8h.html#af9fe08829da872bed237cb17b577b1bb">httpd_resp_set_hdr</a>(req, <span class="stringliteral">&quot;Access-Control-Allow-Origin&quot;</span>, <span class="stringliteral">&quot;*&quot;</span>);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="esp__http__server_8h.html#a67aa037d44f178a47f3fadca5ac34c1a">httpd_resp_send</a>(req, json_response, strlen(json_response));</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;}</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160; </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="keyword">static</span> <a class="code" href="esp__err_8h.html#ae535f6066003e82408b58e12f6950868">esp_err_t</a> index_handler(<a class="code" href="structhttpd__req.html">httpd_req_t</a> *req){</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <a class="code" href="esp__http__server_8h.html#afe6f7650c67454ccbe85bb470f166de2">httpd_resp_set_type</a>(req, <span class="stringliteral">&quot;text/html&quot;</span>);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <a class="code" href="esp__http__server_8h.html#af9fe08829da872bed237cb17b577b1bb">httpd_resp_set_hdr</a>(req, <span class="stringliteral">&quot;Content-Encoding&quot;</span>, <span class="stringliteral">&quot;gzip&quot;</span>);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <a class="code" href="struct__sensor.html">sensor_t</a> * <a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a> = <a class="code" href="esp__camera_8h.html#ac0dc2e859a218a5fcef50ef1b339220f">esp_camera_sensor_get</a>();</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">s</a>-&gt;id.PID == <a class="code" href="sensor_8h.html#a32585d6be8e1d3131dc56e42b6127f87">OV3660_PID</a>) {</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="esp__http__server_8h.html#a67aa037d44f178a47f3fadca5ac34c1a">httpd_resp_send</a>(req, (<span class="keyword">const</span> <span class="keywordtype">char</span> *)<a class="code" href="camera__index_8h.html#ad3a88eab59ea0ce72fa59f0e0b454ce5">index_ov3660_html_gz</a>, <a class="code" href="camera__index_8h.html#af54749bfdc81fcf5b5aa529768b1bd75">index_ov3660_html_gz_len</a>);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    }</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="esp__http__server_8h.html#a67aa037d44f178a47f3fadca5ac34c1a">httpd_resp_send</a>(req, (<span class="keyword">const</span> <span class="keywordtype">char</span> *)<a class="code" href="camera__index_8h.html#a1bc389873bb77aab64704a0a005554cb">index_ov2640_html_gz</a>, <a class="code" href="camera__index_8h.html#a3e9856444509ebbb38f627843790be46">index_ov2640_html_gz_len</a>);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;}</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160; </div>
<div class="line"><a name="l00591"></a><span class="lineno"><a class="line" href="app__httpd_8cpp.html#a107102e307d7bfe53b0f79e0097568e9">  591</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="app__httpd_8cpp.html#a107102e307d7bfe53b0f79e0097568e9">startCameraServer</a>(){</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <a class="code" href="structhttpd__config.html">httpd_config_t</a> config = <a class="code" href="esp__http__server_8h.html#a16f21d93351c7b2a7d0fff7e52cb84ce">HTTPD_DEFAULT_CONFIG</a>();</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160; </div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <a class="code" href="structhttpd__uri.html">httpd_uri_t</a> index_uri = {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        .<a class="code" href="structhttpd__uri.html#a6d96b7c861b635d1e75cb5ea784fa904">uri</a>       = <span class="stringliteral">&quot;/&quot;</span>,</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        .method    = <a class="code" href="HTTP__Method_8h.html#a837a089a977b319a11edfb8022d9e47da4ad23c3d2f21f7502ba058ef89518166">HTTP_GET</a>,</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        .handler   = index_handler,</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        .user_ctx  = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    };</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160; </div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <a class="code" href="structhttpd__uri.html">httpd_uri_t</a> status_uri = {</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        .<a class="code" href="structhttpd__uri.html#a6d96b7c861b635d1e75cb5ea784fa904">uri</a>       = <span class="stringliteral">&quot;/status&quot;</span>,</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        .method    = <a class="code" href="HTTP__Method_8h.html#a837a089a977b319a11edfb8022d9e47da4ad23c3d2f21f7502ba058ef89518166">HTTP_GET</a>,</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        .handler   = status_handler,</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        .user_ctx  = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    };</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160; </div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <a class="code" href="structhttpd__uri.html">httpd_uri_t</a> cmd_uri = {</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        .<a class="code" href="structhttpd__uri.html#a6d96b7c861b635d1e75cb5ea784fa904">uri</a>       = <span class="stringliteral">&quot;/control&quot;</span>,</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        .method    = <a class="code" href="HTTP__Method_8h.html#a837a089a977b319a11edfb8022d9e47da4ad23c3d2f21f7502ba058ef89518166">HTTP_GET</a>,</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        .handler   = cmd_handler,</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        .user_ctx  = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    };</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160; </div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <a class="code" href="structhttpd__uri.html">httpd_uri_t</a> capture_uri = {</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        .<a class="code" href="structhttpd__uri.html#a6d96b7c861b635d1e75cb5ea784fa904">uri</a>       = <span class="stringliteral">&quot;/capture&quot;</span>,</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        .method    = <a class="code" href="HTTP__Method_8h.html#a837a089a977b319a11edfb8022d9e47da4ad23c3d2f21f7502ba058ef89518166">HTTP_GET</a>,</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        .handler   = capture_handler,</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        .user_ctx  = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    };</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160; </div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;   <a class="code" href="structhttpd__uri.html">httpd_uri_t</a> stream_uri = {</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        .<a class="code" href="structhttpd__uri.html#a6d96b7c861b635d1e75cb5ea784fa904">uri</a>       = <span class="stringliteral">&quot;/stream&quot;</span>,</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        .method    = <a class="code" href="HTTP__Method_8h.html#a837a089a977b319a11edfb8022d9e47da4ad23c3d2f21f7502ba058ef89518166">HTTP_GET</a>,</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        .handler   = stream_handler,</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        .user_ctx  = <a class="code" href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    };</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160; </div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160; </div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    ra_filter_init(&amp;ra_filter, 20);</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    mtmn_config.<a class="code" href="structmtmn__config__t.html#a8f3538b015c16c9e9319116005d00f92">type</a> = <a class="code" href="fd__forward_8h.html#ac36e929f333af4d9f2cd561b8bfdfd39af84c11ba888e499a8a282a3e6f5de7de">FAST</a>;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    mtmn_config.<a class="code" href="structmtmn__config__t.html#a0d6021a3604af36c95c3494b35477448">min_face</a> = 80;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    mtmn_config.<a class="code" href="structmtmn__config__t.html#a648afd9fd7a3752276c7be0ec1822a53">pyramid</a> = 0.707;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    mtmn_config.<a class="code" href="structmtmn__config__t.html#aa3c0368e1a610694f9d77c178a8fa7a3">pyramid_times</a> = 4;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    mtmn_config.<a class="code" href="structmtmn__config__t.html#a041d0780f454854f8c95793e71cd700b">p_threshold</a>.<a class="code" href="structthreshold__config__t.html#a76aabcbe7226e1aa609a3820b6056060">score</a> = 0.6;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    mtmn_config.<a class="code" href="structmtmn__config__t.html#a041d0780f454854f8c95793e71cd700b">p_threshold</a>.<a class="code" href="structthreshold__config__t.html#a697b773e63c2045c88f1da72844348a0">nms</a> = 0.7;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    mtmn_config.<a class="code" href="structmtmn__config__t.html#a041d0780f454854f8c95793e71cd700b">p_threshold</a>.<a class="code" href="structthreshold__config__t.html#ae672d51698fc4cd983d1155da2d4c513">candidate_number</a> = 20;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    mtmn_config.<a class="code" href="structmtmn__config__t.html#aa44826f88b256aea0890c6f0fb9e523a">r_threshold</a>.<a class="code" href="structthreshold__config__t.html#a76aabcbe7226e1aa609a3820b6056060">score</a> = 0.7;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    mtmn_config.<a class="code" href="structmtmn__config__t.html#aa44826f88b256aea0890c6f0fb9e523a">r_threshold</a>.<a class="code" href="structthreshold__config__t.html#a697b773e63c2045c88f1da72844348a0">nms</a> = 0.7;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    mtmn_config.<a class="code" href="structmtmn__config__t.html#aa44826f88b256aea0890c6f0fb9e523a">r_threshold</a>.<a class="code" href="structthreshold__config__t.html#ae672d51698fc4cd983d1155da2d4c513">candidate_number</a> = 10;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    mtmn_config.<a class="code" href="structmtmn__config__t.html#a65ee944b7897fdb81405ce78ff4c40f0">o_threshold</a>.<a class="code" href="structthreshold__config__t.html#a76aabcbe7226e1aa609a3820b6056060">score</a> = 0.7;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    mtmn_config.<a class="code" href="structmtmn__config__t.html#a65ee944b7897fdb81405ce78ff4c40f0">o_threshold</a>.<a class="code" href="structthreshold__config__t.html#a697b773e63c2045c88f1da72844348a0">nms</a> = 0.7;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    mtmn_config.<a class="code" href="structmtmn__config__t.html#a65ee944b7897fdb81405ce78ff4c40f0">o_threshold</a>.<a class="code" href="structthreshold__config__t.html#ae672d51698fc4cd983d1155da2d4c513">candidate_number</a> = 1;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    </div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <a class="code" href="fr__forward_8h.html#a4de8c2348533dfc1f89be0629ccf5fc5">face_id_init</a>(&amp;id_list, <a class="code" href="app__httpd_8cpp.html#ab28c27ee7095c6a3266c0bf7cdd70f4c">FACE_ID_SAVE_NUMBER</a>, <a class="code" href="app__httpd_8cpp.html#a170cfa2e84c67699d42967673b01c6d3">ENROLL_CONFIRM_TIMES</a>);</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    </div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <a class="code" href="HardwareSerial_8cpp.html#a6486f9b363134cf53e917447a063ac0c">Serial</a>.<a class="code" href="classPrint.html#aeaa1520ee061ba4206c28cb550e6bf44">printf</a>(<span class="stringliteral">&quot;Starting web server on port: &#39;%d&#39;\n&quot;</span>, config.<a class="code" href="structhttpd__config.html#a6c40d3061485bc6c7d34d73a63e42e15">server_port</a>);</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="esp__http__server_8h.html#a67fc09a6f8b438d55f8277f0112fe2d2">httpd_start</a>(&amp;<a class="code" href="app__httpd_8cpp.html#a1ef7f093f774940aabc872bc891be564">camera_httpd</a>, &amp;config) == <a class="code" href="esp__err_8h.html#abdbffa06442bc1fe3d65dbb8d17656d1">ESP_OK</a>) {</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        <a class="code" href="esp__http__server_8h.html#a76040cbeebdd3fea67c15842c9713cc8">httpd_register_uri_handler</a>(<a class="code" href="app__httpd_8cpp.html#a1ef7f093f774940aabc872bc891be564">camera_httpd</a>, &amp;index_uri);</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        <a class="code" href="esp__http__server_8h.html#a76040cbeebdd3fea67c15842c9713cc8">httpd_register_uri_handler</a>(<a class="code" href="app__httpd_8cpp.html#a1ef7f093f774940aabc872bc891be564">camera_httpd</a>, &amp;cmd_uri);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <a class="code" href="esp__http__server_8h.html#a76040cbeebdd3fea67c15842c9713cc8">httpd_register_uri_handler</a>(<a class="code" href="app__httpd_8cpp.html#a1ef7f093f774940aabc872bc891be564">camera_httpd</a>, &amp;status_uri);</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <a class="code" href="esp__http__server_8h.html#a76040cbeebdd3fea67c15842c9713cc8">httpd_register_uri_handler</a>(<a class="code" href="app__httpd_8cpp.html#a1ef7f093f774940aabc872bc891be564">camera_httpd</a>, &amp;capture_uri);</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    }</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; </div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    config.<a class="code" href="structhttpd__config.html#a6c40d3061485bc6c7d34d73a63e42e15">server_port</a> += 1;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    config.<a class="code" href="structhttpd__config.html#aaa92748cfcf99d5d6f0d2c94d7d1d237">ctrl_port</a> += 1;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <a class="code" href="HardwareSerial_8cpp.html#a6486f9b363134cf53e917447a063ac0c">Serial</a>.<a class="code" href="classPrint.html#aeaa1520ee061ba4206c28cb550e6bf44">printf</a>(<span class="stringliteral">&quot;Starting stream server on port: &#39;%d&#39;\n&quot;</span>, config.<a class="code" href="structhttpd__config.html#a6c40d3061485bc6c7d34d73a63e42e15">server_port</a>);</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="esp__http__server_8h.html#a67fc09a6f8b438d55f8277f0112fe2d2">httpd_start</a>(&amp;<a class="code" href="app__httpd_8cpp.html#aeadb1986dc285585c4d295e7b317d4d0">stream_httpd</a>, &amp;config) == <a class="code" href="esp__err_8h.html#abdbffa06442bc1fe3d65dbb8d17656d1">ESP_OK</a>) {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        <a class="code" href="esp__http__server_8h.html#a76040cbeebdd3fea67c15842c9713cc8">httpd_register_uri_handler</a>(<a class="code" href="app__httpd_8cpp.html#aeadb1986dc285585c4d295e7b317d4d0">stream_httpd</a>, &amp;stream_uri);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    }</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="afr__forward_8h_html"><div class="ttname"><a href="fr__forward_8h.html">fr_forward.h</a></div></div>
<div class="ttc" id="aArduino_8h_html"><div class="ttname"><a href="Arduino_8h.html">Arduino.h</a></div></div>
<div class="ttc" id="aesp__http__server_8h_html_a843cd2cb098fdfd374c20e784a994670"><div class="ttname"><a href="esp__http__server_8h.html#a843cd2cb098fdfd374c20e784a994670">httpd_query_key_value</a></div><div class="ttdeci">esp_err_t httpd_query_key_value(const char *qry, const char *key, char *val, size_t val_size)</div><div class="ttdoc">Helper function to get a URL query tag from a query string of the type param1=val1&amp;param2=val2.</div></div>
<div class="ttc" id="astructmtmn__config__t_html_a65ee944b7897fdb81405ce78ff4c40f0"><div class="ttname"><a href="structmtmn__config__t.html#a65ee944b7897fdb81405ce78ff4c40f0">mtmn_config_t::o_threshold</a></div><div class="ttdeci">threshold_config_t o_threshold</div><div class="ttdoc">The thresholds for R-Net. For details, see the definition of threshold_config_t.</div><div class="ttdef"><b>Definition:</b> <a href="fd__forward_8h_source.html#l00062">fd_forward.h:62</a></div></div>
<div class="ttc" id="astructdl__matrix3du__t_html"><div class="ttname"><a href="structdl__matrix3du__t.html">dl_matrix3du_t</a></div><div class="ttdef"><b>Definition:</b> <a href="dl__lib__matrix3d_8h_source.html#l00058">dl_lib_matrix3d.h:59</a></div></div>
<div class="ttc" id="astructtag__box__list_html_a998af69f8cb372b1d7cc278825b529b2"><div class="ttname"><a href="structtag__box__list.html#a998af69f8cb372b1d7cc278825b529b2">tag_box_list::score</a></div><div class="ttdeci">fptp_t * score</div><div class="ttdef"><b>Definition:</b> <a href="image__util_8h_source.html#l00058">image_util.h:58</a></div></div>
<div class="ttc" id="astdint_8h_html_a06ffba8acf5d133104191f183e67ac8c"><div class="ttname"><a href="stdint_8h.html#a06ffba8acf5d133104191f183e67ac8c">int8_t</a></div><div class="ttdeci">__int8_t int8_t</div><div class="ttdef"><b>Definition:</b> <a href="stdint_8h_source.html#l00020">stdint.h:20</a></div></div>
<div class="ttc" id="afb__gfx_8h_html"><div class="ttname"><a href="fb__gfx_8h.html">fb_gfx.h</a></div></div>
<div class="ttc" id="astructra__filter__t_html_a30f745fdcb9c9809c07aa5c9c052d1db"><div class="ttname"><a href="structra__filter__t.html#a30f745fdcb9c9809c07aa5c9c052d1db">ra_filter_t::index</a></div><div class="ttdeci">size_t index</div><div class="ttdef"><b>Definition:</b> <a href="app__httpd_8cpp_source.html#l00039">app_httpd.cpp:39</a></div></div>
<div class="ttc" id="astructmtmn__config__t_html_a041d0780f454854f8c95793e71cd700b"><div class="ttname"><a href="structmtmn__config__t.html#a041d0780f454854f8c95793e71cd700b">mtmn_config_t::p_threshold</a></div><div class="ttdeci">threshold_config_t p_threshold</div><div class="ttdoc">The pyramid resizing times.</div><div class="ttdef"><b>Definition:</b> <a href="fd__forward_8h_source.html#l00060">fd_forward.h:60</a></div></div>
<div class="ttc" id="asensor_8h_html_a3390f04bc7e74f40fe645c69177ce34ca1c692246162255f93e4c3c40961294fc"><div class="ttname"><a href="sensor_8h.html#a3390f04bc7e74f40fe645c69177ce34ca1c692246162255f93e4c3c40961294fc">PIXFORMAT_RGB888</a></div><div class="ttdeci">@ PIXFORMAT_RGB888</div><div class="ttdef"><b>Definition:</b> <a href="sensor_8h_source.html#l00023">sensor.h:23</a></div></div>
<div class="ttc" id="aimg__converters_8h_html_a62b6b9331025ccb1659ac08901d0e26a"><div class="ttname"><a href="img__converters_8h.html#a62b6b9331025ccb1659ac08901d0e26a">fmt2jpg_cb</a></div><div class="ttdeci">bool fmt2jpg_cb(uint8_t *src, size_t src_len, uint16_t width, uint16_t height, pixformat_t format, uint8_t quality, jpg_out_cb cb, void *arg)</div><div class="ttdoc">Convert image buffer to JPEG.</div></div>
<div class="ttc" id="astructfb__data__t_html_a5540cf63765218e5a6bd49812f21f993"><div class="ttname"><a href="structfb__data__t.html#a5540cf63765218e5a6bd49812f21f993">fb_data_t::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="fb__gfx_8h_source.html#l00026">fb_gfx.h:26</a></div></div>
<div class="ttc" id="astructbox__t_html_a5459c2b4c6f6ac2c8a712981931737c8"><div class="ttname"><a href="structbox__t.html#a5459c2b4c6f6ac2c8a712981931737c8">box_t::box_p</a></div><div class="ttdeci">fptp_t box_p[4]</div><div class="ttdef"><b>Definition:</b> <a href="image__util_8h_source.html#l00053">image_util.h:53</a></div></div>
<div class="ttc" id="afd__forward_8h_html"><div class="ttname"><a href="fd__forward_8h.html">fd_forward.h</a></div></div>
<div class="ttc" id="aapp__httpd_8cpp_html_a170cfa2e84c67699d42967673b01c6d3"><div class="ttname"><a href="app__httpd_8cpp.html#a170cfa2e84c67699d42967673b01c6d3">ENROLL_CONFIRM_TIMES</a></div><div class="ttdeci">#define ENROLL_CONFIRM_TIMES</div><div class="ttdef"><b>Definition:</b> <a href="app__httpd_8cpp_source.html#l00026">app_httpd.cpp:25</a></div></div>
<div class="ttc" id="astructhttpd__config_html_a6c40d3061485bc6c7d34d73a63e42e15"><div class="ttname"><a href="structhttpd__config.html#a6c40d3061485bc6c7d34d73a63e42e15">httpd_config::server_port</a></div><div class="ttdeci">uint16_t server_port</div><div class="ttdef"><b>Definition:</b> <a href="esp__http__server_8h_source.html#l00148">esp_http_server.h:148</a></div></div>
<div class="ttc" id="aArduino-IRremote_2LICENSE_8txt_html_a0ff3051eb9cb79426196331363674fa7"><div class="ttname"><a href="Arduino-IRremote_2LICENSE_8txt.html#a0ff3051eb9cb79426196331363674fa7">copy</a></div><div class="ttdeci">and that you are informed that you can do these things To protect your we need to make restrictions that forbid distributors to deny you these rights or to ask you to surrender these rights These restrictions translate to certain responsibilities for you if you distribute copies of the library or if you modify it For if you distribute copies of the whether gratis or for a you must give the recipients all the rights that we gave you You must make sure that receive or can get the source code If you link other code with the you must provide complete object files to the so that they can relink them with the library after making changes to the library and recompiling it And you must show them these terms so they know their rights We protect your rights with a two step which gives you legal permission to copy</div><div class="ttdef"><b>Definition:</b> <a href="Arduino-IRremote_2LICENSE_8txt_source.html#l00051">LICENSE.txt:51</a></div></div>
<div class="ttc" id="acamera__index_8h_html_ad3a88eab59ea0ce72fa59f0e0b454ce5"><div class="ttname"><a href="camera__index_8h.html#ad3a88eab59ea0ce72fa59f0e0b454ce5">index_ov3660_html_gz</a></div><div class="ttdeci">const uint8_t index_ov3660_html_gz[]</div><div class="ttdef"><b>Definition:</b> <a href="camera__index_8h_source.html#l00280">camera_index.h:280</a></div></div>
<div class="ttc" id="astruct__sensor_html"><div class="ttname"><a href="struct__sensor.html">_sensor</a></div><div class="ttdef"><b>Definition:</b> <a href="sensor_8h_source.html#l00094">sensor.h:94</a></div></div>
<div class="ttc" id="afr__forward_8h_html_a4de8c2348533dfc1f89be0629ccf5fc5"><div class="ttname"><a href="fr__forward_8h.html#a4de8c2348533dfc1f89be0629ccf5fc5">face_id_init</a></div><div class="ttdeci">void face_id_init(face_id_list *l, uint8_t size, uint8_t confirm_times)</div><div class="ttdoc">Initialize face id list.</div></div>
<div class="ttc" id="astructtag__box__list_html_a57e231efbf6860f68aa4771c979209a5"><div class="ttname"><a href="structtag__box__list.html#a57e231efbf6860f68aa4771c979209a5">tag_box_list::landmark</a></div><div class="ttdeci">landmark_t * landmark</div><div class="ttdef"><b>Definition:</b> <a href="image__util_8h_source.html#l00060">image_util.h:60</a></div></div>
<div class="ttc" id="aimg__converters_8h_html"><div class="ttname"><a href="img__converters_8h.html">img_converters.h</a></div></div>
<div class="ttc" id="astructcamera__fb__t_html_abbb7740812781c9166938c037124f348"><div class="ttname"><a href="structcamera__fb__t.html#abbb7740812781c9166938c037124f348">camera_fb_t::format</a></div><div class="ttdeci">pixformat_t format</div><div class="ttdef"><b>Definition:</b> <a href="esp__camera_8h_source.html#l00117">esp_camera.h:117</a></div></div>
<div class="ttc" id="anamespaceudp__server_html_ade67d79c46c11d44cd799213c5a772ca"><div class="ttname"><a href="namespaceudp__server.html#ade67d79c46c11d44cd799213c5a772ca">udp_server.data</a></div><div class="ttdeci">data</div><div class="ttdef"><b>Definition:</b> <a href="udp__server_8py_source.html#l00023">udp_server.py:23</a></div></div>
<div class="ttc" id="aclassPrint_html_a4fd286b325d3b1a786cfa35072a8ef52"><div class="ttname"><a href="classPrint.html#a4fd286b325d3b1a786cfa35072a8ef52">Print::println</a></div><div class="ttdeci">size_t println(const __FlashStringHelper *)</div><div class="ttdef"><b>Definition:</b> <a href="Print_8cpp_source.html#l00142">Print.cpp:142</a></div></div>
<div class="ttc" id="astructhttpd__uri_html_a6d96b7c861b635d1e75cb5ea784fa904"><div class="ttname"><a href="structhttpd__uri.html#a6d96b7c861b635d1e75cb5ea784fa904">httpd_uri::uri</a></div><div class="ttdeci">const char * uri</div><div class="ttdef"><b>Definition:</b> <a href="esp__http__server_8h_source.html#l00387">esp_http_server.h:387</a></div></div>
<div class="ttc" id="astructhttpd__config_html_aaa92748cfcf99d5d6f0d2c94d7d1d237"><div class="ttname"><a href="structhttpd__config.html#aaa92748cfcf99d5d6f0d2c94d7d1d237">httpd_config::ctrl_port</a></div><div class="ttdeci">uint16_t ctrl_port</div><div class="ttdef"><b>Definition:</b> <a href="esp__http__server_8h_source.html#l00154">esp_http_server.h:154</a></div></div>
<div class="ttc" id="aesp__camera_8h_html_ac0dc2e859a218a5fcef50ef1b339220f"><div class="ttname"><a href="esp__camera_8h.html#ac0dc2e859a218a5fcef50ef1b339220f">esp_camera_sensor_get</a></div><div class="ttdeci">sensor_t * esp_camera_sensor_get()</div><div class="ttdoc">Get a pointer to the image sensor control structure.</div></div>
<div class="ttc" id="astructra__filter__t_html_a113b49800f79f5e75bdcf40d20662891"><div class="ttname"><a href="structra__filter__t.html#a113b49800f79f5e75bdcf40d20662891">ra_filter_t::values</a></div><div class="ttdeci">int * values</div><div class="ttdef"><b>Definition:</b> <a href="app__httpd_8cpp_source.html#l00042">app_httpd.cpp:42</a></div></div>
<div class="ttc" id="astructfb__data__t_html_ad7ec5df83b0142e1a1b59449c3baeced"><div class="ttname"><a href="structfb__data__t.html#ad7ec5df83b0142e1a1b59449c3baeced">fb_data_t::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="fb__gfx_8h_source.html#l00030">fb_gfx.h:30</a></div></div>
<div class="ttc" id="astructface__id__list_html"><div class="ttname"><a href="structface__id__list.html">face_id_list</a></div><div class="ttdef"><b>Definition:</b> <a href="fr__forward_8h_source.html#l00051">fr_forward.h:52</a></div></div>
<div class="ttc" id="aRPSL_8txt_html_ae227cfd33a5880ffce840d383c2fbff3"><div class="ttname"><a href="RPSL_8txt.html#ae227cfd33a5880ffce840d383c2fbff3">free</a></div><div class="ttdeci">Conditions &amp;Restrictions Subject to the terms and conditions of this Licensor hereby grants effective on the date You accept this a royalty free</div><div class="ttdef"><b>Definition:</b> <a href="RPSL_8txt_source.html#l00105">RPSL.txt:105</a></div></div>
<div class="ttc" id="aesp__http__server_8h_html"><div class="ttname"><a href="esp__http__server_8h.html">esp_http_server.h</a></div></div>
<div class="ttc" id="astructmtmn__config__t_html_aa3c0368e1a610694f9d77c178a8fa7a3"><div class="ttname"><a href="structmtmn__config__t.html#aa3c0368e1a610694f9d77c178a8fa7a3">mtmn_config_t::pyramid_times</a></div><div class="ttdeci">int pyramid_times</div><div class="ttdoc">The scale of the gradient scaling for the input images.</div><div class="ttdef"><b>Definition:</b> <a href="fd__forward_8h_source.html#l00059">fd_forward.h:59</a></div></div>
<div class="ttc" id="astructdl__matrix3du__t_html_ac0de84feb578bd57356617e553017988"><div class="ttname"><a href="structdl__matrix3du__t.html#ac0de84feb578bd57356617e553017988">dl_matrix3du_t::h</a></div><div class="ttdeci">int h</div><div class="ttdef"><b>Definition:</b> <a href="dl__lib__matrix3d_8h_source.html#l00061">dl_lib_matrix3d.h:61</a></div></div>
<div class="ttc" id="astructface__id__list_html_ab0e672cfe36ae0c4f6625ff062a4ab58"><div class="ttname"><a href="structface__id__list.html#ab0e672cfe36ae0c4f6625ff062a4ab58">face_id_list::tail</a></div><div class="ttdeci">uint8_t tail</div><div class="ttdef"><b>Definition:</b> <a href="fr__forward_8h_source.html#l00054">fr_forward.h:54</a></div></div>
<div class="ttc" id="astructhttpd__req_html"><div class="ttname"><a href="structhttpd__req.html">httpd_req</a></div><div class="ttdoc">HTTP Request Data Structure.</div><div class="ttdef"><b>Definition:</b> <a href="esp__http__server_8h_source.html#l00330">esp_http_server.h:330</a></div></div>
<div class="ttc" id="aapp__httpd_8cpp_html_a71471dbc5fc5910306e8d533dcff7b34"><div class="ttname"><a href="app__httpd_8cpp.html#a71471dbc5fc5910306e8d533dcff7b34">FACE_COLOR_CYAN</a></div><div class="ttdeci">#define FACE_COLOR_CYAN</div><div class="ttdef"><b>Definition:</b> <a href="app__httpd_8cpp_source.html#l00035">app_httpd.cpp:34</a></div></div>
<div class="ttc" id="acJSON_8h_html_a750b5d744c39a06bfb13e6eb010e35d0"><div class="ttname"><a href="cJSON_8h.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition:</b> <a href="cJSON_8h_source.html#l00168">cJSON.h:168</a></div></div>
<div class="ttc" id="aimg__converters_8h_html_a31ff92ac6e9d70205ff14813743b007f"><div class="ttname"><a href="img__converters_8h.html#a31ff92ac6e9d70205ff14813743b007f">fmt2jpg</a></div><div class="ttdeci">bool fmt2jpg(uint8_t *src, size_t src_len, uint16_t width, uint16_t height, pixformat_t format, uint8_t quality, uint8_t **out, size_t *out_len)</div><div class="ttdoc">Convert image buffer to JPEG buffer.</div></div>
<div class="ttc" id="aesp__http__server_8h_html_af9fe08829da872bed237cb17b577b1bb"><div class="ttname"><a href="esp__http__server_8h.html#af9fe08829da872bed237cb17b577b1bb">httpd_resp_set_hdr</a></div><div class="ttdeci">esp_err_t httpd_resp_set_hdr(httpd_req_t *r, const char *field, const char *value)</div><div class="ttdoc">API to append any additional headers.</div></div>
<div class="ttc" id="astructcamera__fb__t_html"><div class="ttname"><a href="structcamera__fb__t.html">camera_fb_t</a></div><div class="ttdoc">Data structure of camera frame buffer.</div><div class="ttdef"><b>Definition:</b> <a href="esp__camera_8h_source.html#l00112">esp_camera.h:112</a></div></div>
<div class="ttc" id="aesp__err_8h_html_abdbffa06442bc1fe3d65dbb8d17656d1"><div class="ttname"><a href="esp__err_8h.html#abdbffa06442bc1fe3d65dbb8d17656d1">ESP_OK</a></div><div class="ttdeci">#define ESP_OK</div><div class="ttdef"><b>Definition:</b> <a href="esp__err_8h_source.html#l00028">esp_err.h:27</a></div></div>
<div class="ttc" id="aesp__timer_8h_html"><div class="ttname"><a href="esp__timer_8h.html">esp_timer.h</a></div><div class="ttdoc">microsecond-precision 64-bit timer API, replacement for ets_timer</div></div>
<div class="ttc" id="afb__gfx_8h_html_a4fe7e25d4fda5d18811c9b48cef02f52"><div class="ttname"><a href="fb__gfx_8h.html#a4fe7e25d4fda5d18811c9b48cef02f52">fb_gfx_print</a></div><div class="ttdeci">uint32_t fb_gfx_print(fb_data_t *fb, int32_t x, int32_t y, uint32_t color, const char *str)</div></div>
<div class="ttc" id="astructfb__data__t_html_a32bfa23bbd3f6a6e886d5c2c2840e270"><div class="ttname"><a href="structfb__data__t.html#a32bfa23bbd3f6a6e886d5c2c2840e270">fb_data_t::bytes_per_pixel</a></div><div class="ttdeci">int bytes_per_pixel</div><div class="ttdef"><b>Definition:</b> <a href="fb__gfx_8h_source.html#l00028">fb_gfx.h:28</a></div></div>
<div class="ttc" id="aesp__http__server_8h_html_a67fc09a6f8b438d55f8277f0112fe2d2"><div class="ttname"><a href="esp__http__server_8h.html#a67fc09a6f8b438d55f8277f0112fe2d2">httpd_start</a></div><div class="ttdeci">esp_err_t httpd_start(httpd_handle_t *handle, const httpd_config_t *config)</div><div class="ttdoc">Starts the web server.</div></div>
<div class="ttc" id="astdint_8h_html_a96411d49619f50e635418ee57651b95d"><div class="ttname"><a href="stdint_8h.html#a96411d49619f50e635418ee57651b95d">int64_t</a></div><div class="ttdeci">__int64_t int64_t</div><div class="ttdef"><b>Definition:</b> <a href="stdint_8h_source.html#l00056">stdint.h:56</a></div></div>
<div class="ttc" id="aHardwareSerial_8cpp_html_a6486f9b363134cf53e917447a063ac0c"><div class="ttname"><a href="HardwareSerial_8cpp.html#a6486f9b363134cf53e917447a063ac0c">Serial</a></div><div class="ttdeci">HardwareSerial Serial(0)</div></div>
<div class="ttc" id="astructtag__box__list_html_a74a848a667470ddc91b38a25dad84492"><div class="ttname"><a href="structtag__box__list.html#a74a848a667470ddc91b38a25dad84492">tag_box_list::len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="image__util_8h_source.html#l00061">image_util.h:61</a></div></div>
<div class="ttc" id="astructfb__data__t_html_a7c8e25faac19301d251fec141b0bf7eb"><div class="ttname"><a href="structfb__data__t.html#a7c8e25faac19301d251fec141b0bf7eb">fb_data_t::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="fb__gfx_8h_source.html#l00027">fb_gfx.h:27</a></div></div>
<div class="ttc" id="astructthreshold__config__t_html_a697b773e63c2045c88f1da72844348a0"><div class="ttname"><a href="structthreshold__config__t.html#a697b773e63c2045c88f1da72844348a0">threshold_config_t::nms</a></div><div class="ttdeci">float nms</div><div class="ttdoc">score threshold for filter candidates by score</div><div class="ttdef"><b>Definition:</b> <a href="fd__forward_8h_source.html#l00044">fd_forward.h:44</a></div></div>
<div class="ttc" id="acJSON_8h_html_adb411a44855a4c49231d72a0fc9a3b3b"><div class="ttname"><a href="cJSON_8h.html#adb411a44855a4c49231d72a0fc9a3b3b">format</a></div><div class="ttdeci">char const int const cJSON_bool format</div><div class="ttdef"><b>Definition:</b> <a href="cJSON_8h_source.html#l00161">cJSON.h:161</a></div></div>
<div class="ttc" id="atag__strings_8h_html_ac483f6ce851c9ecd9fb835ff7551737c"><div class="ttname"><a href="tag__strings_8h.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a></div><div class="ttdeci">p</div><div class="ttdef"><b>Definition:</b> <a href="tag__strings_8h_source.html#l00029">tag_strings.h:29</a></div></div>
<div class="ttc" id="astructmtmn__config__t_html_a8f3538b015c16c9e9319116005d00f92"><div class="ttname"><a href="structmtmn__config__t.html#a8f3538b015c16c9e9319116005d00f92">mtmn_config_t::type</a></div><div class="ttdeci">mtmn_resize_type type</div><div class="ttdoc">The thresholds for O-Net. For details, see the definition of threshold_config_t.</div><div class="ttdef"><b>Definition:</b> <a href="fd__forward_8h_source.html#l00063">fd_forward.h:63</a></div></div>
<div class="ttc" id="aesp__camera_8h_html_adc988b687b20d3caa8ec0d95649de3d0"><div class="ttname"><a href="esp__camera_8h.html#adc988b687b20d3caa8ec0d95649de3d0">esp_camera_fb_return</a></div><div class="ttdeci">void esp_camera_fb_return(camera_fb_t *fb)</div><div class="ttdoc">Return the frame buffer to be reused again.</div></div>
<div class="ttc" id="astructtag__box__list_html"><div class="ttname"><a href="structtag__box__list.html">tag_box_list</a></div><div class="ttdef"><b>Definition:</b> <a href="image__util_8h_source.html#l00056">image_util.h:57</a></div></div>
<div class="ttc" id="aesp__camera_8h_html"><div class="ttname"><a href="esp__camera_8h.html">esp_camera.h</a></div></div>
<div class="ttc" id="astructra__filter__t_html_a52a2c027b178f79de1e7e9bfe6d7da71"><div class="ttname"><a href="structra__filter__t.html#a52a2c027b178f79de1e7e9bfe6d7da71">ra_filter_t::count</a></div><div class="ttdeci">size_t count</div><div class="ttdef"><b>Definition:</b> <a href="app__httpd_8cpp_source.html#l00040">app_httpd.cpp:40</a></div></div>
<div class="ttc" id="afb__gfx_8h_html_a394706dc706d4059b70d5b19cffd7853a56d8be83a128c86028ffc3b72ab63e72"><div class="ttname"><a href="fb__gfx_8h.html#a394706dc706d4059b70d5b19cffd7853a56d8be83a128c86028ffc3b72ab63e72">FB_BGR888</a></div><div class="ttdeci">@ FB_BGR888</div><div class="ttdef"><b>Definition:</b> <a href="fb__gfx_8h_source.html#l00022">fb_gfx.h:22</a></div></div>
<div class="ttc" id="astructthreshold__config__t_html_a76aabcbe7226e1aa609a3820b6056060"><div class="ttname"><a href="structthreshold__config__t.html#a76aabcbe7226e1aa609a3820b6056060">threshold_config_t::score</a></div><div class="ttdeci">float score</div><div class="ttdef"><b>Definition:</b> <a href="fd__forward_8h_source.html#l00043">fd_forward.h:43</a></div></div>
<div class="ttc" id="aapp__httpd_8cpp_html_ab28c27ee7095c6a3266c0bf7cdd70f4c"><div class="ttname"><a href="app__httpd_8cpp.html#ab28c27ee7095c6a3266c0bf7cdd70f4c">FACE_ID_SAVE_NUMBER</a></div><div class="ttdeci">#define FACE_ID_SAVE_NUMBER</div><div class="ttdef"><b>Definition:</b> <a href="app__httpd_8cpp_source.html#l00027">app_httpd.cpp:26</a></div></div>
<div class="ttc" id="astructcamera__fb__t_html_a35665a966e2547144e5a05be882af6f5"><div class="ttname"><a href="structcamera__fb__t.html#a35665a966e2547144e5a05be882af6f5">camera_fb_t::len</a></div><div class="ttdeci">size_t len</div><div class="ttdef"><b>Definition:</b> <a href="esp__camera_8h_source.html#l00114">esp_camera.h:114</a></div></div>
<div class="ttc" id="aHTTP__Method_8h_html_a837a089a977b319a11edfb8022d9e47da4ad23c3d2f21f7502ba058ef89518166"><div class="ttname"><a href="HTTP__Method_8h.html#a837a089a977b319a11edfb8022d9e47da4ad23c3d2f21f7502ba058ef89518166">HTTP_GET</a></div><div class="ttdeci">@ HTTP_GET</div><div class="ttdef"><b>Definition:</b> <a href="HTTP__Method_8h_source.html#l00005">HTTP_Method.h:5</a></div></div>
<div class="ttc" id="aesp__camera_8h_html_ae3dba4491c2295a649f02566bf0bf547"><div class="ttname"><a href="esp__camera_8h.html#ae3dba4491c2295a649f02566bf0bf547">esp_camera_fb_get</a></div><div class="ttdeci">camera_fb_t * esp_camera_fb_get()</div><div class="ttdoc">Obtain pointer to a frame buffer.</div></div>
<div class="ttc" id="astructcamera__fb__t_html_a1566e3abab5198e6204e6aa2a0184d58"><div class="ttname"><a href="structcamera__fb__t.html#a1566e3abab5198e6204e6aa2a0184d58">camera_fb_t::width</a></div><div class="ttdeci">size_t width</div><div class="ttdef"><b>Definition:</b> <a href="esp__camera_8h_source.html#l00115">esp_camera.h:115</a></div></div>
<div class="ttc" id="aapp__httpd_8cpp_html_a1ef7f093f774940aabc872bc891be564"><div class="ttname"><a href="app__httpd_8cpp.html#a1ef7f093f774940aabc872bc891be564">camera_httpd</a></div><div class="ttdeci">httpd_handle_t camera_httpd</div><div class="ttdef"><b>Definition:</b> <a href="app__httpd_8cpp_source.html#l00057">app_httpd.cpp:57</a></div></div>
<div class="ttc" id="azconf_8lex_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="zconf_8lex_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="zconf_8lex_8c_source.html#l01348">zconf.lex.c:1348</a></div></div>
<div class="ttc" id="aesp__http__server_8h_html_a16f21d93351c7b2a7d0fff7e52cb84ce"><div class="ttname"><a href="esp__http__server_8h.html#a16f21d93351c7b2a7d0fff7e52cb84ce">HTTPD_DEFAULT_CONFIG</a></div><div class="ttdeci">#define HTTPD_DEFAULT_CONFIG()</div><div class="ttdef"><b>Definition:</b> <a href="esp__http__server_8h_source.html#l00035">esp_http_server.h:34</a></div></div>
<div class="ttc" id="acamera__index_8h_html_a1bc389873bb77aab64704a0a005554cb"><div class="ttname"><a href="camera__index_8h.html#a1bc389873bb77aab64704a0a005554cb">index_ov2640_html_gz</a></div><div class="ttdeci">const uint8_t index_ov2640_html_gz[]</div><div class="ttdef"><b>Definition:</b> <a href="camera__index_8h_source.html#l00004">camera_index.h:4</a></div></div>
<div class="ttc" id="aBLEEddystoneTLM_8h_html_a36142ddde297ed1d5577c81230997301"><div class="ttname"><a href="BLEEddystoneTLM_8h.html#a36142ddde297ed1d5577c81230997301">temp</a></div><div class="ttdeci">uint16_t temp</div><div class="ttdef"><b>Definition:</b> <a href="BLEEddystoneTLM_8h_source.html#l00003">BLEEddystoneTLM.h:3</a></div></div>
<div class="ttc" id="adef_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="def_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="def_8h_source.html#l00071">def.h:70</a></div></div>
<div class="ttc" id="afb__gfx_8h_html_a3fdff720dece105de6f1f8fe741ce13b"><div class="ttname"><a href="fb__gfx_8h.html#a3fdff720dece105de6f1f8fe741ce13b">fb_gfx_drawFastVLine</a></div><div class="ttdeci">void fb_gfx_drawFastVLine(fb_data_t *fb, int32_t x, int32_t y, int32_t h, uint32_t color)</div></div>
<div class="ttc" id="astructjpg__chunking__t_html_aa6b081bff731346bab0bfed6eddd7e30"><div class="ttname"><a href="structjpg__chunking__t.html#aa6b081bff731346bab0bfed6eddd7e30">jpg_chunking_t::req</a></div><div class="ttdeci">httpd_req_t * req</div><div class="ttdef"><b>Definition:</b> <a href="app__httpd_8cpp_source.html#l00046">app_httpd.cpp:46</a></div></div>
<div class="ttc" id="afd__forward_8h_html_ac36e929f333af4d9f2cd561b8bfdfd39af84c11ba888e499a8a282a3e6f5de7de"><div class="ttname"><a href="fd__forward_8h.html#ac36e929f333af4d9f2cd561b8bfdfd39af84c11ba888e499a8a282a3e6f5de7de">FAST</a></div><div class="ttdeci">@ FAST</div><div class="ttdef"><b>Definition:</b> <a href="fd__forward_8h_source.html#l00037">fd_forward.h:37</a></div></div>
<div class="ttc" id="aesp__http__server_8h_html_a9bc4e30aee549df5519de6a13829c264"><div class="ttname"><a href="esp__http__server_8h.html#a9bc4e30aee549df5519de6a13829c264">httpd_req_get_url_query_str</a></div><div class="ttdeci">esp_err_t httpd_req_get_url_query_str(httpd_req_t *r, char *buf, size_t buf_len)</div><div class="ttdoc">Get Query string from the request URL.</div></div>
<div class="ttc" id="aunity__fixture__malloc__overrides_8h_html_acf143577800376dd931c059ecc61ba06"><div class="ttname"><a href="unity__fixture__malloc__overrides_8h.html#acf143577800376dd931c059ecc61ba06">malloc</a></div><div class="ttdeci">#define malloc</div><div class="ttdef"><b>Definition:</b> <a href="unity__fixture__malloc__overrides_8h_source.html#l00038">unity_fixture_malloc_overrides.h:37</a></div></div>
<div class="ttc" id="afb__gfx_8h_html_aaa18d2b1ec4d3a8865fa34940b2ec1b0"><div class="ttname"><a href="fb__gfx_8h.html#aaa18d2b1ec4d3a8865fa34940b2ec1b0">fb_gfx_drawFastHLine</a></div><div class="ttdeci">void fb_gfx_drawFastHLine(fb_data_t *fb, int32_t x, int32_t y, int32_t w, uint32_t color)</div></div>
<div class="ttc" id="astructtag__box__list_html_a4e437a34b8cdb3a691ffbe5a394aec19"><div class="ttname"><a href="structtag__box__list.html#a4e437a34b8cdb3a691ffbe5a394aec19">tag_box_list::box</a></div><div class="ttdeci">box_t * box</div><div class="ttdef"><b>Definition:</b> <a href="image__util_8h_source.html#l00059">image_util.h:59</a></div></div>
<div class="ttc" id="asensor_8h_html_a9da4a126b14503ef5474dee7630fb9ca"><div class="ttname"><a href="sensor_8h.html#a9da4a126b14503ef5474dee7630fb9ca">gainceiling_t</a></div><div class="ttdeci">gainceiling_t</div><div class="ttdef"><b>Definition:</b> <a href="sensor_8h_source.html#l00047">sensor.h:47</a></div></div>
<div class="ttc" id="astructfb__data__t_html"><div class="ttname"><a href="structfb__data__t.html">fb_data_t</a></div><div class="ttdef"><b>Definition:</b> <a href="fb__gfx_8h_source.html#l00025">fb_gfx.h:25</a></div></div>
<div class="ttc" id="afd__forward_8h_html_a4a6259b5a5f0b3437b26727784628f4e"><div class="ttname"><a href="fd__forward_8h.html#a4a6259b5a5f0b3437b26727784628f4e">face_detect</a></div><div class="ttdeci">box_array_t * face_detect(dl_matrix3du_t *image_matrix, mtmn_config_t *config)</div><div class="ttdoc">Do MTMN face detection, return box and landmark infomation.</div></div>
<div class="ttc" id="astructthreshold__config__t_html_ae672d51698fc4cd983d1155da2d4c513"><div class="ttname"><a href="structthreshold__config__t.html#ae672d51698fc4cd983d1155da2d4c513">threshold_config_t::candidate_number</a></div><div class="ttdeci">int candidate_number</div><div class="ttdoc">nms threshold for nms process</div><div class="ttdef"><b>Definition:</b> <a href="fd__forward_8h_source.html#l00045">fd_forward.h:45</a></div></div>
<div class="ttc" id="astructmtmn__config__t_html_aa44826f88b256aea0890c6f0fb9e523a"><div class="ttname"><a href="structmtmn__config__t.html#aa44826f88b256aea0890c6f0fb9e523a">mtmn_config_t::r_threshold</a></div><div class="ttdeci">threshold_config_t r_threshold</div><div class="ttdoc">The thresholds for P-Net. For details, see the definition of threshold_config_t.</div><div class="ttdef"><b>Definition:</b> <a href="fd__forward_8h_source.html#l00061">fd_forward.h:61</a></div></div>
<div class="ttc" id="astructjpg__chunking__t_html_a95c1a5852d0fb5859f182e89f52e0f06"><div class="ttname"><a href="structjpg__chunking__t.html#a95c1a5852d0fb5859f182e89f52e0f06">jpg_chunking_t::len</a></div><div class="ttdeci">size_t len</div><div class="ttdef"><b>Definition:</b> <a href="app__httpd_8cpp_source.html#l00047">app_httpd.cpp:47</a></div></div>
<div class="ttc" id="astructlandmark__t_html_af91b341f70509d409d169435cf4511b6"><div class="ttname"><a href="structlandmark__t.html#af91b341f70509d409d169435cf4511b6">landmark_t::landmark_p</a></div><div class="ttdeci">fptp_t landmark_p[10]</div><div class="ttdef"><b>Definition:</b> <a href="image__util_8h_source.html#l00048">image_util.h:48</a></div></div>
<div class="ttc" id="aesp__err_8h_html_ae535f6066003e82408b58e12f6950868"><div class="ttname"><a href="esp__err_8h.html#ae535f6066003e82408b58e12f6950868">esp_err_t</a></div><div class="ttdeci">int32_t esp_err_t</div><div class="ttdef"><b>Definition:</b> <a href="esp__err_8h_source.html#l00024">esp_err.h:24</a></div></div>
<div class="ttc" id="astructra__filter__t_html_a532136c12f8d9d7aae3e57727723c66b"><div class="ttname"><a href="structra__filter__t.html#a532136c12f8d9d7aae3e57727723c66b">ra_filter_t::size</a></div><div class="ttdeci">size_t size</div><div class="ttdef"><b>Definition:</b> <a href="app__httpd_8cpp_source.html#l00038">app_httpd.cpp:38</a></div></div>
<div class="ttc" id="asensor_8h_html_a79bc85e5282a183d6c06edc6eb77a69e"><div class="ttname"><a href="sensor_8h.html#a79bc85e5282a183d6c06edc6eb77a69e">framesize_t</a></div><div class="ttdeci">framesize_t</div><div class="ttdef"><b>Definition:</b> <a href="sensor_8h_source.html#l00029">sensor.h:29</a></div></div>
<div class="ttc" id="astructmtmn__config__t_html_a0d6021a3604af36c95c3494b35477448"><div class="ttname"><a href="structmtmn__config__t.html#a0d6021a3604af36c95c3494b35477448">mtmn_config_t::min_face</a></div><div class="ttdeci">float min_face</div><div class="ttdef"><b>Definition:</b> <a href="fd__forward_8h_source.html#l00057">fd_forward.h:57</a></div></div>
<div class="ttc" id="afr__forward_8h_html_af8604502b9c2b373b8c053effd261de8"><div class="ttname"><a href="fr__forward_8h.html#af8604502b9c2b373b8c053effd261de8">FACE_HEIGHT</a></div><div class="ttdeci">#define FACE_HEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="fr__forward_8h_source.html#l00014">fr_forward.h:13</a></div></div>
<div class="ttc" id="astdint_8h_html_a0238af00180b6d9278fa1c6aa790fdf4"><div class="ttname"><a href="stdint_8h.html#a0238af00180b6d9278fa1c6aa790fdf4">uint32_t</a></div><div class="ttdeci">__uint32_t uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="stdint_8h_source.html#l00045">stdint.h:45</a></div></div>
<div class="ttc" id="aimg__converters_8h_html_ab73f1dfbadc0dd7a0c00f0660db99bcd"><div class="ttname"><a href="img__converters_8h.html#ab73f1dfbadc0dd7a0c00f0660db99bcd">fmt2rgb888</a></div><div class="ttdeci">bool fmt2rgb888(const uint8_t *src_buf, size_t src_len, pixformat_t format, uint8_t *rgb_buf)</div><div class="ttdoc">Convert image buffer to RGB888 buffer (used for face detection)</div></div>
<div class="ttc" id="astructmtmn__config__t_html_a648afd9fd7a3752276c7be0ec1822a53"><div class="ttname"><a href="structmtmn__config__t.html#a648afd9fd7a3752276c7be0ec1822a53">mtmn_config_t::pyramid</a></div><div class="ttdeci">float pyramid</div><div class="ttdoc">The minimum size of a detectable face.</div><div class="ttdef"><b>Definition:</b> <a href="fd__forward_8h_source.html#l00058">fd_forward.h:58</a></div></div>
<div class="ttc" id="acJSON__Utils_8h_html_a0dff3c76a075649fa412b1c429ffe382"><div class="ttname"><a href="cJSON__Utils_8h.html#a0dff3c76a075649fa412b1c429ffe382">value</a></div><div class="ttdeci">const char *const const char *const const cJSON *const value</div><div class="ttdef"><b>Definition:</b> <a href="cJSON__Utils_8h_source.html#l00042">cJSON_Utils.h:42</a></div></div>
<div class="ttc" id="aesp__http__server_8h_html_a76040cbeebdd3fea67c15842c9713cc8"><div class="ttname"><a href="esp__http__server_8h.html#a76040cbeebdd3fea67c15842c9713cc8">httpd_register_uri_handler</a></div><div class="ttdeci">esp_err_t httpd_register_uri_handler(httpd_handle_t handle, const httpd_uri_t *uri_handler)</div><div class="ttdoc">Registers a URI handler.</div></div>
<div class="ttc" id="aapp__httpd_8cpp_html_a107102e307d7bfe53b0f79e0097568e9"><div class="ttname"><a href="app__httpd_8cpp.html#a107102e307d7bfe53b0f79e0097568e9">startCameraServer</a></div><div class="ttdeci">void startCameraServer()</div><div class="ttdef"><b>Definition:</b> <a href="app__httpd_8cpp_source.html#l00591">app_httpd.cpp:591</a></div></div>
<div class="ttc" id="acamera__index_8h_html"><div class="ttname"><a href="camera__index_8h.html">camera_index.h</a></div></div>
<div class="ttc" id="aapp__httpd_8cpp_html_afa6b55a66c5b733e36a480522265fa2c"><div class="ttname"><a href="app__httpd_8cpp.html#afa6b55a66c5b733e36a480522265fa2c">FACE_COLOR_RED</a></div><div class="ttdeci">#define FACE_COLOR_RED</div><div class="ttdef"><b>Definition:</b> <a href="app__httpd_8cpp_source.html#l00031">app_httpd.cpp:30</a></div></div>
<div class="ttc" id="aapp__httpd_8cpp_html_a75746f07d879f351a0e4f53a0536d3a4"><div class="ttname"><a href="app__httpd_8cpp.html#a75746f07d879f351a0e4f53a0536d3a4">FACE_COLOR_GREEN</a></div><div class="ttdeci">#define FACE_COLOR_GREEN</div><div class="ttdef"><b>Definition:</b> <a href="app__httpd_8cpp_source.html#l00032">app_httpd.cpp:31</a></div></div>
<div class="ttc" id="astructcamera__fb__t_html_ab981c458342c57459bec8ac80a01871b"><div class="ttname"><a href="structcamera__fb__t.html#ab981c458342c57459bec8ac80a01871b">camera_fb_t::buf</a></div><div class="ttdeci">uint8_t * buf</div><div class="ttdef"><b>Definition:</b> <a href="esp__camera_8h_source.html#l00113">esp_camera.h:113</a></div></div>
<div class="ttc" id="astdlib__noniso_8h_html_a30670a60464f77af17dfb353353d6df8"><div class="ttname"><a href="stdlib__noniso_8h.html#a30670a60464f77af17dfb353353d6df8">atoi</a></div><div class="ttdeci">int atoi(const char *s)</div></div>
<div class="ttc" id="astructfb__data__t_html_adf4e84b5efeb87f4bfeeff2fadb9ca52"><div class="ttname"><a href="structfb__data__t.html#adf4e84b5efeb87f4bfeeff2fadb9ca52">fb_data_t::format</a></div><div class="ttdeci">fb_format_t format</div><div class="ttdef"><b>Definition:</b> <a href="fb__gfx_8h_source.html#l00029">fb_gfx.h:29</a></div></div>
<div class="ttc" id="asensor_8h_html_a3390f04bc7e74f40fe645c69177ce34cae89138c0356c2d13564556ca339489bd"><div class="ttname"><a href="sensor_8h.html#a3390f04bc7e74f40fe645c69177ce34cae89138c0356c2d13564556ca339489bd">PIXFORMAT_JPEG</a></div><div class="ttdeci">@ PIXFORMAT_JPEG</div><div class="ttdef"><b>Definition:</b> <a href="sensor_8h_source.html#l00022">sensor.h:22</a></div></div>
<div class="ttc" id="astructra__filter__t_html_a7d4803bb44d3bfd6eb7396e340050063"><div class="ttname"><a href="structra__filter__t.html#a7d4803bb44d3bfd6eb7396e340050063">ra_filter_t::sum</a></div><div class="ttdeci">int sum</div><div class="ttdef"><b>Definition:</b> <a href="app__httpd_8cpp_source.html#l00041">app_httpd.cpp:41</a></div></div>
<div class="ttc" id="aclassPrint_html_aeaa1520ee061ba4206c28cb550e6bf44"><div class="ttname"><a href="classPrint.html#aeaa1520ee061ba4206c28cb550e6bf44">Print::printf</a></div><div class="ttdeci">size_t printf(const char *format,...) __attribute__((format(printf</div><div class="ttdef"><b>Definition:</b> <a href="Print_8cpp_source.html#l00047">Print.cpp:47</a></div></div>
<div class="ttc" id="aesp__err_8h_html_a3792b0d09c0170e4a3b5bb9b6f6fa72b"><div class="ttname"><a href="esp__err_8h.html#a3792b0d09c0170e4a3b5bb9b6f6fa72b">ESP_FAIL</a></div><div class="ttdeci">#define ESP_FAIL</div><div class="ttdef"><b>Definition:</b> <a href="esp__err_8h_source.html#l00029">esp_err.h:28</a></div></div>
<div class="ttc" id="aesp__http__server_8h_html_a67aa037d44f178a47f3fadca5ac34c1a"><div class="ttname"><a href="esp__http__server_8h.html#a67aa037d44f178a47f3fadca5ac34c1a">httpd_resp_send</a></div><div class="ttdeci">esp_err_t httpd_resp_send(httpd_req_t *r, const char *buf, ssize_t buf_len)</div><div class="ttdoc">API to send a complete HTTP response.</div></div>
<div class="ttc" id="acamera__index_8h_html_af54749bfdc81fcf5b5aa529768b1bd75"><div class="ttname"><a href="camera__index_8h.html#af54749bfdc81fcf5b5aa529768b1bd75">index_ov3660_html_gz_len</a></div><div class="ttdeci">#define index_ov3660_html_gz_len</div><div class="ttdef"><b>Definition:</b> <a href="camera__index_8h_source.html#l00280">camera_index.h:279</a></div></div>
<div class="ttc" id="astructjpg__chunking__t_html"><div class="ttname"><a href="structjpg__chunking__t.html">jpg_chunking_t</a></div><div class="ttdef"><b>Definition:</b> <a href="app__httpd_8cpp_source.html#l00045">app_httpd.cpp:45</a></div></div>
<div class="ttc" id="aapp__httpd_8cpp_html_aeadb1986dc285585c4d295e7b317d4d0"><div class="ttname"><a href="app__httpd_8cpp.html#aeadb1986dc285585c4d295e7b317d4d0">stream_httpd</a></div><div class="ttdeci">httpd_handle_t stream_httpd</div><div class="ttdef"><b>Definition:</b> <a href="app__httpd_8cpp_source.html#l00056">app_httpd.cpp:56</a></div></div>
<div class="ttc" id="afr__forward_8h_html_a0bd86a87f2f5966229b861a341124cd6"><div class="ttname"><a href="fr__forward_8h.html#a0bd86a87f2f5966229b861a341124cd6">recognize_face</a></div><div class="ttdeci">int8_t recognize_face(face_id_list *l, dl_matrix3du_t *algined_face)</div><div class="ttdoc">Match face with the id_list, and return matched_id.</div></div>
<div class="ttc" id="afr__forward_8h_html_a75e0311e61ee390e15a4c3bd4766035a"><div class="ttname"><a href="fr__forward_8h.html#a75e0311e61ee390e15a4c3bd4766035a">align_face</a></div><div class="ttdeci">int8_t align_face(box_array_t *onet_boxes, dl_matrix3du_t *src, dl_matrix3du_t *dest)</div><div class="ttdef"><b>Definition:</b> <a href="fr__forward_8h_source.html#l00100">fr_forward.h:100</a></div></div>
<div class="ttc" id="astructdl__matrix3du__t_html_a5abbe164b8de24c82d3f9462f677fa6c"><div class="ttname"><a href="structdl__matrix3du__t.html#a5abbe164b8de24c82d3f9462f677fa6c">dl_matrix3du_t::item</a></div><div class="ttdeci">uc_t * item</div><div class="ttdef"><b>Definition:</b> <a href="dl__lib__matrix3d_8h_source.html#l00065">dl_lib_matrix3d.h:65</a></div></div>
<div class="ttc" id="asensor_8h_html_a32585d6be8e1d3131dc56e42b6127f87"><div class="ttname"><a href="sensor_8h.html#a32585d6be8e1d3131dc56e42b6127f87">OV3660_PID</a></div><div class="ttdeci">#define OV3660_PID</div><div class="ttdef"><b>Definition:</b> <a href="sensor_8h_source.html#l00017">sensor.h:16</a></div></div>
<div class="ttc" id="astructhttpd__config_html"><div class="ttname"><a href="structhttpd__config.html">httpd_config</a></div><div class="ttdoc">HTTP Server Configuration Structure.</div><div class="ttdef"><b>Definition:</b> <a href="esp__http__server_8h_source.html#l00141">esp_http_server.h:141</a></div></div>
<div class="ttc" id="aapp__httpd_8cpp_html_a239c9dd1a6a35545c8b546fd2dc3975b"><div class="ttname"><a href="app__httpd_8cpp.html#a239c9dd1a6a35545c8b546fd2dc3975b">PART_BOUNDARY</a></div><div class="ttdeci">#define PART_BOUNDARY</div><div class="ttdef"><b>Definition:</b> <a href="app__httpd_8cpp_source.html#l00051">app_httpd.cpp:50</a></div></div>
<div class="ttc" id="astructhttpd__uri_html"><div class="ttname"><a href="structhttpd__uri.html">httpd_uri</a></div><div class="ttdoc">Structure for URI handler.</div><div class="ttdef"><b>Definition:</b> <a href="esp__http__server_8h_source.html#l00386">esp_http_server.h:386</a></div></div>
<div class="ttc" id="afr__forward_8h_html_a2d9c6be0f6bb06094d03019da23542c1"><div class="ttname"><a href="fr__forward_8h.html#a2d9c6be0f6bb06094d03019da23542c1">enroll_face</a></div><div class="ttdeci">int8_t enroll_face(face_id_list *l, dl_matrix3du_t *aligned_face)</div><div class="ttdoc">Produce face id according to the input aligned face, and save it to dest_id.</div></div>
<div class="ttc" id="aesp__timer_8h_html_ad06d49f60aa7a28faead62981faa2370"><div class="ttname"><a href="esp__timer_8h.html#ad06d49f60aa7a28faead62981faa2370">esp_timer_get_time</a></div><div class="ttdeci">int64_t esp_timer_get_time()</div><div class="ttdoc">Get time in microseconds since boot.</div></div>
<div class="ttc" id="acamera__index_8h_html_a3e9856444509ebbb38f627843790be46"><div class="ttname"><a href="camera__index_8h.html#a3e9856444509ebbb38f627843790be46">index_ov2640_html_gz_len</a></div><div class="ttdeci">#define index_ov2640_html_gz_len</div><div class="ttdef"><b>Definition:</b> <a href="camera__index_8h_source.html#l00004">camera_index.h:3</a></div></div>
<div class="ttc" id="aesp__http__server_8h_html_afe6f7650c67454ccbe85bb470f166de2"><div class="ttname"><a href="esp__http__server_8h.html#afe6f7650c67454ccbe85bb470f166de2">httpd_resp_set_type</a></div><div class="ttdeci">esp_err_t httpd_resp_set_type(httpd_req_t *r, const char *type)</div><div class="ttdoc">API to set the HTTP content type.</div></div>
<div class="ttc" id="aapp__httpd_8cpp_html_a6e6ff511ff346705d4f5f56380163b7b"><div class="ttname"><a href="app__httpd_8cpp.html#a6e6ff511ff346705d4f5f56380163b7b">FACE_COLOR_YELLOW</a></div><div class="ttdeci">#define FACE_COLOR_YELLOW</div><div class="ttdef"><b>Definition:</b> <a href="app__httpd_8cpp_source.html#l00034">app_httpd.cpp:33</a></div></div>
<div class="ttc" id="aesp__http__server_8h_html_a4c6e0465b3c09f5a997043b46ec99186"><div class="ttname"><a href="esp__http__server_8h.html#a4c6e0465b3c09f5a997043b46ec99186">httpd_resp_send_chunk</a></div><div class="ttdeci">esp_err_t httpd_resp_send_chunk(httpd_req_t *r, const char *buf, ssize_t buf_len)</div><div class="ttdoc">API to send one HTTP chunk.</div></div>
<div class="ttc" id="aimg__converters_8h_html_a16e5406dfff3cb636aaa8ce8eb25ec9a"><div class="ttname"><a href="img__converters_8h.html#a16e5406dfff3cb636aaa8ce8eb25ec9a">frame2jpg</a></div><div class="ttdeci">bool frame2jpg(camera_fb_t *fb, uint8_t quality, uint8_t **out, size_t *out_len)</div><div class="ttdoc">Convert camera frame buffer to JPEG buffer.</div></div>
<div class="ttc" id="aesp__http__server_8h_html_a660bc64ded0fb1c7ad498180fc22a7a7"><div class="ttname"><a href="esp__http__server_8h.html#a660bc64ded0fb1c7ad498180fc22a7a7">httpd_handle_t</a></div><div class="ttdeci">void * httpd_handle_t</div><div class="ttdoc">HTTP Server Instance Handle.</div><div class="ttdef"><b>Definition:</b> <a href="esp__http__server_8h_source.html#l00080">esp_http_server.h:80</a></div></div>
<div class="ttc" id="afb__gfx_8h_html_af97a81e437d251e9648e3f9595cdb801"><div class="ttname"><a href="fb__gfx_8h.html#af97a81e437d251e9648e3f9595cdb801">fb_gfx_fillRect</a></div><div class="ttdeci">void fb_gfx_fillRect(fb_data_t *fb, int32_t x, int32_t y, int32_t w, int32_t h, uint32_t color)</div></div>
<div class="ttc" id="astdint_8h_html_a2aff71146ab4942b2b38860c749c4074"><div class="ttname"><a href="stdint_8h.html#a2aff71146ab4942b2b38860c749c4074">uint8_t</a></div><div class="ttdeci">__uint8_t uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="stdint_8h_source.html#l00021">stdint.h:21</a></div></div>
<div class="ttc" id="astructdl__matrix3du__t_html_ae2f610578bd83ca809473e55d8b65ef4"><div class="ttname"><a href="structdl__matrix3du__t.html#ae2f610578bd83ca809473e55d8b65ef4">dl_matrix3du_t::w</a></div><div class="ttdeci">int w</div><div class="ttdef"><b>Definition:</b> <a href="dl__lib__matrix3d_8h_source.html#l00060">dl_lib_matrix3d.h:60</a></div></div>
<div class="ttc" id="astructcamera__fb__t_html_a848537e7778745c568897348afb48d0e"><div class="ttname"><a href="structcamera__fb__t.html#a848537e7778745c568897348afb48d0e">camera_fb_t::height</a></div><div class="ttdeci">size_t height</div><div class="ttdef"><b>Definition:</b> <a href="esp__camera_8h_source.html#l00116">esp_camera.h:116</a></div></div>
<div class="ttc" id="astructmtmn__config__t_html"><div class="ttname"><a href="structmtmn__config__t.html">mtmn_config_t</a></div><div class="ttdef"><b>Definition:</b> <a href="fd__forward_8h_source.html#l00055">fd_forward.h:56</a></div></div>
<div class="ttc" id="anamespaceudp__server_html_a4243778b598aedff036c5363970df861"><div class="ttname"><a href="namespaceudp__server.html#a4243778b598aedff036c5363970df861">udp_server.s</a></div><div class="ttdeci">s</div><div class="ttdef"><b>Definition:</b> <a href="udp__server_8py_source.html#l00007">udp_server.py:7</a></div></div>
<div class="ttc" id="afr__forward_8h_html_a1aaf4002f77b5308e94b18468fe17df1"><div class="ttname"><a href="fr__forward_8h.html#a1aaf4002f77b5308e94b18468fe17df1">FACE_WIDTH</a></div><div class="ttdeci">#define FACE_WIDTH</div><div class="ttdef"><b>Definition:</b> <a href="fr__forward_8h_source.html#l00013">fr_forward.h:12</a></div></div>
<div class="ttc" id="anamespaceasio_1_1detail_1_1descriptor__ops_html_ad10e658a754ff775cdcc3b3decd3c8c9"><div class="ttname"><a href="namespaceasio_1_1detail_1_1descriptor__ops.html#ad10e658a754ff775cdcc3b3decd3c8c9">asio::detail::descriptor_ops::buf</a></div><div class="ttdeci">iovec buf</div><div class="ttdef"><b>Definition:</b> <a href="descriptor__ops_8hpp_source.html#l00074">descriptor_ops.hpp:74</a></div></div>
<div class="ttc" id="astructstr_html"><div class="ttname"><a href="structstr.html">str</a></div><div class="ttdef"><b>Definition:</b> <a href="coap_2str_8h_source.html#l00015">str.h:15</a></div></div>
<div class="ttc" id="aesp__http__server_8h_html_aefda761de0e657b96247964ce738d5c0"><div class="ttname"><a href="esp__http__server_8h.html#aefda761de0e657b96247964ce738d5c0">httpd_req_get_url_query_len</a></div><div class="ttdeci">size_t httpd_req_get_url_query_len(httpd_req_t *r)</div><div class="ttdoc">Get Query string length from the request URL.</div></div>
<div class="ttc" id="astructra__filter__t_html"><div class="ttname"><a href="structra__filter__t.html">ra_filter_t</a></div><div class="ttdef"><b>Definition:</b> <a href="app__httpd_8cpp_source.html#l00037">app_httpd.cpp:37</a></div></div>
<div class="ttc" id="aimg__converters_8h_html_a97adf86e01030cfdf3a21e788e357b66"><div class="ttname"><a href="img__converters_8h.html#a97adf86e01030cfdf3a21e788e357b66">frame2jpg_cb</a></div><div class="ttdeci">bool frame2jpg_cb(camera_fb_t *fb, uint8_t quality, jpg_out_cb cb, void *arg)</div><div class="ttdoc">Convert camera frame buffer to JPEG.</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
