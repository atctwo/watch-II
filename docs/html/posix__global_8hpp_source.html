<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>watch 2: components/arduino-esp32/tools/sdk/include/asio/asio/detail/posix_global.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">watch 2
   </div>
   <div id="projectbrief">Firmwareforwatch2</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_409f97388efe006bc3438b95e9edef48.html">components</a></li><li class="navelem"><a class="el" href="dir_5eb99044ce905dee52e93bf33cea5db4.html">arduino-esp32</a></li><li class="navelem"><a class="el" href="dir_4ff12a5a8553bfa4c4919a42692fbdce.html">tools</a></li><li class="navelem"><a class="el" href="dir_52ea70f0eb098e156958cec697c475bd.html">sdk</a></li><li class="navelem"><a class="el" href="dir_9c6b854ec21995fd46b9bc9bf28c09cd.html">include</a></li><li class="navelem"><a class="el" href="dir_10023c651043b4fd76c5d0356ea0300b.html">asio</a></li><li class="navelem"><a class="el" href="dir_39fc3c20f5abc9daf0853e0039d424f6.html">asio</a></li><li class="navelem"><a class="el" href="dir_704c6896a2a218edd7ac91c8ba2dfb77.html">detail</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">posix_global.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="posix__global_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// detail/posix_global.hpp</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// ~~~~~~~~~~~~~~~~~~~~~~~</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// Copyright (c) 2003-2018 Christopher M. Kohlhoff (chris at kohlhoff dot com)</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// Distributed under the Boost Software License, Version 1.0. (See accompanying</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160; </div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#ifndef ASIO_DETAIL_POSIX_GLOBAL_HPP</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#define ASIO_DETAIL_POSIX_GLOBAL_HPP</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#if defined(_MSC_VER) &amp;&amp; (_MSC_VER &gt;= 1200)</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor"># pragma once</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#endif // defined(_MSC_VER) &amp;&amp; (_MSC_VER &gt;= 1200)</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160; </div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="config_8hpp.html">asio/detail/config.hpp</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#if defined(ASIO_HAS_PTHREADS)</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;exception&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="pthread_8h.html">pthread.h</a>&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="push__options_8hpp.html">asio/detail/push_options.hpp</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceasio.html">asio</a> {</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">namespace </span>detail {</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">struct </span>posix_global_impl</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;{</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <span class="comment">// Helper function to perform initialisation.</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> do_init()</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  {</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    instance_.static_ptr_ = instance_.ptr_ = <span class="keyword">new</span> <a class="code" href="common-test-arrays_8h.html#ad24d0de3f597ca60dd95c4bc59c2ff73">T</a>;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  }</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="comment">// Destructor automatically cleans up the global.</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  ~posix_global_impl()</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  {</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="keyword">delete</span> static_ptr_;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  }</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  static ::pthread_once_t init_once_;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keyword">static</span> <a class="code" href="common-test-arrays_8h.html#ad24d0de3f597ca60dd95c4bc59c2ff73">T</a>* static_ptr_;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="keyword">static</span> posix_global_impl instance_;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <a class="code" href="common-test-arrays_8h.html#ad24d0de3f597ca60dd95c4bc59c2ff73">T</a>* ptr_;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;};</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;::pthread_once_t posix_global_impl&lt;T&gt;::init_once_ = PTHREAD_ONCE_INIT;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<a class="code" href="common-test-arrays_8h.html#ad24d0de3f597ca60dd95c4bc59c2ff73">T</a>* posix_global_impl&lt;T&gt;::static_ptr_ = 0;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;posix_global_impl&lt;T&gt; posix_global_impl&lt;T&gt;::instance_;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<a class="code" href="common-test-arrays_8h.html#ad24d0de3f597ca60dd95c4bc59c2ff73">T</a>&amp; posix_global()</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;{</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordtype">int</span> result = ::pthread_once(</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;      &amp;posix_global_impl&lt;T&gt;::init_once_,</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;      &amp;posix_global_impl&lt;T&gt;::do_init);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keywordflow">if</span> (result != 0)</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <a class="code" href="RPSL_8txt.html#a871e435c966c46b2a07a9057af7e97ff">std::terminate</a>();</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="keywordflow">return</span> *posix_global_impl&lt;T&gt;::instance_.ptr_;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;}</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;} <span class="comment">// namespace detail</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;} <span class="comment">// namespace asio</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pop__options_8hpp.html">asio/detail/pop_options.hpp</a>&quot;</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#endif // defined(ASIO_HAS_PTHREADS)</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#endif // ASIO_DETAIL_POSIX_GLOBAL_HPP</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aconfig_8hpp_html"><div class="ttname"><a href="config_8hpp.html">config.hpp</a></div></div>
<div class="ttc" id="acommon-test-arrays_8h_html_ad24d0de3f597ca60dd95c4bc59c2ff73"><div class="ttname"><a href="common-test-arrays_8h.html#ad24d0de3f597ca60dd95c4bc59c2ff73">T</a></div><div class="ttdeci">#define T(v)</div><div class="ttdef"><b>Definition:</b> <a href="common-test-arrays_8h_source.html#l00051">common-test-arrays.h:50</a></div></div>
<div class="ttc" id="apush__options_8hpp_html"><div class="ttname"><a href="push__options_8hpp.html">push_options.hpp</a></div></div>
<div class="ttc" id="aRPSL_8txt_html_a871e435c966c46b2a07a9057af7e97ff"><div class="ttname"><a href="RPSL_8txt.html#a871e435c966c46b2a07a9057af7e97ff">terminate</a></div><div class="ttdeci">royalty perpetual and irrevocable under Your Applicable Patent Rights and other intellectual property rights owned or controlled by to offer for modify or have sublicense and distribute Your in any form and for any through multiple tiers of including but not limited to any algorithms or inventions that may be contained in the Covered for the purpose of asserting any of Your patent or assisting a third party to assert any of its patent against Licensor or any Contributor Derivative Works You may create a Derivative Work by combining Covered Code with other code not otherwise governed by the terms of this License and distribute the Derivative Work as an integrated product In each such You must make sure the requirements of this License are fulfilled for the Covered Code or any portion including all Modifications You must cause any Derivative Work that you publish or Externally that in whole or in part contains or is derived from the Covered Code or any part to be licensed as a whole at no charge to all third parties under the terms of this License and no other license except as provided in Section You also must make Source Code available for the Derivative Work under the same terms as described in Sections above Compatible Source Licenses Software modules that have been independently developed without any use of Covered Code and which contain no portion of the Covered Modifications or other Derivative but are used or combined in any way wtih the Covered Code or any Derivative Work to form a larger Derivative are exempt from the conditions described in Section but only to the extent including any software that is linked integrated or part of the same applications the software module by any method must be wholly subject to one of the Compatible Source Licenses Notwithstanding the all Covered Code must be subject to the terms of this License the entire Derivative Work must be licensed under a combination of the or form larger works other software that is not subject to the Compatible Source License For although the Mozilla Public License v1 allows Mozilla code to be combined with proprietary software that is not subject to the if MPL licensed code is used with Covered Code the MPL licensed code could not be combined or linked with any code not governed by the MPL The general intent of this section is to enable use of Covered Code with applications that are wholly subject to an acceptable open source license You are responsible for determining whether your use of software with Covered Code is allowed under Your license to such software Mere aggregation of another work not based on the Covered Code with the Covered via automatic updating such combination and or integration constitutes a Derivative Work subject to the terms of this License Exclusions From License Grant Nothing in this License shall be deemed to grant any rights to trade secrets or any other intellectual property of Licensor or any Contributor except as expressly stated herein No right is granted to the trademarks of Licensor or any Contributor even if such marks are included in the Covered Code Nothing in this License shall be interpreted to prohibit Licensor from licensing under different terms from this License any code that Licensor otherwise would have a right to license Derivative Works and or any use or combination of Covered Code with other technology provided by Licensor or third parties may require additional patent licenses from Licensor which Licensor may grant in its sole discretion No patent license is granted separate from the Original Code or combinations of the Original Code with other software or hardware Trademarks This License does not grant any rights to use the trademarks or trade names owned by and to charge a fee indemnity or liability obligations and or other rights consistent with the scope of the license granted You may do so only on Your own behalf and as Your sole and not on behalf of Licensor or any Contributor You must obtain the recipient s agreement that any such Additional Terms are offered by You and You hereby agree to defend and hold Licensor and every Contributor harmless for any liability incurred by or claims asserted against Licensor or such Contributor by reason of any such Additional Terms Versions of the License Licensor may publish revised and or new versions of this License from time to time Each version will be given a distinguishing version number Once Original Code has been published under a particular version of this You may continue to use it under the terms of that version You may also choose to use such Original Code under the terms of any subsequent version of this License published by Licensor No one other than Licensor has the right to modify the terms applicable to Covered Code created under this License NO WARRANTY OR SUPPORT The Covered Code may contain in whole or in part pre or not fully tested works The Covered Code may contain errors that could cause failures or loss of and may be incomplete or contain inaccuracies You expressly acknowledge and agree that use of the Covered or any portion is at Your sole and entire risk THE COVERED CODE IS PROVIDED AS IS AND WITHOUT UPGRADES OR SUPPORT OF ANY KIND AND LICENSOR AND LICENSOR S LICENSOR() EXPRESS OR BUT NOT LIMITED THE IMPLIED WARRANTIES AND OR CONDITIONS OF OF SATISFACTORY OF FITNESS FOR A PARTICULAR OF OF QUIET AND NONINFRINGEMENT OF THIRD PARTY RIGHTS LICENSOR AND EACH CONTRIBUTOR DOES NOT WARRANT AGAINST INTERFERENCE WITH YOUR ENJOYMENT OF THE COVERED THAT THE FUNCTIONS CONTAINED IN THE COVERED CODE WILL MEET YOUR THAT THE OPERATION OF THE COVERED CODE WILL BE UNINTERRUPTED OR ERROR OR THAT DEFECTS IN THE COVERED CODE WILL BE CORRECTED NO ORAL OR WRITTEN INFORMATION OR ADVICE GIVEN BY A LICENSOR AUTHORIZED REPRESENTATIVE OR ANY CONTRIBUTOR SHALL CREATE A WARRANTY You acknowledge that the Covered Code is not intended for use in high risk but not limited the operation or maintenance of nuclear aircraft aircraft communication or air traffic control machines in which case the failure of the Covered Code could lead to personal or severe physical or environmental damage Licensor disclaims any express or implied warranty of fitness for such uses LIMITATION OF LIABILITY TO THE EXTENT NOT PROHIBITED BY IN NO EVENT SHALL LICENSOR OR ANY CONTRIBUTOR BE LIABLE FOR ANY INDIRECT OR CONSEQUENTIAL DAMAGES ARISING OUT OF OR RELATING TO THIS LICENSE OR YOUR USE OR INABILITY TO USE THE COVERED OR ANY PORTION WHETHER UNDER A THEORY OF PRODUCTS LIABILITY OR EVEN IF LICENSOR OR SUCH CONTRIBUTOR HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES AND NOTWITHSTANDING THE FAILURE OF ESSENTIAL PURPOSE OF ANY REMEDY SOME JURISDICTIONS DO NOT ALLOW THE LIMITATION OF LIABILITY OF INCIDENTAL OR CONSEQUENTIAL SO THIS LIMITATION MAY NOT APPLY TO YOU In no event shall Licensor s total liability to You for all each Contributor retains all title and interest in and to any Modifications made by such Contributor Licensor retains all title and interest in and to the Original Code and any Modifications made by or on behalf of and such Licensor Modifications will not be automatically subject to this License Licensor at its sole choose to license such Licensor Modifications under this or on different terms from those contained in this License or may choose not to license them at all Termination Term and Termination The term of this License is perpetual unless terminated as provided below This License and the rights granted hereunder will terminate</div><div class="ttdef"><b>Definition:</b> <a href="RPSL_8txt_source.html#l00326">RPSL.txt:330</a></div></div>
<div class="ttc" id="apthread_8h_html"><div class="ttname"><a href="pthread_8h.html">pthread.h</a></div></div>
<div class="ttc" id="anamespaceasio_html"><div class="ttname"><a href="namespaceasio.html">asio</a></div><div class="ttdef"><b>Definition:</b> <a href="associated__allocator_8hpp_source.html#l00024">associated_allocator.hpp:24</a></div></div>
<div class="ttc" id="apop__options_8hpp_html"><div class="ttname"><a href="pop__options_8hpp.html">pop_options.hpp</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
